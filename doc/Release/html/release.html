<P><A HREF="Release.html"><IMG SRC="fm2html-toc.gif">Table of Contents</A>
<!-- This file was created with the fm2html filter.
The filter is copyright Norwegian Telecom Research and
was programmed by Jon Stephenson von Tetzchner. -->



<P>This document describes the most important changes to Zebra over the past few releases. 
<H3><A NAME="HDR0">  1.  Version 4.2</A></H3>

<HR>
<P>While there have been numerous changes to Zebra for this release, there are relatively few user-visible differences or new features. If you need details and specifics, check the ChangeLog file in the top directory of the distribution.
<H4><A NAME="HDR1">  1.1  New features</A></H4>

<UL>
<P><LI>Horizontal plots now support several map projections which can be selected interactively. The list of current projections includes Mercator, Lambert conformal, Lambert polar, Lambert equal area, Cassini, Albers equal area, orthographic, and stereographic. Others can be added to future releases as interest indicates.The original fast cyclidrical projection is still available, also.
<BR>
<P><LI>A port to the Linux operating system for Intel processors is now available. This port has some limitations, and should be considered beta-test software. See the <I>Installation Manual</I> for more information. A binary release is available with all of the optional capabilities, e.g. projections, except for the HDF interface. [HDF 4.0-beta supposedly builds on Linux, but it has not been tested with Zebra.]
<BR>
<P><LI>It is now easier to run multiple Zebra sessions concurrently on the same host, or to run multiple display managers within a single Zebra session. Among other things, this means a datastore daemon on a single host can concurrently service multiple display sessions on the local host and other hosts. Likewise a single host can simulate a network of Zebra sessions, or multiple networked sessions can be running concurrently on the same set of hosts.
<BR>
<P><LI>An improved time widget, with new features, including the ability to remember "interesting" times in a menu.
<BR>

<P><LI>The help mechanism can now work with either the netscape or mosaic browsers. Xhelp is still distributed with this release, but can be configured out. The <I>Installation Manual</I> describes how to configure your help browser.
<BR>
<P><LI>For those who manually edit plot description files, the syntax has been significantly relaxed. Comments and blank lines are permitted everyewhere, and tabs are not required anywhere. A new utility, pdcheck, verifies the syntax of plot description files and reports any warnings or errors.
<BR>
<P><LI>The interface to netCDF files is a little more intelligent and flexible regarding the styles and conventions it accepts. For example, it can now read and write several conventions for time, and it supports even the most bizarre combinations of capitalization in field and dimension names, as well as some common abbreviations.
<BR>
<P><LI>Zebra successfully builds and runs with the MIT X11 Release 6.
<BR>
<P><LI>The Zebra source distribution can be compiled with the public domain GNU FORTRAN compiler g77.
<BR>
<P><LI>The graphics process supports interactive manipulation of the plot window layout, through plot description parameters and icon menus. Currently the layout parameters include the height and width of the icon region, the top annotation region, the side annotation border regions, and each of the four axis regions.
<BR>
<P><LI>This release of the data store library incorporates a primitive Hierarchical Data Format (HDF) interface. So far the interface is tailored specfically towards the HDF/netCDF satellite image files generated by SeaSpace's Terascan Data Format (TDF) converter, tdf2hdf.
<BR>
<P><LI>The graphics process contains the first release of a histogram plot type. Histograms support bar charts of data bin counts for multiple platforms and fields.
<BR></UL>


<H4><A NAME="HDR2">  1.2  Changes</A></H4>


<UL>
<P><LI>The interface between the display manager and graphics processes has changed significantly. The largest user-visible change is that the name of a graphics process---the name known by the message system---no longer must match the window name given by the display manager. By default the display manager still tries to keep window names identical to message names. The message names are used with commands like zquery and with the plot description monitor facility, while the window names apply to display manager commands. A new `multiple' option allows more than one display manager to run in a single message session, so different displays (hosts and X terminals) can share the same message manager and datastore daemon. The multiple option gives each graphics process a unique message name, different from the window name. The communication between display manager and graphics process has been optimized slightly, to avoid such things as redundant replots.
<BR>
<P><LI>The Zebra 4.2 distribution incorporates the Imake system from the MIT Release 6 of X11. This means the Zebra directory tree has a few changes. The original imake directory has been split into the cf and imake directories under the config directory, and the files originally in config now reside in config/project. The actual configuration and installation steps have changed very little, except the the familiar config.h file has been moved to config/project. If you have local Imakefiles for programs outside of the Zebra distriubtion, see the <I>Developer's Guide</I> for instructions on porting them to Zebra's new set of Imake rules.
<BR>
<P><LI>In general, several large portions of the code have been cleaned up. A few more memory leaks have been plugged, and a few more programs are a little more robust. In particular, the message manager has many more safety checks and more debugging flexibility (see message h). In general, library header files finally declare prototypes for every public function.
<BR>
<P><LI>A Zebra distribution is now available which includes and automatically builds the RDSS libraries needed to compile Zebra. Sites which do not already have the RDSS libraries do not need to acquire and install them separately. See the <I>Installation Manual</I> for details.
<BR>
<P><LI>The dsmanage utility, whose source code is C++, only compiles with GNU C++ version 2.7.0 or later. As usual the utility is still available in binary for all supported platforms. Likewise, the rest of the source distribution was tested on all of the supported architectures with gcc 2.7.0 or higher. Earlier versions of gcc should still compile the rest of Zebra without any problems.
<BR>
<P><LI>The SunOS 4.1.3 binary distribution has been replaced by SunOS 4.1.3U1 binaries. This may produce "unexpected version" messages from the dynamic linker on 4.1.3 systems, but there should not be any other compatibility problems.
<BR></UL>


<H4><A NAME="HDR3">  1.3  Known Bugs</A></H4>
<P>There are many items on the Zebra task list, but these are just a few which might be helpful to know when using this release.


<UL>
<P><LI>The dsdwidget scrolled list of platform files shows some odd behavior when the list contains several hundred files. The list itself is still correct, however.
<BR></UL>


<P>Real-time installations should take into account the following known problems with file synchronization under concurrent reads and writes:

<UL>
<P><LI>The netCDF library routine ncsync() fails to sync the library buffers with the file on disk, so clients holding a file open will miss changes written by another client. The current workaround forces clients to close and then re-open files which need to be synchronized with changes on the disk. Naturally this is slower and less desirable than sync'ing the open file. A patch does exist for ncsync(); contact RDP if you suspect you need it. Only real-time installations trying to frequently (on the order of seconds) read from files while writing them would have any use for the patch.
<BR>
<P><LI>Linux NFS re-uses the inode of deleted files even while references to the inode are open in other processes. Ordinarily the datastore daemon detects a replaced file by the inode change. but this fails under Linux over NFS filesystems. This is a rare situation, limited only to NFS and not a problem with the native ext2 filesystem.
<BR></UL>


<H3><A NAME="HDR4">  2.  Version 4.1</A></H3>

<HR>
<P>Zebra version 4.1 contains many changes, driven by products like the second STORM-FEST CDROM, the COARE integrated data set, and the ARM and LANTEX projects. The following is a partial list of changes for this release.
<H4><A NAME="HDR5">  2.1  The name change</A></H4>
<P>The original name for the Zebra system was found to have an unfortunate meaning in certain languages and cultures. Rather than potentially offend people, we chose to change the name. The new name is (hopefully) close enough to the old one to be recognizable without having undesired meanings.
<P>For the time being, references to "zeb" still pervade the code and documentation; these will be cleaned up over time.

<H4><A NAME="HDR6">  2.2  New features</A></H4>

<UL>
<P><LI>Partial support for the GRIB file format --- used mostly for model data --- has been added. Not all grid types are currently supported.
<BR>
<P><LI>Partial support for the GRADS file format has been added. Almost all GRADS files should be readable, but Zebra is not able to output data in this format.
<BR>
<P><LI>A new "model widget" has been added which allows a greater degree of time control in displays. When dealing with model data that makes use of multiple data times (i.e. issue, valid, and forecast times), this widget should be used instead of the time widget to control the display time of a graphics window.
<BR>
<P><LI>Zebra has been ported to the Silicon Graphics IRIX 5 operating system.
<BR>
<P><LI>A new widget has been added to allow automatic generation of a series of images in GIF, PostScript or X window dump format.
<BR>
<P><LI>The help system is now able to use Mosaic for the presentation of help system. XHelp is still included in this version of Zebra, but will probably be removed from future distributions.
<BR>
<P><LI>The startzeb and zebstop commands have been renamed to zstart and zstop, respectively.
<BR></UL>


<H4><A NAME="HDR7">  2.3  Internal changes</A></H4>
<P>The following changes are not normally user-visible, but can be seen by people who work with the Zebra data store or configuration files.

<UL>
<P><LI>A new data organization called "nspace" has been added. This organization is designed to model the general, N-dimensional grid structure used by netCDF.
<BR>
<P><LI>A mechanism has been added to encapsulate standard plot description components and their associated user interface code. This code may then be removed from the gp.init file and loaded in only when needed. Look at the description of the require plot description parameter and gp command in the <I>Zebra</I><I> Advanced User's Manual</I>.
<BR>
<P><LI>A platform "class" mechanism has been added to the data store daemon's configuration file. Use of platform classes makes the data store configuration task easier. Refer to the <I><CODE>Zebra</I></CODE><I><CODE></CODE> Advanced User's Manual</I> for more information, and the COARE configurations for examples.
<BR>

<P><LI>The message daemon no longer creates an internet socket unless it is invoked with the "-i" option. This change will only affect users who use inter-host messaging, which is normally only done in real-time installations.
<BR>
<P><LI>Display configurations saved in the display manager now have their associated plot descriptions stored in the same file. The new file has a ".dc" extension, and the associated ".pd" file no longer is saved. The older files for previously-existing configurations will remain on the disk, but are no longer used.
<BR>
<P><LI>An "autoscale" option has been added to many plot types to allow the automatic calculation of plot limits for contouring, color-coding, etc. In all cases, manual scaling is still supported.
<BR></UL>


<H4><A NAME="HDR8">  2.4  Known problems</A></H4>

<UL>
<P><LI>Under Solaris 2, if you stop then immediately restart Zebra, the new invocation may die a quick and graceless death. This behavior results from a bug in the Solaris socket library. The workaround is to wait about 15 seconds before restarting the system.
<BR>
<P><LI>The autoscaling feature can cause scaling to change between frames of a movie, creating results which are possibly deceptive. The workaround for now is to use the "adjust limits" option to disable autoscaling before generating a movie.
<BR>
<P><LI>Autoscaling in time-series plots can produce undesired results when confronted with glitchy data. A bad glitch can expand the range of the data to be plotted by three orders of magnitude, turning the plot into a single, horizontal line. The workaround is to use manual scaling when this occurs.
<BR>
<P><LI>dsmanage incorrectly calculates free space on disks which are larger than about 2GB.
<BR></UL>


<H3><A NAME="HDR9">  3.  Version 4.0</A></H3>

<HR>
<P>Following are some of the major changes which appear in Version 4.0 of Zebra. First, here are the performance and interface changes which affect all Zebra users.

<UL>
<P><LI>The DataStore no longer uses System V shared memory to share information with its client applications. The shared memory has been replaced by messages carried by the Zebra message handler. Consequently, there are no longer any limits on the number of platforms or data files which the data store can support.
<BR>
<P><LI>Zebra has been ported to Sun Solaris 2.3 and to HP 9000 Series 700 machines under HP-UX, version 9.0.
<BR>

<P><LI>Multiple Zebra processes may be run on the same machine simultaneously by setting the environment variable ZEB_SOCKET.
<BR>
<P><LI>OpenWindows 2.0 is no longer supported. OpenWindows 3.0 contains the Athena Widgets library and some bug fixes necessary for Zebra to compile with the OpenWindows libraries and work properly with the OpenWindows server.
<BR>
<P><LI>The Zebra software distribution now uses the Imake system to configure all of the Makeiles in its directory hierarchy. Zebra's makefiles are now more flexible and portable to various operating systems.
<BR>
<P><LI>A new utility has been added, dsmanage, which facilitates the movement of data files between local disk space and an external archive medium, such as Exabyte tape or CD-ROM. The dsmanage utility must be compiled with a C++ compiler.
<BR>
<P><LI>The documentation set has been expanded. Most noteworthy is the <I>Zebra</I><I> Advanced User's Manual</I>, which describes all of the processes in the Zebra user interface and provides details on the operation of each one.
<BR>
<P><LI>Graphics displays have a powerful new channel for user control called <I>active areas</I>. For example, active areas allow platforms to be selected and configured by clicking the mouse on the platform's location symbol in a constant-altitude plot.
<BR>
<P><LI>Vertical cross-sections can now plot winds overlays.
<BR>
<P><LI>Contours and color-coded aircraft tracks can be automatically scaled when desired.
<BR>
<P><LI>Lastly, of course, there have been the requisite numerous bug fixes and performance enhancements.
<BR></UL>


<P>There has also been a significant change to the application programming interface. The DataStore now uses a more encapsulated and modularized data structure, called the DataChunk, for passing various classes and organizations of data. DataChunks support all of the data originally supported by data objects, as well as field data of types other than float, and various levels of attributes.
<P>The most recent non-source release of Zebra is the StormFEST CD-ROM three-volume set. The CD-ROM set includes executables for Zebra and WINDS, a full Zebra configuration for StormFEST, and data for dozens of platforms for each of the Intensive Observing Periods. For information about acquiring the CD-ROM set, contact one of the persons listed in the "Whom to Contact" section of the <I>Installation Manual</I>.

<H3><A NAME="HDR10">  4.  Supported systems</A></H3>

<HR>
<P>The Zebra system is supported on Sun systems under both Solaris and SunOS, HP 700-series systems, Silicon Graphics systems under IRIX 5, and Intel-based systems running the Linux operating system. Since we are unable to keep numerous systems around with different hardware and software configurations, support tends to be limited to a small subset thereof. The following sections give details of the port to each system and hints, when necessary, for building and running Zebra on those systems. The instructions in the <I>Installation Manual</I> and the machine notes in its appendix contain more information.
<H4><A NAME="HDR11">  4.1  SunOS</A></H4>
<P>Much of the development for Zebra is done under SunOS 4.1.3, so there should not be much in the way of port-related difficulties. Supported compilers are gcc, the bundled Sun compiler (cc) and Sun's unbundled ANSI compiler (acc). The dsmanage utility will not build under Sun's C++ compiler at this time. MIT X11R5, MIT X11R6, and OpenWindows 3 are supported. No attempt has been made to compile Zebra under earlier versions of SunOS for a long time, but any system after 4.1 should work.
<H4><A NAME="HDR12">  4.2  Solaris</A></H4>
<P>Zebra builds and runs under Solaris versions 2.2 through 2.4. Either gcc or Sun's unbundled compiler may be used, though dsmanage will not build under Sun's C++ compiler. Open Windows 3, MIT X11R5, and MIT X11R6 are all supported.
<P>Some hints for building under Solaris:

<UL>
<P><LI>When using cc, be sure that the unbundled compiler directory (usually something like /opt/SUNWspro/SC2.0.1) precedes the directory /usr/ucb in your PATH. Using /usr/ucb/cc can cause strange compile and link problems.
<BR>
<P><LI>Be sure to put BOOTSTRAPCFLAGS=-DSVR4 on your make World command or Zebra will not build properly. <B>Note</B> the change from previous versions, which required -Dsolaris instead.
<BR>
<P><LI>The Sun C compiler generates unbelievable numbers of warnings while compiling Zebra, many of which are incomprehensible. Ignore them. In version 4.2, these warnings have been much reduced, if not completely eliminated.
<BR>

<P><LI>If you are building under MIT X, and your X libraries are not in /usr/lib, then the Imake configuration will automatically include a R <I>runpath</I> link option on the compiler command line. The -R option causes the given <I>runpath</I> to be inserted into the binaries you build, avoiding a whole series of "library not found" problems when programs are executed later. If you see such errors, the R option is not being passed or is being specified incorrectly. If the R flag is not present on the command line, then the environment variable LD_RUN_PATH takes effect. If necessary, you can explicitly set LD_RUN_PATH to point to the directory containing the X libraries, but R takes precedence when present. 
<BR></UL>


<P>Solaris places some pretty strict limits on shared memory usage by default. Since Zebra makes heavy use of shared memory --- especially when movies are being run --- it is easy to run afoul of those limits. The symptom is windows that die and refuse to come back, especially immediately after display configuration changes.
<P>The solution is to raise the shared memory limits. To do this, you must (as superuser) edit the file /etc/system, adding the following lines:
<PRE>
set shmsys:shminfo_shmmax=1024000
set shmsys:shminfo_shmseg=32
</PRE>
<P>The system must be rebooted for the change to take effect.
<H4><A NAME="HDR13">  4.3  HP-UX</A></H4>
<P>Zebra has been ported to an HP 715/33 running HPUX 9.01. Both the system C compiler and gcc are supported; the HP compiler should not be used in the ANSI mode, however. HP's window system does not support the MIT Athena Widget set (Xaw), which is a required component of Zebra's user interface. They do provide Xaw on the contributed software CDROM, however; see the installation instructions for details.
<H4><A NAME="HDR14">  4.4  IRIX</A></H4>
<P>As of version 4.1, Zebra runs on a Silicon Graphics Indy system running Irix version 5. 
<H4><A NAME="REF33122">  4.5  Linux</A></H4>

<P>Zebra 4.2 runs under almost any version of linux after 1.1 through 1.2.8, building with gcc and the (beta) GNU Fortran compiler g77. This port should be considered to be a beta-test version. Some things to keep in mind with this port:

<UL>
<P><LI>Ingest modules have not been tested at all, and should not be expected to work.
<BR>
<P><LI>The GRIB file format is not currently supported. NetCDF, GRADS, and the raster format work normally. The Zebra native format works, but files are not interchangable with big-endian systems.
<BR>
<P><LI>Inter-host communications will not work between big-endian and little-endian machines.
<BR>
<P><LI>Data store cache files will not work between big-endian and little-endian machines.
<BR></UL>


<P>No ports to other Intel-based operating systems are currently planned. Porting to nonmultitasking systems (i.e. DOS, Windows) is not feasable. Ports to other Intel-based Unix systems should be relatively easy, should somebody wish to undertake them.
<H3><A NAME="REF49868">  5.  Project configurations</A></H3>

<HR>
<P>Version 4.2 of Zebra includes configurations for the following projects:

<UL>
<P><LI>CaPE, the Cape Electrification and Precipitation Experiment
<BR>
<P><LI>StormFEST, Storm-scale meteorology, Fronts Experiment Systems Test
<BR>
<P><LI>TOGA-COARE, Tropical Ocean Global Atmosphere --- Coupled Ocean Atmosphere Research Experiment
<BR>
<P><LI>TRMM, Tropical Rainfall Measurement Mission
<BR></UL>


<P>All of the configuration directories have been modified to some extent --- some greatly. A brief discussion follows on the changes to each project. Note that there are, to our knowledge, no incompatible changes to Zebra, meaning that any old sets of project configurations may still be used. Many of the new features of Zebra will not be available when operating in that mode, however.
<H4><A NAME="HDR15">  5.1  CaPE configurations</A></H4>

<P>The configurations for CaPE have been rewritten almost from the ground up and are, as of this writing, still under some construction. All of the various real-time oriented display configurations ("ops director", "nowcaster") have been eliminated and replaced with a very simple set of sample displays. It has gotten easy enough for users to develop and save their own configurations that we have not felt the need to create a comprehensive set of prepackaged displays.
<H4><A NAME="HDR16">  5.2  STORM-FEST</A></H4>
<P>The STORM-FEST configurations have been augmented to support the second CDROM set, which features model data.
<H4><A NAME="HDR17">  5.3  COARE</A></H4>
<P>The COARE configurations have seen extensive work in support of the COARE data workshop in August, 1994. A large set of predefined configurations exists which may be used with the full COARE Integrated Data Set. A set of demo data which may be used with these configurations may be found with the Zebra release.
<H4><A NAME="HDR18">  5.4  TRMM</A></H4>
<P>The TRMM project configuration was put together as a preliminary demonstration of Zebra's capabilities for data intercomparisons for TRMM program satellite ground truth. The following datasets are currently supported:

<UL>
<P><LI>gridded Darwin radar
<BR>
<P><LI>Darwin sounding
<BR>
<P><LI>raingauge network
<BR>
<P><LI>GMS satellite (10 km resolution for the vicinity of Darwin and 22 km resolution covering Australia)
<BR>
<P><LI>SSMI satellite
<BR></UL>


<P>Three predefined display configurations are included as part of the TRMM package:
<P><B>Cross-section: </B>The cross-section display configuration is comprised of two graphics windows. The upper one is a horizontal display of satellite imagery overlaid with contours of radar data and a map. The lower window displays contours of a vertical cross-section through the radar data. The interface is set up so the user can draw a line in the upper window, using the middle mouse button, which then defines the endpoints for the vertical cross-section in the other window. In this way, it is simple for the user to quickly and arbitrarily slice through the radar data.

<P><B>Time series:</B> The time series display configuration provides a small window showing raingauge station locations and a larger window in which the user can easily display time series rainfall data from any of the stations of the network. The time series window comes up empty initially; stations to be displayed may be chosen from the station location window by using the left mouse button to bring up the menu under each station and selecting "Display in other window." The cross-hair cursor which comes up should then be moved into the time series window and the left mouse button clicked to add the chosen station to the display.
<P><B>Three window:</B> The three window display configuration is a combination of the other two configurations. Three windows are displayed: a horizontal display, a vertical cross section, and a time series display. The endpoints for the vertical cross section and stations displayed in the time series can be controlled from the horizontal display as in the previous two configurations.

<A NAME="ENDFILE"><PRE> </PRE></A>

