! $Id: gp.widgets,v 1.2 1994-12-12 20:49:11 burghart Exp $
!
! The STORM-FEST graphics process initialization file.
!

!read in new aircraft widget
!
	read Additional.widgets

!
! Change the endpoints for an associated (presumably cross-section) window.
! We force ourselves to update (by issuing a parameter command but not actually
! changing anything) so that we'll be current if we're displaying the bounds
! of the cross-section window.
!
procedure ChangeXSect
	drawline sendendpoints

	local ptype PDParam('global', 'plot-type')
	parameter global plot-type #ptype
endprocedure

!
! Control the spacing of a grid.  Assumes that x and y are equal.
!
define widget grid_spacing intmenu 'grid spacing'
	title 'Cartesian grid parameters'
	line
	entry '10 km or minute lines' 'GridSpacing "10"' \
		(pd_param (icon_component,"x-spacing","string") = "10")
!	entry '20 km or minute lines' 'GridSpacing "20"' \
!		(pd_param (icon_component,"x-spacing","string") = "20")
!	entry '50 km or minute lines' 'GridSpacing "50"' \
!		(pd_param (icon_component,"x-spacing","string") = "50")
	entry '60 km or 1 deg. lines' 'GridSpacing "60"' \
		(pd_param (icon_component,"x-spacing","string") = "60")
	entry '600 km' 'GridSpacing "600"' \
		(pd_param (icon_component,"x-spacing","string") = "600")
	line
	entry 'Latitude/Longitude grid' 'param #icon_component lat-lon true' \
		(pd_param (icon_component, "lat-lon", "string") = "true")
	entry 'Kilometer grid' 'param #icon_component lat-lon false' \
		(pd_param (icon_component, "lat-lon", "string") = "false")
	line
	submenu 'Change origin (km grid only)' CGridOrigin
	entry 'Solid grid lines' 'ToggleBoolean "solid"' \
		(pd_param (icon_component, "solid", "string") = "true")
endmenu

!
! Change the origin of an cartesian grid
!
define widget CGridOrigin intmenu 'cart grid origin'
	title 'Cartesian grid origin'
	line
	entry 'MHR' 'parameter #icon_component origin mhr'
	entry 'CP3' 'parameter #icon_component origin cp3'
	entry 'CP4' 'parameter #icon_component origin cp4'
	entry 'OKC' 'parameter #icon_component origin okc'
	entry 'FDR' 'parameter #icon_component origin fdr'
	entry 'CIM' 'parameter #icon_component origin cim'
	entry 'HOT' 'parameter #icon_component origin hot'
	entry 'CHILL' 'parameter #icon_component origin chill'
endmenu

!
! Tweak grid spacing.  We enforce equal X and Y spacing.
!
procedure GridSpacing spacing string
	parameter #icon_component x-spacing #spacing
	parameter #icon_component y-spacing #spacing
endprocedure

!
! Menus for boundaries
!
define widget bdry-right intmenu 'boundary right menu'
	title 'Boundary Options'
	line
	submenu 'Line Width' LineWidth
	submenu 'Labels' LabelOnOff
endmenu

!
! A better boundary control widget.
!
define widget boundary-control intmenu 'stuff'
	title 'Boundary/plan options'
	line
	submenu 'Line Width' LineWidth
	entry 'Label' 'ToggleLabels' \
		(PDParam(icon_component, "label") <> "none")
	line
	entry 'Redraw' 'RedrawBoundary'
endmenu

procedure RedrawBoundary
	local plat concat('l_',pd_param (icon_component, "platform", "string"))
	polyline #plat
endprocedure

procedure ToggleLabels
	local enabled (PDParam(icon_component, "label") <> "none")
	if (enabled)
		parameter #icon_component label 'none'
	else
		parameter #icon_component label 'platform'
	endif
endprocedure

!
! Scales.
!
define widget ScaleMenu intmenu 'scales'
	title 'Scales'
	line
	entry 'CP4 Scale' 'DoZoom -150 150 -150 150'
	entry 'Missouri Scale' 'DoZoom -100 600 -500 200'
	entry 'Midwest Scale' 'DoZoom -800 700 -500 200'
	entry 'US Scale' 'DoZoom -3000 2500 -2300 1800'
endmenu

!
! Turn labels on and off.
!
define widget LabelOnOff intmenu "labels on/off"
	title 'Labels'
	line
	entry 'On' 'turnlabelon' \
		(PDParam(icon_component, "label") <> "none")
	entry 'Off' 'parameter #icon_component label none' \
		(PDParam(icon_component, "label") = "none")
endmenu

procedure turnlabelon
	local worked pd_removeparam(icon_component, "label")
endprocedure

!
! The default left button menu.
!
define widget leftmenu intmenu "leftmenu"
	title 'Overlay Operations'
	line
	entry 'Adjust Limits' 'i_adjust limit-proc'
	entry 'Spatial offset options' 'require offsets; popup offsets'
	line
	entry 'Raise to top' 'move #icon_component 0'
	entry 'Move to bottom' 'move #icon_component 1'
	entry 'Disable/reenable' 'ToggleBoolean "disable"'
	entry 'Remove' 'i_remove_component'
endmenu

!
!default left menu for surface station plots
!
define widget left-station intmenu "leftmenu"
	title 'Overlay Operations'
	line
	entry 'Adjust Limits' 'i_adjust limit-proc'
	entry 'Spatial Offset options' 'require offsets; popup offsets'
	entry 'Spatial Filter options' 'popup Spacefilter'
	line
	entry 'Raise to top' 'move #icon_component 0'
	entry 'Move to bottom' 'move #icon_component 1'
	entry 'Disable/reenable' 'ToggleBoolean "disable"'
	entry 'Remove' 'i_remove_component'
endmenu

!
! The default left button for surface interpolated data
!
define widget meso-left-options intmenu "leftmenu"
	title 'Overlay Operations'
	line
	entry 'Adjust Limits' 'i_adjust limit-proc'
	entry 'Spatial offset options' 'require offsets; popup offsets'
	entry 'Adjust Interpolation' 'require interp; popup InterpParams'
	line
	entry 'Raise to top' 'move #icon_component 0'
	entry 'Move to bottom' 'move #icon_component 1'
	entry 'Disable/reenable' 'ToggleBoolean "disable"'
	entry 'Remove' 'i_remove_component'
endmenu



!
! Aircraft fields.
!
define widget airfield intmenu 'airfield'
	title "Aircraft Color Code Fields"
	line
	entry 'Adjust Track Parameters' 'popup tr-adjust'
	line
	entry 'Show Plane?' 'toggle_bool "show-position" "true"' \
		(pd_param (icon_component, "show-position", "string") = "true") 
endmenu
!
define widget tr-adjust-middle intmenu 'airfield-storm2'
	title "Aircraft Color Code Fields"
	line
	entry 'Adjust Track Parameters' 'popup tr-adjust'
	line
	entry 'Show Plane?' 'toggle_bool "show-position" "true"' \
		(pd_param (icon_component, "show-position", "string") = "true") 
endmenu

!
!  Middle icon button for P3 aircraft tracks
!
define widget p3-aircraft-menu intmenu "P-3 Aircraft Menu"
	title "P-3 Aircaft Color Code Fields"
	line
	entry 'Adjust Track Parameters' 'popup tr-adjust'
	line
	entry 'Show Plane?' 'toggle_bool "show-position" "true"' \
		(PDParam (icon_component, "show-position") = "true") 
endmenu

!
! Aircraft right menu.
!
define widget Aircraft-right intmenu 'Aircraft right menu'
	title 'Aircraft Menu'
	line
	submenu 'Track Color' 'simple-color'
	line
	submenu 'Line Width' 'LineWidth'
endmenu

!
!The dual-Doppler middle button menu.
!
define widget ddop-middle intmenu 'ddop-middle'
	title 'Dual-Doppler Analysis'
	line
	entry 'Divergence contours' 'fldset "div"'
	entry 'Vertical Velocity contours' 'fldset "w_wind"'
	entry 'Cp4 interpolated reflectivity' 'fldset "ref_cp4"'
	entry 'Cp3 interpolated reflectivity' 'fldset "ref_cp3"'
endmenu

!
! The Dual Doppler left button menu.
!
define widget ddop-left intmenu 'ddop-left'
	title 'Overlay Operations'
	line
	entry 'Adjust Limits' 'i_adjust limit-proc'
	line
	entry 'Raise to top' 'move #icon_component 0'
	entry 'Move to bottom' 'move #icon_component 1'
	entry 'Disable/reenable' 'toggle_bool "disable" "true"'
	entry 'Remove' 'i_remove_ddop'
endmenu

procedure i_remove_ddop
	local dm_cmd concat("parameter ", ourname)
	dm concat(concat(dm_cmd, " "), "global radar-space true")
	local dm_cmd concat("remove ",ourname)
	dm concat(concat (dm_cmd, " "), icon_component)
endprocedure

!
! The tseries left button menu.
!
define widget tseries-left intmenu 'TSeries Left'
	title 'Overlay Operations'
	line
	submenu 'Adjust Limits' 'adjust-tseries-limits'
	line
	entry 'Raise to top' 'move #icon_component 0'
	entry 'Move to bottom' 'move #icon_component 1'
	entry 'Remove' 'i_remove_component'
endmenu

!
! The xy-wind left button menu.
!
define widget xywind-left intmenu 'XY-Wind Left'
	title 'Overlay Operations'
	line
	submenu 'Adjust Limits' 'adjust-xywind-limits'
endmenu

!
! The xy-timegraph left button menu.
!
define widget xytimegraph-left intmenu 'XY-Time Graph Left'
	title 'Overlay Operations'
	line
	submenu 'Adjust Limits' 'adjust-xytimegraph-limits'
	line
	entry 'Raise to top' 'move #icon_component 0'
	entry 'Move to bottom' 'move #icon_component 1'
	entry 'Disable/reenable' 'toggle_bool "disable" "true"'
	entry 'Remove' 'i_remove_component'
endmenu

!
! The xy-graph left button menu.
!
define widget xygraph-left intmenu 'XY-Graph Left'
	title 'Overlay Operations'
	line
	submenu 'Adjust Limits' 'adjust-xygraph-limits'
	line
	entry 'Raise to top' 'move #icon_component 0'
	entry 'Move to bottom' 'move #icon_component 1'
	entry 'Disable/reenable' 'toggle_bool "disable" "true"'
	entry 'Remove' 'i_remove_component'
endmenu

!
! The track left button menu.
!
define widget track-left intmenu 'Track Left'
	title 'Overlay Operations'
	line
	submenu 'Adjust Limits' 'adjust-track-limits'
	entry 'Spatial offset options' 'require offsets; popup offsets'
	entry 'Adjust Track Parameters' 'popup tr-adjust'
	line
	entry 'Raise to top' 'move #icon_component 0'
	entry 'Move to bottom' 'move #icon_component 1'
	entry 'Disable/reenable' 'toggle_bool "disable" "true"'
	entry 'Remove' 'i_remove_component'
endmenu

!
! The raster left button menu.
!
define widget raster-left intmenu 'Raster Left'
	title 'Overlay Operations'
	line
	submenu 'Adjust Limits' 'adjust-raster-limits'
	line
	entry 'Raise to top' 'move #icon_component 0'
	entry 'Move to bottom' 'move #icon_component 1'
	entry 'Disable/reenable' 'toggle_bool "disable" "true"'
	entry 'Remove' 'i_remove_component'
endmenu

!
! The Raster Plot Adjust Limits submenu
!
define widget adjust-raster-limits intmenu 'Adjust Limits'
	title 'Adjust Limits'
	line
	entry 'Center/Step' 'i_adjust centstep-limit-proc'
	entry 'Highlight/Range' 'i_adjust highrange-limit-proc'
endmenu
!
! The Vector Plot Adjust Limits submenu
!
define widget adjust-vector-limits intmenu 'Adjust Limits'
	title 'Adjust Limits'
	line
	entry 'Arrow Scale' 'i_adjust vector-limit-proc'
	entry 'Spatial Filter Scale' 'i_adjust vector-filter-limit-proc'
endmenu

!
! The Track Adjust Limits submenu
!
define widget adjust-track-limits intmenu 'Adjust Limits'
	title 'Adjust Limits'
	line
	entry 'Time Period' 'i_adjust time-limit-proc'
	entry 'Center/Step' 'i_adjust centstep-limit-proc'
endmenu

!
! The Skewt Adjust Limits submenu
!
define widget adjust-skewt-limits intmenu 'Adjust Limits'
	title 'Adjust Limits'
	line
	entry 'Pressure' 'i_adjust pres-limit-proc'
	entry 'Temperature' 'i_adjust temp-limit-proc'
endmenu

!
! The Skew-t left button menu.
!
define widget skewt-left intmenu 'Skewt left'
	title 'Overlay Operations'
	line
	submenu 'Adjust Limits' 'adjust-skewt-limits'
	entry 'Choose Sounding Sites' 'popup SoundingSites'
	line
	entry 'Raise to top' 'move #icon_component 0'
	entry 'Move to bottom' 'move #icon_component 1'
	entry 'Remove' 'i_remove_component'
endmenu

!
! The Time Series Adjust Limits submenu
!
define widget adjust-tseries-limits intmenu 'Adjust Limits'
	title 'Adjust Limits'
	line
	entry 'Time Interval' 'i_adjust time-limit-proc'
	entry 'Left Axis' 'i_adjust left-limit-proc'
	entry 'Right Axis' 'i_adjust right-limit-proc'
	entry 'Number of Steps' 'i_adjust nstep-limit-proc'
	entry 'Data Skip' 'i_adjust dskip-limit-proc'
endmenu

!
! The XYWind Adjust Limits submenu
!
define widget adjust-xywind-limits intmenu 'Adjust Limits'
	title 'Adjust Limits'
	line
	entry 'Time Interval' 'i_adjust time-limit-proc'
endmenu

!
! The XYGraph (time series) Adjust Limits submenu
!
define widget adjust-xytimegraph-limits intmenu 'Adjust Limits'
	title 'Adjust Limits'
	line
	entry 'Time Interval' 'i_adjust time-limit-proc'
!	entry 'Min/Max' 'adjust_scale adj-scale-dim'
	entry 'Y Axis' 'popup yminmax'
	entry 'Tic Interval' 'adjust_tic'
endmenu


!
! The XYGraph Adjust Limits submenu
!
define widget adjust-xygraph-limits intmenu 'Adjust Limits'
	title 'Adjust Limits'
	line
	entry 'Time Interval' 'i_adjust time-limit-proc'
	entry 'X Axis' 'popup xminmax'
	entry 'Tic Interval' 'adjust_tic'
endmenu



!
! A "simulated" doublefloat limit widget which also controls auto vs. manual
! scaling
!
define widget xminmax form "Scale X Axis"

	popup "xyminmax_popup 'x'"
	noheader
!	label t1 "Scale X Axis  "
!	newline
	label lmin "lmin" width 150
	blank vmin "vmin" width 90
	newline
	label lmax "lmax" width 150
	blank vmax "vmax" width 90
	newline
	label lmode "Scale mode:" width 150
	button vmode "vmode" command 'xyminmax_toggle_mode "x"' width 90
	newline
	button help "Help" command 'help limitwidgets'
	button store "Store" command 'xyminmax_store "x"' color green4
	button cancel "Cancel" command 'popdown #ui$form' color red
	label comp "comp" color gray95 width 1

enddef


!
! A "simulated" doublefloat limit widget which also controls auto vs. manual
! scaling
!
define widget yminmax form "Scale Y Axis"

	popup "xyminmax_popup 'y'"
	noheader
!	label t1 "Scale Y Axis  "
!	newline
	label lmin "lmin" width 150
	blank vmin "vmin" width 90
	newline
	label lmax "lmax" width 150
	blank vmax "vmax" width 90
	newline
	label lmode "Scale mode:" width 150
	button vmode "vmode" command 'xyminmax_toggle_mode "y"' width 90
	newline
	button help "Help" command 'help limitwidgets'
	button store "Store" command 'xyminmax_store "y"' color green4
	button cancel "Cancel" command 'popdown #ui$form' color red
	label comp "comp" color gray95 width 1

enddef


procedure xyminmax_store axis string
!
! Knowing our axis, we can set the min and max for the axis according to
! the value of the vmin and vmax blanks.
!
	local pmax concat(concat("scale-",axis),"-max")
	local pmin concat(concat("scale-",axis),"-min")
	local pmode concat(concat("scale-",axis),"-mode")
	local comp getftext(ui$form,'comp')
	local max_val getftext(ui$form,'vmax')
	local min_val getftext(ui$form,'vmin')

	parameter #comp #pmax #max_val
	parameter #comp #pmin #min_val
!
! Make sure we're in manual scale mode, if so keep things as is
!
	if (pd_paramsearch(comp,pmode,"xy","string") = "autoscale")
	!
	! Not in manual, so make changes
	!
		parameter #comp #pmode "manual"
		formtext #ui$form 'vmode' 'manual'
	endif

endprocedure


procedure xyminmax_toggle_mode axis string
!
! Knowing our axis, toggle the scale mode for that axis
!
	local pmode concat(concat("scale-",axis),"-mode")
	local comp getftext(ui$form,'comp')

	if (pd_paramsearch(comp,pmode,"xy","string") = "autoscale")
		parameter #comp #pmode "manual"
		formtext #ui$form 'vmode' 'manual'
	else
		parameter #comp #pmode "autoscale"
		formtext #ui$form 'vmode' 'autoscale'
	endif

endprocedure



procedure xyminmax_popup axis string
!
! Get the field name associated with the axis.
!
	local qual pd_param(icon_component,concat(axis,"-field"),"string")
!
! Get the current min value, first from manual scale, else from current
! autoscale settings
!	
	local smin concat3("scale-",axis,"-min")
	local min pd_paramsearch(icon_component,smin,qual,"string")
	if (min = '(Undefined)')
		local min pd_paramsearch(icon_component,concat("auto-",smin),qual,"string")
	endif
!
! Get the current max value.
!
	local smax concat3("scale-",axis,"-max")
	local max pd_paramsearch(icon_component,smax,qual,"string")
	if (max = '(Undefined)')
		local max pd_paramsearch(icon_component,concat("auto-",smax),qual,"string")
	endif
!
! Get the current scale mode
!
	local sm_param concat3("scale-",axis,"-mode")
	local scale_mode pd_paramsearch(icon_component,sm_param,"xy","string")
!
! Create some labels
!
	local fmin concat(qual,"-min:")
	local fmax concat(qual,"-max:")
!
! Setup the widget.
!		
	formtext #ui$form lmin #fmin
	formtext #ui$form lmax #fmax
	formtext #ui$form vmin #min
	formtext #ui$form vmax #max
	formtext #ui$form vmode #scale_mode
	formtext #ui$form comp #icon_component

endprocedure


!
!Procedure for defining tic-mark intervals
!
procedure adjust_tic
!
! Get the current tic interval.
!	
	local axis pd_param(icon_component,"adj-axis-side","string")
	local tic_param concat3("axis-",axis,"-tic-interval")
	local tic pd_param(icon_component,tic_param,"string")
!
!activate widget	
!
	activate SingleFloat #icon_component #tic_param "tic-interval" #tic
endprocedure



!
!Middle icon button menu for composite surface data
!
define widget surface-winds-mid intmenu 'Field Control Popup'
	title 'Surface Station Labels'
	line
	entry 'Change Fields' 'popup fieldquads'
	entry 'Help' 'help fieldquads'
	entry 'List Weather Codes' 'dm "help weather_codes fest_codes"'
endmenu
define widget surface-winds-mid-old intmenu 'Field control popup'
	title 'Surface Composite Fields'
	line
	entry 'Station ID' 'toggle_quad station' (substring(pd_param(icon_component, "quadrants", "string"),"station"))
	entry 'Station Pressure mb' 'toggle_quad pres' (substring(pd_param(icon_component, "quadrants", "string"),"pres"))
	entry 'Reported Sea-Level Pressure mb' 'toggle_quad cpres0' (substring(pd_param(icon_component, "quadrants", "string"), "cpres0"))
	entry 'Calculated Sea-Level Pressure mb' 'toggle_quad computed_sea_lev_pres' (substring(pd_param(icon_component, "quadrants", "string"),"computed_sea_lev_pres"))
	entry 'Temperature C' 'toggle_quad tdry' (substring(pd_param(icon_component, "quadrants", "string"),"tdry"))
	entry 'Dewpoint Temperature C' 'toggle_quad dp' (substring(pd_param(icon_component, "quadrants", "string"),"dp"))
	entry 'Wind Speed m/s' 'toggle_quad wspd' (substring(pd_param(icon_component, "quadrants", "string"),"wspd"))
	entry 'Wind Direction deg' 'toggle_quad wdir' (substring(pd_param(icon_component, "quadrants", "string"),"wdir"))
	entry 'Wind Maximum m/s' 'toggle_quad wmax' (substring(pd_param(icon_component, "quadrants", "string"),"wmax"))
	entry 'Rain kg/m2' 'toggle_quad rain' (substring(pd_param(icon_component, "quadrants", "string"),"rain"))
	entry 'Weather Code' 'toggle_quad weather_code' (substring(pd_param(icon_component, "quadrants", "string"),"weather_code"))
	entry 'Horizontal Visability m' 'toggle_quad horiz_vis' (substring(pd_param(icon_component, "quadrants", "string"),"horiz_vis"))
	entry 'Ceiling Height (first layer) feet' 'toggle_quad ceiling_height' (substring(pd_param(icon_component, "quadrants", "string"),"ceiling_height"))
	entry 'Ceiling Flag (first layer)' 'toggle_quad ceiling_flag' (substring(pd_param(icon_component, "quadrants", "string"),"ceiling_flag"))
	entry 'Cloud Amount (first layer)' 'toggle_quad cloud_amt' (substring(pd_param(icon_component, "quadrants", "string"),"cloud_amt"))
	entry 'Ceiling Height (second layer) feet' 'toggle_quad ceiling_height2' (substring(pd_param(icon_component, "quadrants", "string"),"ceiling_height2"))
	entry 'Ceiling Flag (second layer)' 'toggle_quad ceiling_flag2' (substring(pd_param(icon_component, "quadrants", "string"),"ceiling_flag2"))
	entry 'Cloud Amount (second layer)' 'toggle_quad cloud_amt2' (substring(pd_param(icon_component, "quadrants", "string"),"cloud_amt2"))
	entry 'Ceiling Height (third layer) feet' 'toggle_quad ceiling_height3' (substring(pd_param(icon_component, "quadrants", "string"),"ceiling_height3"))
	entry 'Ceiling Flag (third layer)' 'toggle_quad ceiling_flag3' (substring(pd_param(icon_component, "quadrants", "string"),"ceiling_flag3"))
	entry 'Cloud Amount (third layer)' 'toggle_quad cloud_amt3' (substring(pd_param(icon_component, "quadrants", "string"),"cloud_amt3"))
	entry 'East Wind Component m/s' 'toggle_quad u_wind' (substring(pd_param(icon_component, "quadrants", "string"),"u_wind"))
	entry 'North Wind Component m/s' 'toggle_quad v_wind' (substring(pd_param(icon_component, "quadrants", "string"),"v_wind"))
	entry 'Station Altitude km' 'toggle_quad alt' (substring(pd_param(icon_component, "quadrants", "string"),"alt"))
endmenu



!
! Middle icon button menu for Mesonet.
!
define widget surface-middle intmenu 'Field control popup'
	title 'Surface  Mesonet Contour Fields'
	line
	entry 'Station Pressure mb'  'param #icon_component field pres'\
	   (substring(pd_param(icon_component, "field", "string"),"pres"))
	entry 'Reported Sea-level Pressure mb' 'param #icon_component field cpres0'\
	   (substring(pd_param(icon_component, "field", "string"),"cpres0"))
	entry 'Calculated Sea-levelPressure mb' 'param #icon_component field computed_Sea_level_Pressure'\
	   (substring(pd_param(icon_component, "field", "string"),"computed_Sea_level_Pressure"))
	entry 'Temperature C' 'param #icon_component field tdry'\
	   (substring(pd_param(icon_component, "field", "string"),"tdry"))
	entry 'Dew Point C' 'param #icon_component field dp'\
	   (substring(pd_param(icon_component, "field", "string"),"dp"))
	entry 'Wind Speed' 'param #icon_component field wspd'\
	   (substring(pd_param(icon_component, "field", "string"),"wspd"))
	entry 'Wind Direction' 'param #icon_component field wdir'\
	   (substring(pd_param(icon_component, "field", "string"),"wdir"))
	entry 'Wind Maximum m/s' 'param #icon_component field wmax'\
	   (substring(pd_param(icon_component, "field", "string"),"wmax"))
	entry 'Rain kg/m2' 'param #icon_component field rain'\
	   (substring(pd_param(icon_component, "field", "string"),"rain"))
	entry 'Weather Code' 'param #icon_component field weather_code'\
	   (substring(pd_param(icon_component, "field", "string"),"weather_code"))
	entry 'Horizontal Visability m' 'param #icon_component field horiz-vis'\
	   (substring(pd_param(icon_component, "field", "string"),"horiz-vis"))
	entry 'Ceiling Height (first layer) feet' 'param #icon_component field ceiling_height'\
	   (substring(pd_param(icon_component, "field", "string"),"ceiling_height"))
	entry 'Ceiling Flag (first layer)' 'param #icon_component field ceiling_flag'\
	   (substring(pd_param(icon_component, "field", "string"),"ceiling_flag"))
	entry 'Cloud Amount (first layer)' 'param #icon_component field cloud_amt'\
	   (substring(pd_param(icon_component, "field", "string"),"cloud_amt"))
	entry 'Ceiling Height (second layer) feet' 'param #icon_component field ceiling_height2'\
	   (substring(pd_param(icon_component, "field", "string"),"ceiling_height2"))
	entry 'Ceiling Flag (second layer)' 'param #icon_component field ceiling_flag2'\
	   (substring(pd_param(icon_component, "field", "string"),"ceiling_flag2"))
	entry 'Cloud Amount (second layer)' 'param #icon_component field cloud_amt2'\
	   (substring(pd_param(icon_component, "field", "string"),"cloud_amt2"))
	entry 'Ceiling Height (third layer) feet' 'param #icon_component field ceiling_height3'\
	   (substring(pd_param(icon_component, "field", "string"),"ceiling_height3"))
	entry 'Ceiling Flag (third layer)' 'param #icon_component field ceiling_flag3'\
	   (substring(pd_param(icon_component, "field", "string"),"ceiling_flag3"))
	entry 'Cloud Amount (third layer)' 'param #icon_component field cloud_amt3'\
	   (substring(pd_param(icon_component, "field", "string"),"cloud_amt3"))
	entry 'East Wind Component m/s' 'param #icon_component field u_wind'\
	   (substring(pd_param(icon_component, "field", "string"),"u_wind"))
	entry 'West Wind Component m/s' 'param #icon_component field v_wind'\
	   (substring(pd_param(icon_component, "field", "string"),"v_wind"))
	entry 'Station Altitude km' 'param #icon_component field alt'\
	   (substring(pd_param(icon_component, "field", "string"),"alt"))
	endmenu

!
! The Time Series Adjust Limits submenu
!
define widget adjust-tseries-limits intmenu 'Adjust Limits'
	title 'Adjust Limits'
	line
	entry 'Time Interval' 'i_adjust time-limit-proc'
	entry 'Left Axis' 'i_adjust left-limit-proc'
	entry 'Right Axis' 'i_adjust right-limit-proc'
	entry 'Number of Steps' 'i_adjust nstep-limit-proc'
	entry 'Data Skip' 'i_adjust dskip-limit-proc'
endmenu

!
! Middle icon button menu for station plots.
!
define widget meso-winds-mid intmenu 'Field control popup'
	title 'PAM Mesonet Winds Fields'
	line
	entry 'Temperature' 'toggle_quad tdry' \
	   (substring(pd_param(icon_component, "quadrants", "string"),"tdry"))
	entry 'Dewpoint Temperature' 'toggle_quad dp' \
	   (substring(pd_param(icon_component, "quadrants", "string"),"dp"))
	entry 'Relative Humidity' 'toggle_quad rh' \
	   (substring(pd_param(icon_component, "quadrants", "string"),"rh"))
	entry 'Raw Pressure' 'toggle_quad pres' \
	   (substring(pd_param(icon_component, "quadrants", "string"),"pres"))
	entry 'Corrected Pressure' 'toggle_quad cpres0' \
	   (substring(pd_param(icon_component, "quadrants", "string"),"cpres0"))
	entry 'Mixing Ratio' 'toggle_quad mr' \
	   (substring(pd_param(icon_component, "quadrants", "string"),"mr"))
	entry 'Potential Temperature' 'toggle_quad pt' \
	   (substring(pd_param(icon_component, "quadrants", "string"),"pt"))
	entry 'Equivalent Potential Temperature' 'toggle_quad ept' \
	   (substring(pd_param(icon_component, "quadrants", "string"),"ept"))
	entry '15-Minute Rain Accumulation' 'toggle_quad raina15' \
	   (substring(pd_param(icon_component, "quadrants","string"),"raina15"))
	entry '60-Minute Rain Accumulation' 'toggle_quad raina60' \
	   (substring(pd_param(icon_component, "quadrants","string"),"raina60"))
endmenu

!
! Middle icon button menu for Mesonet.
!
define widget meso-middle intmenu 'Field control popup'
	title 'PAM Mesonet Contour Fields'
	line
	entry 'Temperature' 		'param #icon_component field tdry'\
	   (substring(pd_param(icon_component, "field", "string"),"tdry"))
	entry 'Dewpoint Temperature' 	'param #icon_component field dp'\
	   (substring(pd_param(icon_component, "field", "string"),"dp"))
	entry 'Relative Humidity' 	'param #icon_component field rh'\
	   (substring(pd_param(icon_component, "field", "string"),"rh"))
	entry 'Raw Pressure' 		'param #icon_component field pres'\
	   (substring(pd_param(icon_component, "field", "string"),"pres"))
	entry 'Corrected Pressure'	'param #icon_component field cpres0'\
	   (substring(pd_param(icon_component, "field", "string"),"cpres0"))
	entry 'Mixing Ratio' 		'param #icon_component field mr'\
	   (substring(pd_param(icon_component, "field", "string"),"mr"))
	entry 'Potential Temperature' 	'param #icon_component field pt'\
	   (substring(pd_param(icon_component, "field", "string"),"pt"))
	entry 'Equivalent Potential Temperature'\
	   'param #icon_component field ept'\
	   (substring(pd_param(icon_component, "field", "string"),"ept"))
	entry '15-Minute Rain Accumulation'\
	    'param #icon_component field raina15'\
	   (substring(pd_param(icon_component, "field", "string"),"raina15"))
	entry '60-Minute Rain Accumulation'\
	   'param #icon_component field raina60'\
	   (substring(pd_param(icon_component, "field", "string"),"raina60"))
endmenu

!
! Cross-section field menu (can't really be extended until we have field
! derivation)
!
define widget xsect-field-menu intmenu 'Field control popup'
	title 'Field Selection'
	line
	entry 'Potential Temperature' 'param #icon_component field pt'\
	   (substring(pd_param(icon_component, "field", "string"),"pt"))
	entry 'Equivalent Potential Temperature'\
		'param #icon_component field theta_e'\
		(substring(pd_param(icon_component, "field", "string"),"theta_e"))
	entry 'Mixing Ratio' 'param #icon_component field mr'\
	   (substring(pd_param(icon_component, "field", "string"),"mr"))
	entry 'Wind Speed' 'param #icon_component field wspd'\
	   (substring(pd_param(icon_component, "field", "string"),"wspd"))
	entry 'Wind Direction' 'param #icon_component field wdir'\
	   (substring(pd_param(icon_component, "field", "string"),"wdir"))
	entry 'Relative Humidity' 'param #icon_component field rh'\
	   (substring(pd_param(icon_component, "field", "string"),"rh"))
	entry 'Dewpoint Temperature' 'param #icon_component field dp'\
	   (substring(pd_param(icon_component, "field", "string"),"dp"))
	entry 'Raw Pressure' 'param #icon_component field pres'\
	   (substring(pd_param(icon_component, "field", "string"),"pres"))
	entry 'Temperature' 'param #icon_component field tdry'\
	   (substring(pd_param(icon_component, "field", "string"),"tdry"))
endmenu

!
! Middle icon menu for radar data.
!
define widget radar-middle intmenu 'Radar field menu'
	title 'Radar'
	line
	entry 'Reflectivity' 'param #icon_component field reflectivity' \
		(pd_param(icon_component, "field", "string") = "reflectivity")
	entry 'Velocity' 'param #icon_component field velocity' \
		(pd_param(icon_component, "field", "string") = "velocity")
	line
	entry 'Surveillance only mode' 'toggle_sur' \
		(pd_param("global", "cp4-filter-attribute", "string") = "sur")
	entry 'Single fixed angle mode' 'ToggleBoolean every-sweep' \
		(pd_param (icon_component, "every-sweep", "string") = "false")
	line
	entry 'black & white color table'\
		 'param #icon_component color-table 16gray' \
		(pd_param (icon_component,"color-table","string") = "16gray")
	entry 'scook color table' 'param #icon_component color-table scook' \
		(pd_param (icon_component,"color-table","string") = "scook")
	entry 'cook16' 'param #icon_component color-table cook16' \
		(pd_param (icon_component,"color-table","string") = "cook16")
	entry 'cook32' 'param #icon_component color-table cook32' \
		(pd_param (icon_component,"color-table","string") = "cook32")
	entry 'hotcold' 'param #icon_component color-table hotcold' \
		(pd_param (icon_component,"color-table","string") = "hotcold")
	entry 'wild' 'param #icon_component color-table wild' \
		(pd_param (icon_component,"color-table","string") = "wild")
	entry 'wild_new' 'param #icon_component color-table wild_new' \
		(pd_param (icon_component,"color-table","string") = "wild_new")
!	line
!	entry 'Raster representation' \
!		'param #icon_component representation raster'
!	entry 'Contour representation' \
!		'param #icon_component representation contour'
!	entry 'Filled contour representation' \
!		'param #icon_component representation filled-contour'
endmenu


!
! Middle icon menu for nowrad data.
!
define widget nowrad-middle intmenu 'NOWRAD field menu'
	title 'NOWRAD'
	line
	entry 'Rainbow colors' \
		'param #icon_component color-table RevRainbow' \
		(PDParam (icon_component,"color-table") = "RevRainbow")
	entry 'Gray scale' \
		'param #icon_component color-table smallrevgray' \
		(PDParam (icon_component,"color-table") = "smallrevgray")
	entry 'scook color table' 'param #icon_component color-table scook' \
		(PDParam (icon_component,"color-table") = "scook")
	entry 'cook16' 'param #icon_component color-table cook16' \
		(PDParam (icon_component,"color-table") = "cook16")
	entry 'hotcold' 'param #icon_component color-table hotcold' \
		(PDParam (icon_component,"color-table") = "hotcold")
	entry 'wild_new' 'param #icon_component color-table wild_new' \
		(PDParam (icon_component,"color-table") = "wild_new")
	line
	entry 'Raster representation' \
		'param #icon_component representation raster' \
		(PDParam (icon_component, "representation") = "raster")
	entry 'Contour representation' \
		'param #icon_component representation contour' \
		(PDParam (icon_component, "representation") = "contour")
endmenu
!
!Annotation size, right menu for locations
!
define widget locations-right intmenu 'Annotation size'
	title 'Annotation Size'
	line
	entry 'Small' 'do_label_size 0.025' \
		(pd_param(icon_component, "sa-scale", "string") = "0.025")
	entry 'Medium' 'do_label_size 0.035' \
		(pd_param(icon_component, "sa-scale", "string") = "0.035")
	entry 'Large' 'do_label_size 0.045' \
		(pd_param(icon_component, "sa-scale", "string") = "0.045")
endmenu
!
!Nowrad contours
!
define widget nowrad-middle-contour intmenu 'NOWRAD field menu'
	title 'NOWRAD'
	line
	entry 'Rainbow colors' \
		'param #icon_component color-table RevRainbow' \
		(PDParam (icon_component,"color-table") = "RevRainbow")
	entry 'Gray scale' \
		'param #icon_component color-table smallrevgray' \
		(PDParam (icon_component,"color-table") = "smallrevgray")
	entry 'scook color table' 'param #icon_component color-table scook' \
		(PDParam (icon_component,"color-table") = "scook")
	entry 'cook16' 'param #icon_component color-table cook16' \
		(PDParam (icon_component,"color-table") = "cook16")
	entry 'hotcold' 'param #icon_component color-table hotcold' \
		(PDParam (icon_component,"color-table") = "hotcold")
	entry 'wild_new' 'param #icon_component color-table wild_new' \
		(PDParam (icon_component,"color-table") = "wild_new")
	line
	entry 'Raster representation' \
		'param #icon_component representation raster' \
		(PDParam (icon_component, "representation") = "raster")
	entry 'Contour representation' \
		'param #icon_component representation contour' \
		(PDParam (icon_component, "representation") = "contour")
endmenu
!
!
! Middle icon menu for goes data.
!
define widget goes-middle intmenu 'GOES field menu'
	title 'GOES'
	line
	entry 'Visible' 'param #icon_component field vis' \
		(pd_param(icon_component, "field", "string") = "vis")
	entry 'Infrared' 'param #icon_component field ir' \
		(pd_param(icon_component, "field", "string") = "ir")
	line
	entry 'black & white color table'\
		 'param #icon_component color-table 16gray' \
		(pd_param (icon_component,"color-table","string") = "16gray")
	entry 'black & white "log" color table'\
		 'param #icon_component color-table newgray' \
		(pd_param ("global","color-table","string") = "newgray")
	entry 'scook color table' 'param #icon_component color-table scook' \
		(pd_param (icon_component,"color-table","string") = "scook")
	entry 'cook16' 'param #icon_component color-table cook16' \
		(pd_param (icon_component,"color-table","string") = "cook16")
	entry 'cook32' 'param #icon_component color-table cook32' \
		(pd_param (icon_component,"color-table","string") = "cook32")
	entry 'hotcold' 'param #icon_component color-table hotcold' \
		(pd_param (icon_component,"color-table","string") = "hotcold")
	entry 'wild' 'param #icon_component color-table wild' \
		(pd_param (icon_component,"color-table","string") = "wild")
	entry 'wild_new' 'param #icon_component color-table wild_new' \
		(pd_param (icon_component,"color-table","string") = "wild_new")
endmenu

!
! Toggle the attribute for cp4 radar data.
!
procedure toggle_sur
	if (pd_param ("global", "cp4-filter-attribute", "string") = "sur")
		param global cp4-filter-attribute "radar"
	else
		param global cp4-filter-attribute "sur"
	endif
endprocedure

!
! Left button menu for the global component.
!
define widget global-left intmenu 'Global left menu'
	title 'Global Options'
	line
	submenu 'Adjust Global Limits' 'adjust_global_limits'
!	entry 'Zoom Window' 'dm "zoom #dm$button_window"'
	entry 'Reset window' 'dm "ResetWindow"'
	entry 'Popup Overlay Times Window' 'popup overlay'
	entry 'Popup Movie Controller' 'popup movie'
	submenu 'Set Scale' 'ScaleMenu'
endmenu

!
! Left button menu for xsections
!

define widget xsect-left intmenu 'Xsect left menu'
	title 'Options'
	line
!	entry 'Zoom Window' 'dm "zoom #dm$button_window"'
	entry 'Popup Overlay Times Window' 'popup overlay'
endmenu

!
! Movie control menu.
!
define widget movie-control intmenu 'movie control'
	title 'Movie Control'
	line
	entry 'Popup Movie Controller' 'popup movie'
	entry 'Run Movie' 'movie run'
	entry 'Stop Movie' 'movie stop'
endmenu

!
! Boundary drawing menu.
!
define widget boundary intmenu 'boundaries'
	title 'Boundary Entry'
	line
	entry 'Enter Scan Optimizer Boundary' 'polyline l_boundary'
	entry '      Spotlight Boundary' 'polyline l_spotlight'
	line
	entry 'Enter Storm 1 flight plan' 'polyline l_n2uw-plan'
	entry 'Enter Storm 2 flight plan' 'polyline l_n312d-plan'
	entry 'Enter Storm 3 flight plan' 'polyline l_n43rf-plan'
	entry 'Enter Storm 4 flight plan' 'polyline l_n327uw-plan'
	entry 'Enter Storm 5 flight plan' 'polyline l_n709na-plan'
endmenu

!
! The Global Adjust Limits submenu
!
define widget adjust_global_limits intmenu "Adjust Global Limits"
	entry 'X Limits' 'i_adjust_global x-limit-proc'
	entry 'Y Limits' 'i_adjust_global y-limit-proc'
endmenu
!
! Toggle between ft and km.
!
define widget feet-km intmenu 'feet/km'
	title 'Feet/Kilometers'
	line
	entry 'Ft' 'do-feet-proc true'
	entry 'Km' 'do-feet-proc false'
endmenu

procedure do-feet-proc value string
	parameter #icon_component do-feet #value
endprocedure

!
! Middle button for soundings.
!
define widget skewt-middle intmenu 'sounding middle'
	title 'Available soundings'
	line
	entry 'Byers, 21:30' 'do_sounding byr 870717,21:30'
	line
	entry 'Denver, 21:30' 'do_sounding dvr 870717,21:30'
	entry 'Denver, 21:35' 'do_sounding dvr 870717,21:35'
	entry 'Denver, 22:42' 'do_sounding dvr 870717,22:42'
	line
	entry 'Elizabeth, 21:33' 'do_sounding elz 870717,21:33'
	entry 'Elizabeth, 22:47' 'do_sounding elz 870717,22:47'
	line
	entry 'Golden, 21:30' 'do_sounding gdn 870717,21:30'
	entry 'Golden, 22:44' 'do_sounding gdn 870717,22:44'
	line
	entry 'Hudson, 22:12' 'do_sounding hud 870717,22:12'
	entry 'Hudson, 22:40' 'do_sounding hud 870717,22:40'
	line
	entry 'Mobile 1, 21:32' 'do_sounding mb1 870717,21:32'
	entry 'Mobile 1, 22:38' 'do_sounding mb1 870717,22:38'
	entry 'Mobile 2, 21:32' 'do_sounding mb2 870717,21:32'
	entry 'Mobile 2, 22:36' 'do_sounding mb2 870717,22:36'
	entry 'Mobile 3, 21:30' 'do_sounding mb3 870717,21:30'
endmenu



procedure do_sounding platform string when string
	parameter skewt platform #platform
	parameter global plot-time #when
endprocedure


!
! Adjustments to range rings.
!
define widget rings-menu intmenu 'rings adjustment'
	title 'Range ring parameters'
	line
	entry 'CP3 center' 'parameter #icon_component platform cp3' \
		(pd_param (icon_component, "platform", "string") = 'cp3')
	entry 'CP4 center' 'parameter #icon_component platform cp4' \
		(pd_param (icon_component, "platform", "string") = 'cp4')
	entry 'MHR center' 'parameter #icon_component platform mhr' \
		(pd_param (icon_component, "platform", "string") = 'mhr')
	entry 'OKC center' 'parameter #icon_component platform okc' \
		(pd_param (icon_component, "platform", "string") = 'okc')
	entry 'FDR center' 'parameter #icon_component platform fdr' \
		(pd_param (icon_component, "platform", "string") = 'fdr')
	entry 'CIM center' 'parameter #icon_component platform cim' \
		(pd_param (icon_component, "platform", "string") = 'cim')
	entry 'HOT center' 'parameter #icon_component platform hot' \
		(pd_param (icon_component, "platform", "string") = 'hot')
	entry 'CHILL center' 'parameter #icon_component platform chill' \
		(pd_param (icon_component, "platform", "string") = 'chill')
	line
	entry '10 km rings' 'parameter #icon_component ring-interval 10' \
		(pd_param (icon_component, "ring-interval", "string") = '10')
	entry '20 km rings' 'parameter #icon_component ring-interval 20' \
		(pd_param (icon_component, "ring-interval", "string") = '20')
	entry '30 km rings' 'parameter #icon_component ring-interval 30' \
		(pd_param (icon_component, "ring-interval", "string") = '30')
	entry '40 km rings' 'parameter #icon_component ring-interval 40' \
		(pd_param (icon_component, "ring-interval", "string") = '40')
	line
	entry '10 degree lines' \
		'parameter #icon_component azimuth-interval 10' \
		(pd_param(icon_component, "azimuth-interval", "string") = '10')
	entry '30 degree lines' \
		'parameter #icon_component azimuth-interval 30' \
		(pd_param(icon_component, "azimuth-interval", "string") = '30')
	entry '45 degree lines' \
		'parameter #icon_component azimuth-interval 45' \
		(pd_param(icon_component, "azimuth-interval", "string") = '45')
	entry '90 degree lines' \
		'parameter #icon_component azimuth-interval 90' \
		(pd_param(icon_component, "azimuth-interval", "string") = '90')
	line
	submenu 'Line Width' linewidth
endmenu



!
! Adjustments to VOR rings.
!
define widget vor-rings-menu intmenu 'rings adjustment'
	title 'Range ring parameters'
	line
	entry 'STJ VOR' 'parameter #icon_component platform vor-stj' \
		(pd_param (icon_component, "platform", "string") = 'vor-stj')
	entry 'MKC VOR' 'parameter #icon_component platform vor-mkc' \
		(pd_param (icon_component, "platform", "string") = 'vor-mkc')
	entry 'PWE VOR' 'parameter #icon_component platform vor-pwe' \
		(pd_param (icon_component, "platform", "string") = 'vor-pwe')
	entry 'TOP VOR' 'parameter #icon_component platform vor-top' \
		(pd_param (icon_component, "platform", "string") = 'vor-top')
	entry 'DUC VOR' 'parameter #icon_component platform vor-duc' \
		(pd_param (icon_component, "platform", "string") = 'vor-duc')
	entry 'IRW VOR' 'parameter #icon_component platform vor-irw' \
		(pd_param (icon_component, "platform", "string") = 'vor-irw')
	entry 'HBR VOR' 'parameter #icon_component platform vor-hbr' \
		(pd_param (icon_component, "platform", "string") = 'vor-hbr')
	entry 'IFI VOR' 'parameter #icon_component platform vor-ifi' \
		(pd_param (icon_component, "platform", "string") = 'vor-ifi')
	entry 'IRK VOR' 'parameter #icon_component platform vor-irk' \
		(pd_param (icon_component, "platform", "string") = 'vor-irk')
	entry 'DSM VOR' 'parameter #icon_component platform vor-dsm' \
		(pd_param (icon_component, "platform", "string") = 'vor-dsm')
	entry 'FSM VOR' 'parameter #icon_component platform vor-fsm' \
		(pd_param (icon_component, "platform", "string") = 'vor-fsm')
	entry 'Other VOR (keyboard entry)' 'popup vor-origin'
	line
! Ugly.  But easy.
	entry '5 nm rings' 'parameter #icon_component ring-interval 9.27' \
	  (pd_param (icon_component, "ring-interval", "string") = '9.27')
	entry '10 nm rings' 'parameter #icon_component ring-interval 18.54' \
	  (pd_param (icon_component, "ring-interval", "string") = '18.54')
	entry '20 nm rings' 'parameter #icon_component ring-interval 37.09' \
	  (pd_param (icon_component, "ring-interval", "string") = '37.09')
	entry '30 nm rings' 'parameter #icon_component ring-interval 55.63' \
	  (pd_param (icon_component, "ring-interval", "string") = '55.63')
	line
	entry '10 km rings' 'parameter #icon_component ring-interval 10.0' \
	  (pd_param (icon_component, "ring-interval", "string") = '10.0')
	entry '20 km rings' 'parameter #icon_component ring-interval 20.0' \
	  (pd_param (icon_component, "ring-interval", "string") = '20.0')
	entry '30 km rings' 'parameter #icon_component ring-interval 30.0' \
	  (pd_param (icon_component, "ring-interval", "string") = '30.0')
	entry '40 km rings' 'parameter #icon_component ring-interval 40.0' \
	  (pd_param (icon_component, "ring-interval", "string") = '40.0')
	line
	entry '10 degree lines' \
		'parameter #icon_component azimuth-interval 10' \
		(pd_param(icon_component, "azimuth-interval", "string") = '10')
	entry '30 degree lines' \
		'parameter #icon_component azimuth-interval 30' \
		(pd_param(icon_component, "azimuth-interval", "string") = '30')
	entry '45 degree lines' \
		'parameter #icon_component azimuth-interval 45' \
		(pd_param(icon_component, "azimuth-interval", "string") = '45')
	entry '90 degree lines' \
		'parameter #icon_component azimuth-interval 90' \
		(pd_param(icon_component, "azimuth-interval", "string") = '90')
	line
	submenu 'Line Width' linewidth
endmenu

!
! A form widget for manual VOR entry.
!
define widget vor-origin form 'VOR origin'
	noheader
	popup vor_popup
	label comp 'component'
	label l1 'VOR/DME origin:'
	blank origin 'vor-top' command 'vor_origin_enter' width 100
	newline
	button cancel 'Cancel' color red command 'popdown #ui$form'
	button apply 'Apply' command 'vor_origin_enter'
!	newline
	label gripe ' ' color red width 200
enddef


!
! Initialize a VOR form.
!
procedure vor_popup
	formtext #ui$form comp #icon_component
	formtext #ui$form gripe ' '
endprocedure


procedure vor_origin_enter 
	local comp getftext(ui$form,'comp')
	local origin getftext(ui$form,'origin')
	local loc pd_paramsearch(comp, 'location', origin, "string")
!
! Give them a chance without "vor-"
!
	if (loc = '(Undefined)')
		local origin concat('vor-',origin)
		local loc pd_paramsearch(comp, 'location', origin, "string")
	endif
!
! Make sure we know about this location.
!
	if (loc = '(Undefined)')
		local complaint quote(concat3('Location ',origin,' unknown'))
		formtext #ui$form gripe #complaint
		return
	endif
!
! Looks cool -- let's do it.
!
	parameter #comp 'platform' #origin
	parameter #comp 'icon' 'vor'
	popdown #ui$form
endprocedure



define widget contour-options intmenu 'Contour Options'
	title 'Contour Options'
	line
	submenu 'Contour Color' 'contour-color'
	line
	submenu 'Label Blanking' 'label-blanking'
	line
	submenu	'Line Width' 'linewidth'
	line
	submenu 'Show Annotation' 'annot-onoff'
	line
	submenu 'Annotation Size' 'side-annot-scale'
	line
	submenu 'Annotation Skip' 'annot-skip'
!	line
!	submenu 'Toggle Platform' 'toggle-meso-platform'
endmenu


define widget meso-winds-options intmenu 'Line Contour Options'
	title 'Winds Options'
	line
	submenu 'Annotation Size' 'side-annot-scale'
	line
	submenu 'Arrow Color' 'simple-color'
	line
	submenu	'Line Width' 'linewidth'
!	line
!	submenu 'Platform' 'toggle-meso-platform'
!	line
!	entry 'Toggle Spatial Filter' 'toggle_bool "spatial-filter" "true"'
endmenu

define widget meso-station-options intmenu 'Line Contour Options'
	title 'Winds Options'
	line
	submenu 'Annotation Size' 'side-annot-scale'
	line
	submenu 'Arrow Color' 'simple-color'
	line
	submenu	'Line Width' 'linewidth'
endmenu


define widget annot-skip intmenu 'Annotation Skipping'
	title 'Annotation Skip'
	line
	entry 'On' 'do_annot_skip 2'  
	entry 'Off' 'do_annot_skip 1'   
endmenu

define widget annot-onoff intmenu 'Annotation On/Off'
	title 'Show Annotation'
	line
	entry 'On' 'do_side_annot_show true' \
		(pd_param (icon_component, "sa-show", "string") = "true")
	entry 'Off' 'do_side_annot_show false' \
		(pd_param (icon_component, "sa-show", "string") = "false")
endmenu

define widget label-blanking intmenu 'Contour Label Blanking'
	title 'Label Blanking'
	line
	entry 'On' 'do_blank_label true' \
		(pd_param (icon_component, "label-blanking", "string") = "true")
	entry 'Off' 'do_blank_label false' \
		(pd_param(icon_component, "label-blanking", "string") = "false")
endmenu

define widget contour-color intmenu 'Contour Color'
	title 'Select Color'
	line
	entry 'white' 'do_contour_color white'
	entry 'black' 'do_contour_color black'
	entry 'gray' 'do_contour_color gray60'
	entry 'lavender' 'do_contour_color lavender'
	entry 'blue' 'do_contour_color blue'
	entry 'cyan' 'do_contour_color cyan'
	entry 'green' 'do_contour_color green'
	entry 'khaki' 'do_contour_color khaki'
	entry 'yellow' 'do_contour_color yellow'
	entry 'tan' 'do_contour_color tan'
	entry 'brown' 'do_contour_color brown'
	entry 'orange' 'do_contour_color orange'
	entry 'red' 'do_contour_color red'
	entry 'pink' 'do_contour_color "HotPink"'
	entry 'violet' 'do_contour_color violet'
	line
	entry 'Multi-Colored Contours ' 'do_mono_color'
endmenu

define widget track-color intmenu 'Track Color'
	title 'Select Color'
	line
	submenu 'Track Color' 'simple-color'
	line
	entry 'Show Plane?' 'toggle_bool "show-position" "true"'
	entry 'Color Code by Altitude' 'toggle_color_code' \
	  (pd_param(icon_component, "field", "string") <> "(Undefined)")
endmenu

define widget quadrant-color intmenu 'Quadrant Color'
	title 'Select Color'
	line
	entry 'white' 'do_quad_color white'
	entry 'black' 'do_quad_color black'
	entry 'gray' 'do_quad_color gray60'
	entry 'lavender' 'do_quad_color lavender'
	entry 'blue' 'do_quad_color blue'
	entry 'cyan' 'do_quad_color cyan'
	entry 'green' 'do_quad_color green'
	entry 'khaki' 'do_quad_color khaki'
	entry 'yellow' 'do_quad_color yellow'
	entry 'tan' 'do_quad_color tan'
	entry 'brown' 'do_quad_color brown'
	entry 'orange' 'do_quad_color orange'
	entry 'red' 'do_quad_color red'
	entry 'pink' 'do_quad_color "HotPink"'
	entry 'violet' 'do_quad_color violet'
endmenu

define widget air-arrow-options intmenu 'Aircraft Arrow Options'
	title 'Aircraft Options'
	line
	submenu 'Arrow Color' 'arrow-color'
	line
	submenu 'Annotation Size' 'side-annot-scale'
	line
	submenu 'Annotation Skip' 'annot-skip'
endmenu

define widget arrow-color intmenu 'Arrow Color'
	title 'Arrow Color'
	line
	entry 'white' 'do_air_color white'
	entry 'black' 'do_air_color black'
	entry 'gray' 'do_air_color gray60'
	entry 'lavender' 'do_air_color lavender'
	entry 'blue' 'do_air_color blue'
	entry 'cyan' 'do_air_color cyan'
	entry 'green' 'do_air_color green'
	entry 'khaki' 'do_air_color khaki'
	entry 'yellow' 'do_air_color yellow'
	entry 'tan' 'do_air_color tan'
	entry 'brown' 'do_air_color brown'
	entry 'orange' 'do_air_color orange'
	entry 'red' 'do_air_color red'
	entry 'pink' 'do_air_color "HotPink"'
	entry 'violet' 'do_air_color violet'
	line
	entry 'No Arrows' 'remove_air_arrows'
endmenu

define widget annot-color intmenu 'Annotation colors'
	title 'Top Annotation'
	line
	submenu 'Color' 'top-annot-color'
	line
	entry 'Small' 'do_annot_size 0.03' \
		(pd_param(icon_component, "ta-scale", "string") = "0.03")
	entry 'Medium' 'do_annot_size 0.035' \
		(pd_param(icon_component, "ta-scale", "string") = "0.035")
	entry 'Large' 'do_annot_size 0.04' \
		(pd_param(icon_component, "ta-scale", "string") = "0.04")
	line
	entry 'Color Match On' 'color_match true'  \
		(pd_param (icon_component, "ta-color-match", "string") = "true")
	entry 'Color Match Off' 'color_match false'  \
		(pd_param(icon_component, "ta-color-match", "string") = "false")
endmenu

define widget top-annot-color intmenu 'Top annotation color'
	title 'Top annotation color'
	line
	entry 'white' 'do_annot_color white'
	entry 'black' 'do_annot_color black'
	entry 'gray' 'do_annot_color gray60'
	entry 'lavender' 'do_air_color lavender'
	entry 'blue' 'do_annot_color blue'
	entry 'cyan' 'do_annot_color cyan'
	entry 'green' 'do_annot_color green'
	entry 'khaki' 'do_annot_color khaki'
	entry 'yellow' 'do_annot_color yellow'
	entry 'tan' 'do_annot_color tan'
	entry 'brown' 'do_annot_color brown'
	entry 'orange' 'do_annot_color orange'
	entry 'red' 'do_annot_color red'
	entry 'pink' 'do_annot_color "HotPink"'
	entry 'violet' 'do_annot_color violet'
endmenu


define widget side-annot-scale intmenu 'Side annotation'
	title 'Annotation Size'
	line
	entry 'Small' 'do_side_annot_size 0.02' \
		(pd_param(icon_component, "sa-scale", "string") = "0.02")
	entry 'Medium' 'do_side_annot_size 0.025' \
		(pd_param(icon_component, "sa-scale", "string") = "0.025")
	entry 'Large' 'do_side_annot_size 0.03' \
		(pd_param(icon_component, "sa-scale", "string") = "0.03")
endmenu

define widget toggle-meso-platform intmenu 'Toggle mesonet platform'
	title 'Mesonet Platform'
	line
	entry 'All PAM stations' 'parameter #icon_component platform mesonet' \
		(pd_param (icon_component, "platform", "string") = "mesonet")
	entry 'PAM PBL stations' 'parameter #icon_component platform pampbl' \
		(pd_param (icon_component, "platform", "string") = "pampbl")
endmenu


procedure do_grid_toggle value string
	parameter #icon_component grid #value
endprocedure

procedure do_blank_label value string
	parameter #icon_component label-blanking #value
endprocedure

procedure color_match value string
	parameter #icon_component ta-color-match #value
endprocedure

procedure do_side_annot_show show string
	parameter #icon_component sa-show #show
endprocedure

procedure do_side_annot_size size string
	parameter #icon_component sa-scale #size
endprocedure

procedure do_label_size size string
	parameter #icon_component label-size #size
endprocedure

procedure do_annot_skip skip string
	parameter #icon_component ct-limit #skip
endprocedure

procedure do_annot_size size string
	parameter #icon_component ta-scale #size
endprocedure

procedure do_annot_color color string
	parameter #icon_component ta-color #color
endprocedure

procedure do_mono_color
	parameter #icon_component color-mono false
endprocedure

procedure remove_air_arrows
	parameter #icon_component arrow false
endprocedure

procedure do_contour_color color string
	parameter #icon_component color #color
	parameter #icon_component color-mono true
endprocedure

procedure do_air_color color string
	parameter #icon_component arrow-color #color
	parameter #icon_component arrow true
endprocedure

procedure do_simple_color color string
	parameter #icon_component color #color
endprocedure

procedure do_quad_color color string
	parameter #icon_component quad-color #color
endprocedure

procedure toggle_color_code
	if ((pd_param(icon_component, "field", "string")) <> "(Undefined)")
		local worked (pd_removeparam(icon_component, "field"))
		local color (pd_param(icon_component, "color", "string"))
		if (color = "(Undefined)")
			parameter #icon_component color yellow
		else
			parameter #icon_component color #color
		endif
	else
		parameter #icon_component field alt
		parameter #icon_component color-table contour
	endif
endprocedure

procedure fldset name string
	parameter #icon_component field #name
endprocedure


!
! Toggle the winds overlay.  For now, we have to ask DM to do it for us,
! since we don't have this stuff around.
!
procedure change_winds
	if (pd_defined ("winds-mesonet", "u-field"))
		dm "remove #dm$button_window winds-mesonet"
	else
		dm "add winds winds-mesonet #dm$button_window"
	endif
endprocedure

!
! Similar stuff for the aircraft overlay.
!
procedure change_aircraft
	if (pd_defined ("aircraft", "platform"))
		dm "remove #dm$button_window aircraft"
	else
		dm "add kingair aircraft #dm$button_window"
	endif
endprocedure

!
! Toggle radar or GOES field, if they're there
!
procedure toggle_main
        if (pd_defined ("c_radar", "field"))
                if (pd_param ("c_radar", "field", "string") = "reflectivity")
                        parameter c_radar field "velocity"
                else
                        parameter c_radar field "reflectivity"
                endif
        elseif (pd_defined ("c_goes_us", "field"))
                if (pd_param ("c_goes_us", "field", "string") = "vis")
                        parameter c_goes_us field "ir"
                else
                        parameter c_goes_us field "vis"
                endif
        elseif (pd_defined ("c_goes_fest", "field"))
                if (pd_param ("c_goes_fest", "field", "string") = "vis")
                        parameter c_goes_fest field "ir"
                else
                        parameter c_goes_fest field "vis"
                endif
        endif
endprocedure

procedure toggle_sat
	if (pd_param ("c_goes", "platform", "string") = "goes_8km")
		parameter c_goes platform "goes_16km"
	elseif (pd_param ("c_goes", "platform", "string") = "goes_16km")
		parameter c_goes platform "goes_32km"
	else
		parameter c_goes platform "goes_8km"
        endif
endprocedure

procedure toggle_radar 
	if (pd_param ("c_radar", "field", "string") = "reflectivity")
		parameter c_radar field "velocity"
	else
		parameter c_radar field "reflectivity"
	endif
endprocedure

!
! Toggle between satellite and radar or nowrad.
!
procedure toggle_satellite
	local current (pd_param ("c_goes", "disable", "string"))
	if (current = "(Undefined)")
		parameter "c_goes" "disable" "true"
	elseif (current = "true")
		parameter "c_goes" "disable" "false"
	else
		parameter "c_goes" "disable" "true"
	endif
	if (pd_defined ("c_radar", "representation"))
		if (current = "(Undefined)")
			parameter "c_radar" "disable" "false"
		elseif (current = "true")
			parameter "c_radar" "disable" "true"
		else
			parameter "c_radar" "disable" "false"
		endif
	elseif (pd_defined ("c_nowrad", "representation"))
		if (current = "(Undefined)")
			parameter "c_nowrad" "disable" "false"
		elseif (current = "true")
			parameter "c_nowrad" "disable" "true"
		else
			parameter "c_nowrad" "disable" "false"
		endif
	endif
endprocedure

!
! Adjust the limits on the global component.
!
procedure i_adjust_global procparam string
	local proc pd_paramsearch(icon_component, procparam, "global", "string")
	if (proc <> "(Undefined)")
		#proc 
	else
		dm "beep"
	endif
endprocedure

!
! The pressure minval maxval adjuster.
!
procedure adj_pres_minmax comp string
	local rep pd_param(comp, "representation", "string")
	local minval pd_paramsearch(comp, "pres-minval", rep, "string")
	local maxval pd_paramsearch(comp, "pres-maxval", rep, "string")
	activate doublefloat #comp "pres-minval" "Pressure Minval: " #minval \
		"pres-maxval" "Pressure Maxval: " #maxval
endprocedure

!
! The temperature minval maxval adjuster.
!
procedure adj_temp_minmax comp string
	local rep pd_param(comp, "representation", "string")
	local minval pd_paramsearch(comp, "temp-minval", rep, "string")
	local maxval pd_paramsearch(comp, "temp-maxval", rep, "string")
	activate doublefloat #comp "temp-minval" "Temperature Minval: " \
		#minval "temp-maxval" "Temperature Maxval: " #maxval
endprocedure


!
! The time series left center step adjuster.
!
procedure adj_left_centstep comp string
	activate timeseries #comp "left" "center" "Center: "  "step" "Step: " 
endprocedure

!
! The time series right center step adjuster.
!
procedure adj_right_centstep comp string
	activate timeseries #comp "right" "center" "Center: "  "step" "Step: " 
endprocedure

!
! The time series time interval adjuster.
!
procedure adj_time_int comp string
	local time pd_paramsearch(comp, "time-interval", "tseries", "string")
	activate singlestring #comp "time-interval" "Time(suffix h or m):" #time 
endprocedure

!
! The xy-wind time interval adjuster.
!
procedure adj_xy_time comp string
	local time pd_param("global", "xy-series-span", "string")
	activate singlestring "global" "xy-series-span" \
		"Time(suffix h or m):" #time 
endprocedure

!
! The lightning location time step adjuster.
!
procedure adj_time_step comp string
	local time pd_paramsearch(comp, "time-step", "lightning", "string")
	activate singlestring #comp "time-step" "Time Step: " #time
endprocedure

!
! The track time period adjuster.
!
procedure adj_time_period comp string
	local time pd_paramsearch(comp, "time-period", "track", "string")
	activate singlestring #comp "time-period" "Time Period: " #time
endprocedure

!
! The time series number of steps adjuster.
!
procedure adj_num_step comp string
	local num pd_paramsearch(comp, "nstep", "tseries", "string")
	activate singleint #comp "nstep" "Number of Steps: " #num
endprocedure

!
! The time series data skip adjuster.
!
procedure adj_data_skip comp string
	local dskip pd_paramsearch(comp, "data-skip", "tseries", "string")
	activate singleint #comp "data-skip" "Data Skip: " #dskip
endprocedure

!
! The highlight range adjuster.
!
procedure adj_highlight_range comp string
	local field pd_param(comp, "field", "string")
	local repr pd_param(comp, "representation", "string")
	local high_param concat(field, "-highlight")
	local highlight pd_paramsearch(comp, high_param, repr, "string")
	local range_param concat(field, "-highlight-range")
	local range pd_paramsearch(comp, range_param, repr, "string")
	activate doublefloat #comp #high_param "Highlight: " #highlight \
		#range_param "Range: " #range
endprocedure

!
! The center step adjuster.
!
procedure adj_center_step comp string
	require ctr-step
	popup center-step
endprocedure

!
! The filled contour center step adjuster.
!
!procedure adj_fill_centstep comp string
!	local field pd_param(comp, "field", "string")
!	local center_param concat(field, "-center")
!	local center pd_paramsearch(comp, center_param, "contour", "string")
!	local step_param concat(field, "-step")
!	local step pd_paramsearch(comp, step_param, "contour", "string")
!	activate doublefloat #comp #center_param "Center: " #center \
!		#step_param "Step: " #step
!endprocedure

!
! The x min max adjuster.
!
procedure adj_x_minmax 
	local xmin pd_paramsearch("global", "x-min", "", "string")
	local xmax pd_paramsearch("global", "x-max", "", "string")
	activate doublefloat "global" "x-min" "X Min: " #xmin \
		"x-max" "X Max: " #xmax
endprocedure

!
! The y min max adjuster.
!
procedure adj_y_minmax 
	local ymin pd_paramsearch("global", "y-min", "", "string")
	local ymax pd_paramsearch("global", "y-max", "", "string")
	activate doublefloat "global" "y-min" "Y Min: " #ymin \
		"y-max" "Y Max: " #ymax
endprocedure

!
! The line contour center step adjuster.
!
!procedure adj_line_centstep comp string
!	local field pd_param(comp, "field", "string")
!	local center_param concat(field, "-center")
!	local center pd_paramsearch(comp, center_param, "contour", "string")
!	local step_param concat(field, "-step")
!	local step pd_paramsearch(comp, step_param, "contour", "string")
!	activate doublefloat #comp #center_param "Center: " #center \
!		#step_param "Step: " #step
!endprocedure

!
! The arrow spatial filter adjuster.
!
procedure adj_filter_scale comp string
	local current pd_param(icon_component, "filter-resolution", "string")
	activate singlefloat #comp 'filter-resolution' "Arrow Scale: " #current
endprocedure

!
! Time series right button.
!
define widget tseries-right intmenu 'TSeries Right'
	title 'Time Series Options'
	line
	submenu 'Axis Color' 'tseries-color'
	line
	submenu 'Flip Time' 'tseries-flip'
	line
	submenu 'Annotation Size' 'side-annot-scale'
endmenu

define widget tseries-flip intmenu 'TSeries Flip Time'
	title 'Flip Time'
	line
	entry 'On' 'do_flip_time true' \
		(pd_param (icon_component, "flip-time", "string") = "true")
	entry 'Off' 'do_flip_time false' \
		(pd_param (icon_component, "flip-time", "string") = "false")
endmenu

define widget tseries-color intmenu 'TSeries Axis Color'
	title 'Axis Color'
	line
	entry 'white' 'do_axis_color white'
	entry 'black' 'do_axis_color black'
	entry 'lavender' 'do_axis_color lavender'
	entry 'blue' 'do_axis_color blue'
	entry 'cyan' 'do_axis_color cyan'
	entry 'green' 'do_axis_color green'
	entry 'khaki' 'do_axis_color khaki'
	entry 'yellow' 'do_axis_color yellow'
	entry 'tan' 'do_axis_color tan'
	entry 'brown' 'do_axis_color brown'
	entry 'orange' 'do_axis_color orange'
	entry 'red' 'do_axis_color red'
	entry 'pink' 'do_axis_color "HotPink"'
	entry 'violet' 'do_axis_color violet'
endmenu

procedure do_axis_color value string
	parameter #icon_component axis-color #value
endprocedure

procedure do_flip_time value string
	parameter #icon_component flip-time #value
endprocedure

define widget capow-bdry-plat intmenu 'CaPOW Boundary Platforms'
	title 'Select Platforms'
	line
	entry 'Boundaries' 'activate stationwidget #icon_component capow_bdry'
endmenu

define widget capow-core-plat intmenu 'CaPOW Cores Platforms'
	title 'Select Platforms'
	line
	entry 'Cores' 'activate stationwidget #icon_component capow_core'
endmenu

define widget capow-now-plat intmenu 'CaPOW Nowcast Platforms'
	title 'Select Platforms'
	line
	entry 'Nowcasts' 'activate stationwidget #icon_component capow_now'
endmenu


!
! A bunch of stuff for dealing with time series platforms and fields.
!
define widget tseries-middle intmenu 'TSeries Platforms/Fields'
	title 'Time Series Options'
	line
	submenu 'Select Fields' 'tseries-fields'
	line
	submenu 'Select Platforms' 'tseries-plat'
endmenu

define widget tseries-plat intmenu 'TSeries Platforms'
	title 'Select Platforms'
	line
	submenu 'Aircraft' 'tseries-aircraft'
	line
	entry 'Mesonet' 'activate stationwidget #icon_component mesonet'
endmenu

define widget tseries-aircraft intmenu 'TSeries Aircraft'
	title 'Select Aircraft'
	line
	entry 'P-3' 'toggle_plat p3' \
	(substring(pd_param(icon_component, "platform", "string"),"p3"))
endmenu


define widget tseries-fields intmenu 'TSeries Fields'
	title 'Select Fields'
	line
	entry 'Temperature' 'toggle_field tdry' \
	   (substring(pd_param(icon_component, "field", "string"),"tdry"))
	entry 'Dewpoint Temperature' 'toggle_field dp' \
	   (substring(pd_param(icon_component, "field", "string"),"dp"))
	entry 'Relative Humidity' 'toggle_field rh' \
	   (substring(pd_param(icon_component, "field", "string"),"rh"))
	entry 'Raw Pressure' 'toggle_field pres' \
	   (substring(pd_param(icon_component, "field", "string"),"pres"))
	entry 'Corrected Pressure' 'toggle_field cpres0' \
	   (substring(pd_param(icon_component, "field", "string"),"cpres0"))
	entry 'Mixing Ratio' 'toggle_field mr' \
	   (substring(pd_param(icon_component,"field","string"),"mr"))
	entry 'Potential Temperature' 'toggle_field pt' \
	   (substring(pd_param(icon_component, "field", "string"),"pt"))
	entry 'Equivalent Potential Temperature' 'toggle_field ept'\
	   (substring(pd_param(icon_component,"field","string"),"ept"))
	entry '15-Minute Rain Accumulation' 'toggle_field raina15'\
	   (substring(pd_param(icon_component,"field","string"),"raina15"))
	entry '60-Minute Rain Accumulation' 'toggle_field raina60'\
	   (substring(pd_param(icon_component,"field","string"),"raina60"))
	entry 'Wind Speed' 'toggle_field wspd'\
	   (substring(pd_param(icon_component,"field","string"),"wspd"))
	entry 'Wind Direction' 'toggle_field wdir'\
	   (substring(pd_param(icon_component,"field","string"),"wdir"))
endmenu
!
! Toggle the presence of a given platform.
!
procedure toggle_plat platform string
	local oldplat (pd_param (icon_component, "platform", "string"))
!
! See if it's already there.  If so, we remove.
!
	if (substring (oldplat, platform))
		local newplat substr_remove(oldplat, platform)

! Otherwise we just add it.  If there is a maximum number of platforms,
! though, we have to enforce it.
!
	else
	    if (oldplat = "")
		local newplat platform
	    else
		local newplat (concat(oldplat, concat (",",platform)))
	    endif

	    local max pd_param(icon_component,"max-platform","string")
	    if (max <> "(Undefined)")
	    	local imax pd_param(icon_component,"max-platform","integer")
		if (n_occur (newplat, ",") >= imax)
			dm "beep"
			return
		endif
	    endif
	endif
!
! Store the thing.
!
	if (newplat = "")
		param #icon_component platform ""
	else
		param #icon_component platform #newplat
	endif
endprocedure


!
! Toggle the presence of a given field.
!
procedure toggle_field field string
	local oldfld (pd_param (icon_component, "field", "string"))
!
! See if it's already there.  If so, we remove.
!
	if (substring (oldfld, field))
		local newfld (substr_remove (oldfld, field))
!
! Otherwise we just add it.  If there is a maximum number of fields,
! though, we have to enforce it.
!
	else
	    if (oldfld = "")
		local newfld field
	    else
		local newfld (concat(oldfld, concat (",",field)))
	    endif

	    local max pd_param(icon_component,"max-field","string")
	    if (max <> "(Undefined)")
	    	local imax pd_param(icon_component,"max-field","integer")
		if (n_occur (newfld, ",") >= imax)
			dm "beep"
			return
		endif
	    endif
	endif
!
! Store the thing.
!
	if (newfld = "")
		param #icon_component field ""
	else
		param #icon_component field #newfld
	endif
endprocedure

!
! Toggle the presence of a given field for quadrants.
!
procedure toggle_quad field string
	local oldfld (pd_param (icon_component, "quadrants", "string"))
!
! See if it's already there.  If so, we remove.
!
	if (substring (oldfld, field))
		local newfld substr_remove(oldfld, field)
!
! Otherwise we just add it.  If there is a maximum number of fields,
! though, we have to enforce it.
!
	else
	    if (oldfld <> "(Undefined)")
	        local newfld (concat(oldfld, concat (",",field)))
	    else
		local newfld field
	    endif
	    local max pd_param(icon_component,"max-field","string")
	    if (max <> "(Undefined)")
	    	local imax pd_param(icon_component,"max-field","integer")
		if (n_occur (newfld, ",") >= imax)
			dm "beep"
			return
		endif
	    endif
	endif
!
! Store the thing.
!
	if (strlength (newfld) = 0)
		local worked (pd_removeparam (icon_component, "quadrants"))
	else
		param #icon_component quadrants #newfld
	endif
endprocedure


!
! A bunch of stuff for dealing with cross sections.
!
define widget xsect-right intmenu 'Cross-section right menu'
	title 'Cross-section Parameters'
	line
	entry 'Help' 'help Cross-section'
	entry 'Select Platforms' 'popup xs-platform'
	line
	entry 'Toggle altitude/pressure' 'toggle_bool "by-altitude" "false"'
	entry 'Zig-Zag Cross-section' \
		'parameter #icon_component "zig-zag" "true"' \
		(pd_param (icon_component,"zig-zag","string") = "true")
	entry 'Planar Cross-section' \
		'parameter #icon_component "zig-zag" "false"' \
		(pd_param (icon_component,"zig-zag","string") = "false")		
	line
endmenu

!
! Menu for cross-sections of balloon soundings over model data
! (put "require: contour,simple-color" into your PD if you use this...)
!
define widget xsect-model-balloon intmenu 'Balloon cross-section'
	title 'Balloon Cross-section'
	line
	entry 'Help' 'help Cross-section'
	entry 'Select Platforms' 'popup xs-platform'
	submenu 'Contour Parameters' 'contour-right'
endmenu

!
! Cross-section platform entry
!
define widget xs-platform form 'Upper air platforms'
	noheader
	popup xsp_popup
	label cross 'Cross-section Platform Selection'
	label comp 'component' color gray95 width 1
	newline
	label l1 'Platforms:'
	blank plat ' ' command 'xsp_enter' width 300
	newline
	button help 'Help' command 'help xsectplatform'
	button help 'List' command 'dm "help intro fest_soundings"'
	button current 'Get Current' command 'xsp_getcurrent'
	button clear 'Clear' command 'xsp_clear' 
	button apply 'Apply' command 'xsp_enter'
	button dismiss 'Dismiss' color red command 'popdown #ui$form'
	newline
	button 3V1 '3V1' command 'xsp_toggle s3v1'
	button 62K '62K' command 'xsp_toggle s62k'
	button ABQ 'ABQ' command 'xsp_toggle sabq'
	button ADQ 'ADQ' command 'xsp_toggle sadq'
	button AKZ 'AKZ' command 'xsp_toggle sakz'
	button AMA 'AMA' command 'xsp_toggle sama'
	button ANN 'ANN' command 'xsp_toggle sann'
	button AWS 'AWS' command 'xsp_toggle saws_a,saws_b'
	button BIS 'BIS' command 'xsp_toggle sbis'
	button BOI 'BOI' command 'xsp_toggle sboi'
	newline
	button CGO 'CGO' command 'xsp_toggle scgo'
	button COU 'COU' command 'xsp_toggle scou'
	button DDC 'DDC' command 'xsp_toggle sddc'
	button DEN 'DEN' command 'xsp_toggle sden'
	button DRA 'DRA' command 'xsp_toggle sdra'
	button EAR 'EAR' command 'xsp_toggle sear'
	button ELP 'ELP' command 'xsp_toggle selp'
	button ELY 'ELY' command 'xsp_toggle sely'
	button FSI 'FSI' command 'xsp_toggle sfsi'
	button GEG 'GEG' command 'xsp_toggle sgeg'
	newline
	button GGG 'GGG' command 'xsp_toggle sggg'
	button GGW 'GGW' command 'xsp_toggle sggw'
	button GJT 'GJT' command 'xsp_toggle sgjt'
	button GRB 'GRB' command 'xsp_toggle sgrb'
	button GTF 'GTF' command 'xsp_toggle sgtf'
	button GUY 'GUY' command 'xsp_toggle sguy'
	button HEN 'HEN' command 'xsp_toggle shen'
	button HON 'HON' command 'xsp_toggle shon'
	button HYS 'HYS' command 'xsp_toggle shys'
	button ILA 'ILA' command 'xsp_toggle sila'
	newline
	button INW 'INW' command 'xsp_toggle sinw'
	button IOW 'IOW' command 'xsp_toggle siow'
	button IRK 'IRK' command 'xsp_toggle sirk'
	button LBF 'LBF' command 'xsp_toggle slbf'
	button LIT 'LIT' command 'xsp_toggle slit'
	button LND 'LND' command 'xsp_toggle slnd'
	button MAF 'MAF' command 'xsp_toggle smaf'
	button MFR 'MFR' command 'xsp_toggle smfr'
	button MYF 'MYF' command 'xsp_toggle smyf'
	button NPS 'NPS' command 'xsp_toggle snps'
	newline
	button NTD 'NTD' command 'xsp_toggle sntd'
	button OAK 'OAK' command 'xsp_toggle soak'
	button OLM 'OLM' command 'xsp_toggle solm'
	button OMA 'OMA' command 'xsp_toggle soma'
	button OUN 'OUN' command 'xsp_toggle soun'
	button PAH 'PAH' command 'xsp_toggle spah'
	button PIA 'PIA' command 'xsp_toggle spia'
	button PRB 'PRB' command 'xsp_toggle sprb'
	button RAP 'RAP' command 'xsp_toggle srap'
	button RDD 'RDD' command 'xsp_toggle srdd'
	newline
	button SEP 'SEP' command 'xsp_toggle ssep'
	button SLB 'SLB' command 'xsp_toggle sslb'
	button SLC 'SLC' command 'xsp_toggle sslc'
	button SLE 'SLE' command 'xsp_toggle ssle'
	button STC 'STC' command 'xsp_toggle sstc'
	button STL 'STL' command 'xsp_toggle sstl'
	button TOP 'TOP' command 'xsp_toggle stop'
	button TUS 'TUS' command 'xsp_toggle stus'
	button UIL 'UIL' command 'xsp_toggle suil'
	button UMN 'UMN' command 'xsp_toggle sumn'
	newline
	button VBG 'VBG' command 'xsp_toggle svbg'
	button WIL 'WIL' command 'xsp_toggle swil'
	button WMC 'WMC' command 'xsp_toggle swmc'
	button WSE 'WSE' command 'xsp_toggle swse'
	button WVK 'WVK' command 'xsp_toggle swvk'
	button YAK 'YAK' command 'xsp_toggle syak'
	button YEV 'YEV' command 'xsp_toggle syev'
	button YSM 'YSM' command 'xsp_toggle sysm'
	button YVQ 'YVQ' command 'xsp_toggle syvq'
	button YXS 'YXS' command 'xsp_toggle syxs'
	newline
	button YXY 'YXY' command 'xsp_toggle syxy'
	button YYE 'YYE' command 'xsp_toggle syye'
	button YZT 'YZT' command 'xsp_toggle syzt'
	button L2D2_S2 'L2D2_S2' command 'xsp_toggle sl2d2_s2'
	button L2D2_P3 'L2D2_P3' command 'xsp_toggle sl2d2_p3_a,sl2d2_p3_b'
enddef
!
! Initialize an upper-air platform widget
!
procedure xsp_popup
	formtext #ui$form comp #icon_component
	local current pd_param(icon_component, 'platform', 'string')
	if (current = '')
		formtext #ui$form plat ''
	else
		formtext #ui$form plat #current
	endif
endprocedure

!
! Actually put this platform list into the plot component
!
procedure xsp_enter
	local plat getftext(ui$form,'plat')
	local comp getftext(ui$form,'comp')
	if (plat = '')
		parameter #comp 'platform' ''
	else
		parameter #comp 'platform' #plat
	endif
endprocedure

!
! Get the current platform list from the plot component
!
procedure xsp_getcurrent
	local comp getftext(ui$form,'comp')
	local current pd_param(comp, 'platform', 'string')
	if (current = '')
		formtext #ui$form plat ''
	else
		formtext #ui$form plat #current
	endif
endprocedure

!
! Clear the list
!
procedure xsp_clear
	formtext #ui$form plat ''
endprocedure

!
! Toggle the presence of a given upper-air platform.
!
procedure xsp_toggle platform string
	local oldplat getftext(ui$form,'plat')
!
! See if it's already there.  If so, we remove.
!
	if (substring (oldplat, platform))
		local newplat substr_remove(oldplat, platform)
!
! Otherwise we just add it.
!
	else
	    if (oldplat = '')
		local newplat platform
	    else
		local newplat concat3(oldplat,',',platform)
	    endif
	endif
!
! Update the widget
!
	if (newplat = '')
		formtext #ui$form plat ''
	else
		formtext #ui$form plat #newplat
	endif
endprocedure

!define widget xsect-plat intmenu "Cross section platforms"
!	title 'Soundings Used'
!	line
!	entry 'Storm Lake (SLB)' 'toggle_plat slb' \
!	   (substring(pd_param(icon_component, "platform", "string"),"slb"))
!	entry 'Iowa City (IOW)' 'toggle_plat iow' \
!	   (substring(pd_param(icon_component, "platform", "string"),"iow"))
!	entry 'Kearney (EAR)' 'toggle_plat sear' \
!	   (substring(pd_param(icon_component, "platform", "string"),"sear"))
!	entry 'Burlington (3V1)' 'toggle_plat 3v1' \
!	   (substring(pd_param(icon_component, "platform", "string"),"3v1"))
!	entry 'Hays (HYS)' 'toggle_plat shys' \
!	   (substring(pd_param(icon_component, "platform", "string"),"shys"))
!	entry 'Seneca (62K)' 'toggle_plat 62k' \
!	   (substring(pd_param(icon_component, "platform", "string"),"62k"))
!	entry 'Arkansas City (AKZ)' 'toggle_plat akz' \
!	   (substring(pd_param(icon_component, "platform", "string"),"akz"))
!	entry 'Kirksville (IRK)' 'toggle_plat irk' \
!	   (substring(pd_param(icon_component, "platform", "string"),"irk"))
!	entry 'Columbia (COU)' 'toggle_plat scou' \
!	   (substring(pd_param(icon_component, "platform", "string"),"scou"))
!	entry 'St. Louis (STL)' 'toggle_plat stl' \
!	   (substring(pd_param(icon_component, "platform", "string"),"stl"))
!	entry 'Henderson (HEN)' 'toggle_plat hen' \
!	   (substring(pd_param(icon_component, "platform", "string"),"hen"))
!	entry 'Guymon (GUY)' 'toggle_plat guy' \
!	   (substring(pd_param(icon_component, "platform", "string"),"guy"))
!	entry 'Mobile' 'toggle_plat mobile' \
!	   (substring(pd_param(icon_component, "platform", "string"),"mobile"))
!endmenu

!
! Basic boolean toggle.
!
procedure toggle_bool param string default string
	local current (pd_param (icon_component, param, "string"))
	if (current = "(Undefined)")
		parameter #icon_component #param #default
	elseif (current = "true")
		parameter #icon_component #param "false"
	else
		parameter #icon_component #param "true"
	endif
endprocedure



!
! XY Stuff.
!

define widget xy-wind-menu intmenu 'XY Winds menu'
	title 'XY Winds Options'
	line
	submenu 'Adjust Height' adjust-height
	submenu 'Select Representation' barb-vec
endmenu

define widget xy-simple-menu intmenu 'XY Simple menu'
	title 'XY Graph Options'
	line
	submenu 'Adjust Height' adjust-height
	submenu 'Select Representation' line-cross
	submenu 'Change Color' xy-color
endmenu

define widget xy-time-menu intmenu 'XY Time menu'
	title 'XY Graph Options'
	line
	submenu 'Select Representation' line-cross
	submenu 'Change Color' xy-color
endmenu

define widget xy-color intmenu 'Select XY Color'
	title 'Select XY Color'
	line
	entry 'white' 'do_xy_color white'
	entry 'gray' 'do_xy_color gray50'
	entry 'blue' 'do_xy_color blue'
	entry 'cyan' 'do_xy_color cyan'
	entry 'green' 'do_xy_color green'
	entry 'yellow' 'do_xy_color yellow'
	entry 'orange' 'do_xy_color orange'
	entry 'red' 'do_xy_color red'
	entry 'violet' 'do_xy_color violet'
endmenu

procedure do_xy_color colorname string
	local temp concat(concat(colorname,","),colorname)
	parameter #icon_component field-color #temp
	parameter #icon_component icon-color #colorname
	parameter #icon_component axis-t-color #colorname
	parameter #icon_component axis-b-color #colorname
	parameter #icon_component axis-r-color #colorname
	parameter #icon_component axis-l-color #colorname
endprocedure


define widget adjust-height intmenu 'Adjust Vertical Submenu'
	title 'Scale Height'
	line
	entry '0-1000 m/agl' 'adjust_height_scale set 0.0 1000.0'
	entry '0-4000 m/agl' 'adjust_height_scale set 0.0 4000.0'
	entry '0-9000 m/agl' 'adjust_height_scale set 0.0 9000.0'
	entry '0-18000 m/agl' 'adjust_height_scale set 0.0 18000.0'
	entry 'Manual Adjust...' 'adjust_height_scale get global m/agl'
endmenu

define widget barb-vec intmenu 'Choose between barb/vector repr.'
	title 'Select Representation'
	line
	entry 'Barb' 'parameter #icon_component representation-style barb'\
	    (pd_param(icon_component,"representation-style","string")="barb") 
	entry 'Vector' 'parameter #icon_component representation-style vector'\
	    (pd_param(icon_component,"representation-style","string")="vector") 
endmenu

define widget line-cross intmenu 'Select representation'
	title 'Select Representation'
	line
	entry 'Line' 'parameter #icon_component representation-style line'\
	    (pd_param(icon_component,"representation-style","string")="line")
	entry 'Point' 'parameter #icon_component representation-style point'\
	    (pd_param(icon_component,"representation-style","string")="point")
	entry 'X Mark' 'parameter #icon_component representation-style xmark'\
	    (pd_param(icon_component,"representation-style","string")="xmark")
	entry 'Cross' 'parameter #icon_component representation-style cross'\
	    (pd_param(icon_component,"representation-style","string")="cross")
endmenu

define widget prof-platforms intmenu 'Profiler Platforms'
	title 'Select Profiler Platforms'
	line
	entry 'List Profilers' 'dm "help intro fest_profilers.hlp"'
	entry 'AZCN5 Aztec' \
		'parameter #icon_component platform prof_azcn5_l,prof_azcn5_h'
	entry 'BLMM7 Bloomfield' \
		'parameter #icon_component platform prof_blmm7_l,prof_blmm7_h'
	entry 'BLRW3 Blue River' \
		'parameter #icon_component platform prof_blrw3_l,prof_blrw3_h'
	entry 'CNWM7 Conway' \
		'parameter #icon_component platform prof_cnwm7_l,prof_cnwm7_h'
	entry 'DQUA4 DeQueen' \
		'parameter #icon_component platform prof_dqua4_l,prof_dqua4_h'
	entry 'FBYN1 Fairbury' \
		'parameter #icon_component platform prof_fbyn1_l,prof_fbyn1_h'
	entry 'GDAC2 Granada' \
		'parameter #icon_component platform prof_gdac2_l,prof_gdac2_h'
	entry 'HKLO2 Haskell' \
		'parameter #icon_component platform prof_hklo2_l,prof_hklo2_h'
	entry 'HVLK1 Haviland' \
		'parameter #icon_component platform prof_hvlk1_l,prof_hvlk1_h'
	entry 'HBRK1 Hillsboro' \
		'parameter #icon_component platform prof_hbrk1_l,prof_hbrk1_h'
	entry 'JTNT2 Jayton' \
		'parameter #icon_component platform prof_jtnt2_l,prof_jtnt2_h'
	entry 'NRCM5 Kansas City' \
		'parameter #icon_component platform prof_nrcm5_l,prof_nrcm5_h'
	entry 'LMNO2 Lamont' \
		'parameter #icon_component platform prof_lmno2_l,prof_lmno2_h'
	entry 'LTHM7 Lathrop' \
		'parameter #icon_component platform prof_lthm7_l,prof_lthm7_h'
	entry 'RWDN1 McCook' \
		'parameter #icon_component platform prof_rwdn1_l,prof_rwdn1_h'
	entry 'MBWW4 Medicine Bow' \
		'parameter #icon_component platform prof_mbww4_l,prof_mbww4_h'
	entry 'MRRN1 Merriman' \
		'parameter #icon_component platform prof_mrrn1_l,prof_mrrn1_h'
	entry 'NLGN1 Neligh' \
		'parameter #icon_component platform prof_nlgn1_l,prof_nlgn1_h'
	entry 'NDSK1 Neodesha' \
		'parameter #icon_component platform prof_ndsk1_l,prof_ndsk1_h'
	entry 'OKOM6 Okolona' \
		'parameter #icon_component platform prof_okom6_l,prof_okom6_h'
	entry 'PATT2 Palestine' \
		'parameter #icon_component platform prof_patt2_l,prof_patt2_h'
	entry 'PLTC2 Platteville' \
		'parameter #icon_component platform prof_pltc2_l,prof_pltc2_h'
	entry 'PRCO2 Purcell' \
		'parameter #icon_component platform prof_prco2_l,prof_prco2_h'
	entry 'SLAI4 Slater' \
		'parameter #icon_component platform prof_slai4_l,prof_slai4_h'
	entry 'TCUN5 Tucumcari' \
		'parameter #icon_component platform prof_tcun5_l,prof_tcun5_h'
	entry 'VCIO2 Vici' \
		'parameter #icon_component platform prof_vcio2_l,prof_vcio2_h'
	entry 'WSMN5 White Sands' \
		'parameter #icon_component platform prof_wsmn5_l,prof_wsmn5_h'
	entry 'WNCI2 Winchester' \
		'parameter #icon_component platform prof_wnci2_l,prof_wnci2_h'
	entry 'WDLM5 Wood Lake' \
		'parameter #icon_component platform prof_wdlm5_l,prof_wdlm5_h'
endmenu

define widget sixmin-prof-plat intmenu '6 Minute Profiler Data'
	title 'Select Six Minute Profiler Data'
	line
endmenu

define widget global-fields-menu intmenu 'Global Fields Menu'
	title 'Select Fields'
	line
	submenu 'Profiler Fields' prof-parts
	submenu 'Aircraft Fields' air-parts
	submenu 'Sounding Fields' sound-parts
endmenu

define widget global-xytime-menu intmenu 'Global Fields Menu'
	title 'Select Fields'
	line
!	submenu 'Profiler Fields' time-prof-parts
	submenu 'Aster Fields' time-aster-parts
	submenu 'Aircraft Fields' time-air-parts
	submenu 'Mesonet Fields' time-meso-parts
endmenu

define widget prof-parts intmenu 'Profiler fields'
	title 'Select Profiler Fields'
	line
	entry 'Wind Speed' \
		'add_xy_component "prof_azcn5_l,prof_azcn5_h" "x-field wspd,wspd" "WindSpeed" c_xy_prof'
	entry 'Wind Direction' \
		 'add_xy_component "prof_azcn5_l,prof_azcn5_h" "x-field wdir,wdir" "WindDirection" c_xy_prof'
endmenu

define widget sound-parts intmenu 'Sounding fields'
	title 'Select Sounding Fields'
	line
	entry 'Wind Speed' \
	    'add_xy_component "sslb" "x-field wspd" "WindSpeed" c_xy_sound'
	entry 'Wind Direction' \
	    'add_xy_component "sslb" "x-field wdir" "WindDirection" c_xy_sound'
	entry 'Dew Point' \
	    'add_xy_component "sslb" "x-field dp" "DewPoint" c_xy_sound'
	entry 'Mixing Ratio' \
	    'add_xy_component "sslb" "x-field mr" "MixingRatio" c_xy_sound'
	entry 'Pressure' \
	    'add_xy_component "sslb" "x-field pres" "Pressure" c_xy_sound'
	entry 'QC Flag Pressure'\
	    'add_xy_component "sslb" "x-field qp" "QCFlag_Pressure" c_xy_sound'
	entry 'Relative Humidity' \
	    'add_xy_component "sslb" "x-field rh" "RelativeHumidity" c_xy_sound'
	entry 'QC Flag Relative Humidity'\
	    'add_xy_component "sslb" "x-field qrh" "QCFlag_RelativeHumidity" c_xy_sound'
	entry 'Potential Temperature' \
	    'add_xy_component "sslb" "x-field theta" "Theta" c_xy_sound'
	entry 'Equivalent Potential Temperature' \
	    'add_xy_component "sslb" "x-field theta_e" "ThetaE" c_xy_sound'
	entry 'Virtual Temperature' \
	    'add_xy_component "sslb" "x-field vt" "VirtualTemperature" c_xy_sound'
	entry 'Temperature' \
	    'add_xy_component "sslb" "x-field tdry" "Temperature" c_xy_sound'
	Entry 'QC Flag Temperature'\
	    'add_xy_component "sslb" "x-field qt" "QCFlag_Temperature" c_xy_sound'
	entry 'U wind'\
	    'add_xy_component "sslb" "x-field u_wind" "u_wind" c_xy_sound'
	entry 'QC Flag U wind'\
	    'add_xy_component "sslb" "x-field qu" "QCFlag_Uwind" c_xy_sound'
	entry 'V wind'\
	    'add_xy_component "sslb" "x-field v_wind" "v_wind" c_xy_sound'
	entry 'QC Flag V wind'\
	    'add_xy_component "sslb" "x-field qv" "QCFlag_Vwind" c_xy_sound'
	entry 'Elevation'\
	    'add_xy_component "sslb" "x-field elev "Elevation" c_xy_sound'
	entry 'Azimuth'\
	    'add_xy_component "sslb" "x-field azimuth" "Azimuth" c_xy_sound'
	entry 'Balloon Ascent Rate'\
	    'add_xy_component "sslb" "x-field dz" "Ascent_Rate" c_xy_sound'
	entry 'QC Flag Ascent Rate'\
	    'add_xy_component "sslb" "x-field qdz" "QCFlag_AscentRate" c_xy_sound'

endmenu

define widget time-prof-parts intmenu 'Profiler fields'
	title 'Select Profiler Fields'
	line
	entry 'Wind Speed' \
		 'add_xy_component "prof_azcn5_l,prof_azcn5_h" "y-field wspd,wspd" "WindSpeed" c_xytime_prof'
	entry 'Wind Direction' \
		 'add_xy_component "prof_azcn5_l,prof_azcn5_h" "y-field wspd,wdir" "WindDirection" c_xytime_prof'
endmenu

define widget time-aster-parts intmenu 'Aster fields'
	title 'Select Level'
	line
	submenu '10 m' time-aster_10m-parts
	submenu '7 m' time-aster_7m-parts
	submenu '4 m' time-aster_4m-parts
	submenu '2 m' time-aster_2m-parts	
	submenu '1 m' time-aster_1m-parts
	submenu 'Sfc' time-aster_gnd-parts
endmenu

define widget time-aster_10m-parts intmenu 'Aster fields at 10m'
	title 'Select Aster Fields'
	line
	entry 'u sonic 10m m/s' 'add_xy_component aster "y-field u_ati_10m" "u_sonic_10m_m/s" c_xytime_aster'
	entry 'u flags 10m' 'add_xy_component aster "y-field uflag_ati_10m" "u_flags_10m" c_xytime_aster'
	entry 'v sonic 10m m/s' 'add_xy_component aster "y-field v_ati_10m" "v_sonic_10m_m/s" c_xytime_aster'
	entry 'v flags 10m' 'add_xy_component aster "y-field vflag_ati_10m" "v_flags_10m" c_xytime_aster'
	entry 'w sonic 10m m/s' 'add_xy_component aster "y-field w_ati_10m" "w_sonic_10m_m/s" c_xytime_aster'
	entry 'w flags 10m' 'add_xy_component aster "y-field wflag_ati_10m" "w_flags_10m" c_xytime_aster'
	entry 'Tc sonic 10m C' 'add_xy_component aster "y-field tc_ati_10m" "Tc_sonic_10m_C" c_xytime_aster'
	entry 'Tc flags 10m' 'add_xy_component aster "y-field tcflag_ati_10m" "Tc_flags_10m" c_xytime_aster'
	entry 'T sonic 10m C' 'add_xy_component aster "y-field t_ati_10m" "T_sonic_10m" c_xytime_aster'
	entry 'H2O Density 10m g/m3' 'add_xy_component aster "y-field q_ati_10m" "H2O_Density_10m_g/m3" c_xytime_aster'
	entry 'u.u sonic 10m m2/s2' 'add_xy_component aster "y-field u_u_ati_10m" "u.u_sonic_10m_m2/s2" c_xytime_aster'
	entry 'v.v sonic 10m m2/s2' 'add_xy_component aster "y-field v_v_ati_10m" "v.v_sonic_10m_m2/s2" c_xytime_aster'
	entry 'w.w sonic 10m m2/s2' 'add_xy_component aster "y-field w_w_ati_10m" "w.w_sonic_10m_m2/s2" c_xytime_aster'
	entry 'u.v sonic 10m m2/s2' 'add_xy_component aster "y-field u_v_ati_10m" "u.v_sonic_10m_m2/s2" c_xytime_aster'
	entry 'u.w sonic 10m m2/s2' 'add_xy_component aster "y-field u_w_ati_10m" "u.w_sonic_10m_m2/s2" c_xytime_aster'
	entry 'v.w sonic 10m m2/s2' 'add_xy_component aster "y-field v_w_ati_10m" "v.w_sonic_10m_m2/s2" c_xytime_aster'
	entry 'u.Tc sonic 10m m_C/s' 'add_xy_component aster "y-field u_tc_ati_10m" "u.Tc_sonic_10m__m_C/s" c_xytime_aster'
	entry 'v.Tc sonic 10m m_C/s' 'add_xy_component aster "y-field v_tc_ati_10m" "v.Tc_sonic_10m__m_C/s" c_xytime_aster'
	entry 'w.Tc sonic 10m m_C/s' 'add_xy_component aster "y-field w_tc_ati_10m" "w.Tc_sonic_10m__m_C/s" c_xytime_aster'
	entry 'u.T sonic 10m m_C/s' 'add_xy_component aster "y-field u_t_ati_10m" "u.T_sonic_10m__m_C/s" c_xytime_aster'
	entry 'v.T sonic 10m m_C/s' 'add_xy_component aster "y-field v_t_ati_10m" "v.T_sonic_10m__m_C/s" c_xytime_aster'
	entry 'w.T sonic 10m m_C/s' 'add_xy_component aster "y-field w_t_ati_10m" "w.T_sonic_10m__m_C/s" c_xytime_aster'
	entry 'u.H2O sonic 10m g/m2_s' 'add_xy_component aster "y-field u_q_ati_10m" "u.H2O_sonic_10m__gm/m2_s" c_xytime_aster'
	entry 'v.H2O sonic 10m g/m2_s' 'add_xy_component aster "y-field v_q_ati_10m" "v.H2O_sonic_10m__gm/m2_s" c_xytime_aster'
	entry 'w.H2O sonic 10m g/m2_s' 'add_xy_component aster "y-field w_q_ati_10m" "w.H2O_sonic_10m__gm/m2_s" c_xytime_aster'
	entry 'u prop 10m m/s' 'add_xy_component aster "y-field u_prop_10m" "u_prop_10m_m/s" c_xytime_aster'
	entry 'v prop 10m m/s' 'add_xy_component aster "y-field v_prop_10m" "v_prop_10m_m/s" c_xytime_aster'
	entry 'Temperature 10m C' 'add_xy_component aster "y-field tdry_psyc_10m" "Temperature 10m_C" c_xytime_aster'
	entry 'Relative Humidity 10m percent' 'add_xy_component aster "y-field rh_psyc_10m" "Relative_Humidity_10m" c_xytime_aster'
endmenu

define widget time-aster_7m-parts intmenu 'Aster fields at 7m'
	title 'Select Aster Fields'
	line
	entry 'u prop 7m m/s' 'add_xy_component aster "y-field u_prop_7m" "u_prop_7m_m/s" c_xytime_aster'
	entry 'v prop 7m m/s' 'add_xy_component aster "y-field v_prop_7m" "v_prop_7m_m/s" c_xytime_aster'
	entry 'Temperature 7m C' 'add_xy_component aster "y-field tdry_psyc_7m" "Temperature 7m_C" c_xytime_aster'
	entry 'Relative Humidity 7m' 'add_xy_component aster "y-field rh_psyc_7m" "Relative_Humidity_7m" c_xytime_aster'
endmenu

define widget time-aster_4m-parts intmenu 'Aster fields at 4m'
	title 'Select Aster Fields'
	line
	entry 'u sonic 4m m/s' 'add_xy_component aster "y-field u_ati_4m" "u_sonic_4m_m/s" c_xytime_aster'
	entry 'u flags 4m' 'add_xy_component aster "y-field uflag_ati_4m" "u_flags_4m" c_xytime_aster'
	entry 'v sonic 4m m/s' 'add_xy_component aster "y-field v_ati_4m" "v_sonic_4m_m/s" c_xytime_aster'
	entry 'v flags 4m' 'add_xy_component aster "y-field vflag_ati_4m" "v_flags_4m" c_xytime_aster'
	entry 'w sonic 4m m/s' 'add_xy_component aster "y-field w_ati_4m" "w_sonic_4m_m/s" c_xytime_aster'
	entry 'w flags 4m' 'add_xy_component aster "y-field wflag_ati_4m" "w_flags_4m" c_xytime_aster'
	entry 'Tc sonic 4m C' 'add_xy_component aster "y-field tc_ati_4m" "Tc_sonic_4m_C" c_xytime_aster'
	entry 'Tc flags 4m' 'add_xy_component aster "y-field tcflag_ati_4m" "Tc_flags_4m" c_xytime_aster'
	entry 'T sonic 4m C' 'add_xy_component aster "y-field t_ati_4m" "T_sonic_4m_C" c_xytime_aster'
	entry 'H2O Density 4m g/m3' 'add_xy_component aster "y-field q_ati_4m" "H2O_Density_4m_g/m3" c_xytime_aster'
	entry 'u.u sonic 4m m2/s2' 'add_xy_component aster "y-field u_u_ati_4m" "u.u_sonic_4m_m2/s2" c_xytime_aster'
	entry 'v.v sonic 4m m2/s2' 'add_xy_component aster "y-field v_v_ati_4m" "v.v_sonic_4m_m2/s2" c_xytime_aster'
	entry 'w.w sonic 4m m2/s2' 'add_xy_component aster "y-field w_w_ati_4m" "w.w_sonic_4m_m2/s2" c_xytime_aster'
	entry 'u.v sonic 4m m2/s2' 'add_xy_component aster "y-field u_v_ati_4m" "u.v_sonic_4m_m2/s2" c_xytime_aster'
	entry 'u.w sonic 4m m2/s2' 'add_xy_component aster "y-field u_w_ati_4m" "u.w_sonic_4m_m2/s2" c_xytime_aster'
	entry 'v.w sonic 4m m2/s2' 'add_xy_component aster "y-field v_w_ati_4m" "v.w_sonic_4m_m2/s2" c_xytime_aster'
	entry 'u.Tc sonic 4m m_C/s' 'add_xy_component aster "y-field u_tc_ati_4m" "u.Tc_sonic_4m__m_C/s" c_xytime_aster'
	entry 'v.Tc sonic 4m m_C/s' 'add_xy_component aster "y-field v_tc_ati_4m" "v.Tc_sonic_4m__m_C/s" c_xytime_aster'
	entry 'w.Tc sonic 4m m_C/s' 'add_xy_component aster "y-field w_tc_ati_4m" "w.Tc_sonic_4m__m_C/s" c_xytime_aster'
	entry 'u.T sonic 4m m_C/s' 'add_xy_component aster "y-field u_t_ati_4m" "u.T_sonic_4m__m_C/s" c_xytime_aster'
	entry 'v.T sonic 4m m_C/s' 'add_xy_component aster "y-field v_t_ati_4m" "v.T_sonic_4m__m_C/s" c_xytime_aster'
	entry 'w.T sonic 4m m_C/s' 'add_xy_component aster "y-field w_t_ati_4m" "w.T_sonic_4m__m_C/s" c_xytime_aster'
	entry 'u.H2O sonic 4m g/m2_s' 'add_xy_component aster "y-field u_q_ati_4m" "u.H2O_sonic_4m__gm/m2_s" c_xytime_aster'
	entry 'v.H2O sonic 4m g/m2_s' 'add_xy_component aster "y-field v_q_ati_4m" "v.H2O_sonic_4m__gm/m2_s" c_xytime_aster'
	entry 'w.H2O sonic 4m g/m2_s' 'add_xy_component aster "y-field w_q_ati_4m" "w.H2O_sonic_4m__gm/m2_s" c_xytime_aster'
	entry 'u prop 4m m/s' 'add_xy_component aster "y-field u_prop_4m" "u_prop_4m_m/s" c_xytime_aster'
	entry 'v prop 4m m/s' 'add_xy_component aster "y-field v_prop_4m" "v_prop_4m_m/s" c_xytime_aster'
	entry 'Temperature 4m C' 'add_xy_component aster "y-field tdry_psyc_4m" "Temperature 4m_C" c_xytime_aster'
	entry 'Relative Humidity 4m percent' 'add_xy_component aster "y-field rh_psyc_4m" "Relative_Humidity_4m" c_xytime_aster'
endmenu

define widget time-aster_2m-parts intmenu 'Aster fields at 2m'
	title 'Select Aster Fields'
	line
	entry 'u prop 2m m/s' 'add_xy_component aster "y-field u_prop_2m" "u_prop_2m_m/s" c_xytime_aster'
	entry 'v prop 2m m/s' 'add_xy_component aster "y-field v_prop_2m" "v_prop_2m_m/s" c_xytime_aster'
	entry 'Temperature 2m C' 'add_xy_component aster "y-field tdry_psyc_2m" "Temperature 2m_C" c_xytime_aster'
	entry 'Relative Humidity 2m percent' 'add_xy_component aster "y-field rh_psyc_2m" "Relative_Humidity_2m" c_xytime_aster'
	entry 'Pressure_1 2m MB' 'add_xy_component aster "y-field press_baro1_2m" "Pressure_1_2m_MB" c_xytime_aster'
	entry 'Pressure_2 2m MB' 'add_xy_component aster "y-field press_baro2_2m" "Pressure_2_2m_MB" c_xytime_aster'
	entry 'Pressure_3 2m MB' 'add_xy_component aster "y-field press_baro3_2m" "Pressure_3_2m_MB" c_xytime_aster'
endmenu

define widget time-aster_1m-parts intmenu 'Aster fields at 1m'
	title 'Select Aster Fields'
	line
	entry 'u prop 1m m/s' 'add_xy_component aster "y-field u_prop_1m" "u_prop_1m_m/s" c_xytime_aster'
	entry 'v prop 1m m/s' 'add_xy_component aster "y-field v_prop_1m" "v_prop_1m_m/s" c_xytime_aster'
	entry 'Temperature 1m C' 'add_xy_component aster "y-field tdry_psyc_1m" "Temperature 1m_C" c_xytime_aster'
	entry 'Relative Humidity 1m percent' 'add_xy_component aster "y-field rh_psyc_1m" "Relative_Humidity_1m" c_xytime_aster'
endmenu

define widget time-aster_gnd-parts intmenu 'Aster fields at Ground'
	title 'Select Aster Fields'
	line
	entry 'T_dome LW_in K' 'add_xy_component aster "y-field pyg_in_dome" "T_dome_LW_in_K" c_xytime_aster'
	entry 'T_case LW_in K' 'add_xy_component aster "y-field pyg_in_case" "T_case_LW_in_K" c_xytime_aster'
	entry 'T_dome LW_out K' 'add_xy_component aster "y-field pyg_out_dome" "T_dome_LW_out_K" c_xytime_aster'
	entry 'T_case LW_out K' 'add_xy_component aster "y-field pyg_out_case" "T_case_LW_out_K" c_xytime_aster'
	entry 'Net Radiation W/m2' 'add_xy_component aster "y-field net_rad" "Net_Radiation_W/m2" c_xytime_aster'
	entry 'Incoming LW Radiation W/m2' 'add_xy_component aster "y-field pyg_in_rad" "Incoming_LW_Radiation_W/m2" c_xytime_aster'
	entry 'Outgoing LW Radiation W/m2' 'add_xy_component aster "y-field pyg_out_rad" "Outgoing_LW_Radiation_W/m2" c_xytime_aster'
	entry 'Incoming SW Radiation W/m2' 'add_xy_component aster "y-field psp_in_rad" "Incoming_SW_Radiation_W/m2" c_xytime_aster'
	entry 'Outgoing SW Radiation W/m2' 'add_xy_component aster "y-field psp_out_rad" "Outgoing_SW_Radiation_W/m2" c_xytime_aster'
	entry 'Surface Radiative Temp. C' 'add_xy_component aster "y-field t_surface_rad" "Sfc._Radiative_Temp_C" c_xytime_aster'
	entry 'Soil Heat Flux 8cm Furrow W/m2' 'add_xy_component aster "y-field G_fur_8cm" "Soil_Heat_Flux_8cm_W/m2" c_xytime_aster'
	entry 'Soil Heat Flux 8cm Intermediate W/m2' 'add_xy_component aster "y-field G_int_8cm" "Soil_Heat_Flux_8cm_W/m2" c_xytime_aster'
	entry 'Soil Heat Flux 8cm Ridge W/m2' 'add_xy_component aster "y-field G_rid_8cm" "Soil_Heat_Flux_8cm_W/m2" c_xytime_aster'
	entry 'T_Soil 7cm Forrow W/m2' 'add_xy_component aster "y-field t_fur_7cm" "T_Soil_Forrow_7cm_W/m2" c_xytime_aster'
	entry 'T_Soil 5cm Forrow W/m2' 'add_xy_component aster "y-field t_fur_5cm" "T_Soil_Forrow_5cm_W/m2" c_xytime_aster'
	entry 'T_Soil 3cm Forrow W/m2' 'add_xy_component aster "y-field t_fur_3cm" "T_Soil_Forrow_3cm_W/m2" c_xytime_aster'
	entry 'T_Soil 1cm Forrow W/m2' 'add_xy_component aster "y-field t_fur_1cm" "T_Soil_Forrow_1cm_W/m2" c_xytime_aster'
	entry 'T_Soil 7cm Intermediate W/m2' 'add_xy_component aster "y-field t_int_7cm" "T_Soil_Intermediate_7cm_W/m2" c_xytime_aster'
	entry 'T_Soil 5cm Intermediate W/m2' 'add_xy_component aster "y-field t_int_5cm" "T_Soil_Intermediate_5cm_W/m2" c_xytime_aster'
	entry 'T_Soil 3cm Intermediate W/m2' 'add_xy_component aster "y-field t_int_3cm" "T_Soil_Intermediate_3cm_W/m2" c_xytime_aster'
	entry 'T_Soil 1cm Intermediate W/m2' 'add_xy_component aster "y-field t_int_1cm" "T_Soil_Intermediate_1cm_W/m2" c_xytime_aster'
	entry 'T_Soil 7cm Ridge W/m2' 'add_xy_component aster "y-field t_rid_7cm" "T_Soil_Ridge_7cm_W/m2" c_xytime_aster'
	entry 'T_Soil 5cm Ridge W/m2' 'add_xy_component aster "y-field t_rid_5cm" "T_Soil_Ridge_5cm_W/m2" c_xytime_aster'
	entry 'T_Soil 3cm Ridge W/m2' 'add_xy_component aster "y-field t_rid_3cm" "T_Soil_Ridge_3cm_W/m2" c_xytime_aster'
	entry 'T_Soil 1cm Ridge W/m2' 'add_xy_component aster "y-field t_rid_1cm" "T_Soil_Ridge_1cm_W/m2" c_xytime_aster'
endmenu

define widget time-meso-parts intmenu 'Mesonet fields'
	title 'Select Mesonet Fields'
	line
	entry 'Station Pressure mb' 'add_xy_component surface_5min/boulder "y-field pres" "Station_Pressure_mb" c_xytime_meso'
	entry 'QC Flag - Pressure' 'add_xy_component surface_5min/boulder "y-field qc_flag" "QC_Flag_Pressure" c_xytime_meso'
	entry 'Reported Sea-level Pressure mb' 	'add_xy_component surface_5min/boulder "y-field cpres0" "Reported_Sea-level_Pressure_mb" c_xytime_meso'
	entry 'QC Flag - CPressure' 'add_xy_component surface_5min/boulder "y-field qc_flag2" "QC_Flag_CPressure" c_xytime_meso'
	entry 'Calculated Sea-levelPressure mb' 'add_xy_component surface_5min/boulder "y-field computed_sea_lev_pres" "Computed_Sea-level_Pressure_mb" c_xytime_meso'
	entry 'QC Flag - SPressure' 'add_xy_component surface_5min/boulder "y-field qc_flag3" "QC_Flag_SPressure" c_xytime_meso'
	entry 'Temperature C' 'add_xy_component surface_5min/boulder "y-field tdry" "Temperature_C" c_xytime_meso'
	entry 'QC Flag - Temperature' 'add_xy_component surface_5min/boulder "y-field qc_flag4" "QC_Flag_Temperature" c_xytime_meso'
	entry 'Dew Point C' 'add_xy_component surface_5min/boulder "y-field dp" "DewPoint" c_xytime_meso'
	entry 'QC Flag - Dew Point' 'add_xy_component surface_5min/boulder "y-field qc_flag5" "QC_Flag_DewPoint" c_xytime_meso'
	entry 'Wind Speed' 'add_xy_component surface_5min/boulder "y-field wspd" "WindSpeed" c_xytime_meso'
	entry 'QC Flag - Wind Speed' 'add_xy_component surface_5min/boulder "y-field qc_flag6" "QC_Flag_WindSpeed" c_xytime_meso'
	entry 'Wind Direction' 'add_xy_component surface_5min/boulder "y-field wdir" "WindDirection" c_xytime_meso'
	entry 'QC Flag - Wind Direction' 'add_xy_component surface_5min/boulder "y-field qc_flag7" "QC_Flag_WindDirection" c_xytime_meso'
	entry 'Wind Maximum m/s' 'add_xy_component surface_5min/boulder "y-field wmax" "WindMaximum" c_xytime_meso'
	entry 'QC Flag - Wind Max' 'add_xy_component surface_5min/boulder "y-field qc_flag9" "QC_Flag_WindMax" c_xytime_meso'
	entry 'Rain kg/m2' 'add_xy_component surface_5min/boulder "y-field rain" "Rain" c_xytime_meso'
	entry 'QC Flag - Rain' 'add_xy_component surface_5min/boulder "y-field qc_flag8" "QC_Flag_Rain" c_xytime_meso'
	entry 'Weather Code' 'add_xy_component surface_5min/boulder "y-field weather_code" "WeatherCode" c_xytime_meso'
	entry 'QC Flag - Weather Code' 'add_xy_component surface_5min/boulder "y-field qc_flag10" "QC_Flag_WeatherCode" c_xytime_meso'
	entry 'Horizontal Visability m' 'add_xy_component surface_5min/boulder "y-field horiz_vis" "Visability" c_xytime_meso'
	entry 'QC Flag - Visability' 'add_xy_component surface_5min/boulder "y-field qc_flag11" "QC_Flag_Visability" c_xytime_meso'
	entry 'Ceiling Height (first layer) feet' 'add_xy_component surface_5min/boulder "y-field ceiling_height" "Ceiling_Height" c_xytime_meso'
	entry 'Ceiling Flag (first layer)' 'add_xy_component surface_5min/boulder "y-field ceiling_flag" "Ceiling_Flag" c_xytime_meso'
	entry 'QC Flag - Ceiling First' 'add_xy_component surface_5min/boulder "y-field qc_flag12" "QC_Flag_CeilingFirst" c_xytime_meso'
	entry 'Cloud Amount (first layer)' 'add_xy_component surface_5min/boulder "y-field cloud_amt" "Cloud_Amount" c_xytime_meso'
	entry 'QC Flag - Cloud Amount' 'add_xy_component surface_5min/boulder "y-field qc_flag13" "QC_Flag_CloudAmount" c_xytime_meso'
	entry 'Ceiling Height (second layer) feet' 'add_xy_component surface_5min/boulder "y-field ceiling_height2" "Ceiling_Height" c_xytime_meso'
	entry 'Ceiling Flag (second layer)' 'add_xy_component surface_5min/boulder "y-field ceiling_flag2" "Ceiling_Flag" c_xytime_meso'
	entry 'QC Flag - Ceiling Second' 'add_xy_component surface_5min/boulder "y-field qc_flag14" "QC_Flag_CeilingSecond" c_xytime_meso'
	entry 'Cloud Amount (second layer)' 'add_xy_component surface_5min/boulder "y-field cloud_amt2" "Cloud_Amount" c_xytime_meso'
	entry 'QC Flag - Cloud Amount Second' 'add_xy_component surface_5min/boulder "y-field qc_flag15" "QC_Flag_CloudSecond" c_xytime_meso'
	entry 'Ceiling Height (third layer) feet' 'add_xy_component surface_5min/boulder "y-field ceiling_height3" "Ceiling_Height" c_xytime_meso'
	entry 'Ceiling Flag (third layer)' 'add_xy_component surface_5min/boulder "y-field ceiling_flag3" "Ceiling_Flag" c_xytime_meso'
	entry 'QC Flag - Ceiling Third' 'add_xy_component surface_5min/boulder "y-field qc_flag16" "QC_Flag_CeilingThird" c_xytime_meso'
	entry 'Cloud Amount (third layer)' 'add_xy_component surface_5min/boulder "y-field cloud_amt3" "Cloud_Amount" c_xytime_meso'
	entry 'QC Flag - Cloud Amount Third' 'add_xy_component surface_5min/boulder "y-field qc_flag17" "QC_Flag_CloudThird" c_xytime_meso'
	entry 'East Wind Component m/s' 'add_xy_component surface_5min/boulder "y-field u_wind" "U_Wind" c_xytime_meso'
	entry 'West Wind Component m/s' 'add_xy_component surface_5min/boulder "y-field v_wind" "V_Wind" c_xytime_meso'
	entry 'Station Altitude km' 'add_xy_component surface_5min/boulder "y-field alt" "Altitude" c_xytime_meso'
!	entry 'Potential Temperature' 'add_xy_component surface_5min/boulder "y-field pt" "PotentialTemperature" c_xytime_meso'
!	entry 'Equivalent Potential Temperature' 'add_xy_component surface_5min/boulder "y-field ept" "EquivalentPotentialTemperature" c_xytime_meso'
!	entry 'Relative Humidity' 'add_xy_component surface_5min/boulder "y-field rh" "RelativeHumidity" c_xytime_meso'
endmenu

!
! Add an xy graph component to a plot description (from the global icon).
!
procedure add_xy_component platform string field string label string compname string
	local qlabel quote(label)
!
! Set the platform name.
!
	dm concat("parameter ",concat(compname,concat(" ",concat(compname,concat(" platform ",platform)))))
!
! Set the field name.
!
	dm concat("parameter ",concat(compname,concat(" ",concat(compname,concat(" ",field)))))
!
! Set all of the axis labels.
!
	dm concat("parameter ",concat(compname,concat(" ",concat(compname,concat(" axis-l-label ",qlabel)))))
	dm concat("parameter ",concat(compname,concat(" ",concat(compname,concat(" axis-r-label ",qlabel)))))
	dm concat("parameter ",concat(compname,concat(" ",concat(compname,concat(" axis-b-label ",qlabel)))))
	dm concat("parameter ",concat(compname,concat(" ",concat(compname,concat(" axis-t-label ",qlabel)))))
!
! Add the thing.
!
	dm concat(concat("add ",compname),concat(concat(" ",compname),concat(" ",ourname)))
endprocedure

define widget air-parts intmenu 'Aircraft platforms'
	title 'Select Aircraft Platforms'
	line
	submenu 'Storm1-Wyoming King Air' 'wka-air-parts'
	submenu 'P3-Fields' 'p3-air-parts-1'
	submenu 'P3-More Fields' 'p3-air-parts-2'
	submenu 'Storm4-U of Washington C131' 'c130-air-parts'
	submenu 'Storm2-NCAR King Air' 'nca-air-parts-1'
	submenu	'Storm2-More Fields' 'nca-air-parts-2'
endmenu

define widget time-air-parts intmenu 'Aircraft platforms'
	title 'Select Aircraft Platforms'
	line
	submenu 'Storm1-Wyoming King Air' 'time-wka-air-parts'
	submenu 'P3-Fields' 'time-p3-air-parts-1'
	submenu 'P3-More Fields' 'time-p3-air-parts-2'
	submenu 'Storm4-U of Washington C131' 'time-c130-air-parts'
	submenu 'Storm2-NCAR King Air' 'time-nca-air-parts-1'
	submenu 'Storm2-More Fields' 'time-nca-air-parts-2'
endmenu

define widget c130-air-parts intmenu 'C130 Air Fields'
	title 'Select Field'
	line
	entry 'Pressure Altitude KM' 'add_xy_component storm4 "x-field alt" "Pressure_Alt_KM" c_xy_air'
	entry 'Static Pressure' 'add_xy_component storm4 "x-field pstat" "Pressure" c_xy_air'
	entry 'Wind Speed m/s' 'add_xy_component storm4 "x-field wspd" "Wind_Speed_m/s" c_xy_air'
	entry 'Wind Direction deg' 'add_xy_component storm4 "x-field wdir" "Wind_Direction" c_xy_air'
	entry 'Temperature C' 'add_xy_component storm4 "x-field tstat" "Temperature__C" c_xy_air'
	entry 'Dew Point C' 'add_xy_component storm4 "x-field dp" "Dew_Point_C" c_xy_air'
	entry 'Potential Temperature C' 'add_xy_component storm4 "x-field theta" "Potential_Temperature_C" c_xy_air'
	entry 'Equivalent Potential Temperature C' 'add_xy_component storm4 "x-field thtae" "Equivalent_Potential_Temperature_C" c_xy_air'
	entry 'Liquid Water (JW) g/m3'  'add_xy_component storm4 "x-field lwjw0" "Liquid_Water_(JW)_g/m3" c_xy_air'
	entry 'Liquid Water (King) g/m3'   'add_xy_component storm4 "x-field lwkg" "Liquid_Water_(King)_g/m3" c_xy_air'
	entry 'Ice Particle Rate N/Liter'  'add_xy_component storm4 "x-field oipc1" "Ice_Particle_Rate_N/Liter" c_xy_air'
	entry 'FSSP Particle Rate N/cm3'  'add_xy_component storm4 "x-field fsprt" "FSSP_Particle_Rate_N/cm3" c_xy_air'
	entry 'Turbulence cm2/s' 'add_xy_component storm4 "x-field turb" "Turbulence" c_xy_air'
endmenu

define widget time-c130-air-parts intmenu 'C130 Air Fields'
	title 'Select Field'
	line
	entry 'Pressure Altitude KM' 'add_xy_component storm4 "y-field alt" "Pressure_Alt_KM" c_xytime_air'
	entry 'Static Pressure' 'add_xy_component storm4 "y-field pstat" "Pressure" c_xytime_air'
	entry 'Wind Speed m/s' 'add_xy_component storm4 "y-field wspd" "Wind_Speed_m/s" c_xytime_air'
	entry 'Wind Direction deg' 'add_xy_component storm4 "y-field wdir" "Wind_Direction" c_xytime_air'
	entry 'Temperature C' 'add_xy_component storm4 "y-field tstat" "Temperature__C" c_xytime_air'
	entry 'Dew Point C' 'add_xy_component storm4 "y-field dp" "Dew_Point_C" c_xytime_air'
	entry 'Potential Temperature C' 'add_xy_component storm4 "y-field thtae" "Potential_Temperature_C" c_xytime_air'
	entry 'Equivalent Potential Temperature C' 'add_xy_component storm4 "y-field thetae" "Equivalent_Potential_Temperature_C" c_xytime_air'
	entry 'Liquid Water (JW) g/m3'  'add_xy_component storm4 "y-field lwjw0" "Liquid_Water_(JW)_g/m3" c_xytime_air'
	entry 'Liquid Water (King) g/m3'   'add_xy_component storm4 "y-field lwkg" "Liquid_Water_(King)_g/m3" c_xytime_air'
	entry 'Ice Particle Rate N/Liter'  'add_xy_component storm4 "y-field oipc1" "Ice_Particle_Rate_N/Liter" c_xytime_air'
	entry 'FSSP Particle Rate N/cm3'  'add_xy_component storm4 "y-field fsprt" "FSSP_Particle_Rate_N/cm3" c_xytime_air'
	entry 'Turbulence cm2/s' 'add_xy_component storm4 "y-field turb" "Turbulence" c_xytime_air'
endmenu


define widget p3-air-parts-1 intmenu 'P3 Air Fields'
	title 'Select Field'
	line
	entry 'Radar Altitude km' 'add_xy_component p3 "x-field alt" "Radar_Altitude" c_xy_air'
	entry 'Pressure mb' 'add_xy_component p3 "x-field ps" "Pressure" c_xy_air'
	entry 'Ambient Temperature C' 'add_xy_component p3 "x-field ta" "Ambient_Temperature" c_xy_air'
	entry 'Dewpoint Sensor C' 'add_xy_component p3 "x-field tw1" "Dewpoint_Sensor" c_xy_air'
	entry 'Radiometer (Down) C' 'add_xy_component p3 "x-field rd" "Radiometer_(Down)" c_xy_air'
	entry 'Radiometer (Side) C' 'add_xy_component p3 "x-field rs" "Radiometer_(Side)" c_xy_air'
	entry 'Ground Speed m/s' 'add_xy_component p3 "x-field gs" "Ground_Speed" c_xy_air'
	entry 'True Airspeed m/s' 'add_xy_component p3 "x-field ts" "True_Airspeed" c_xy_air'
	entry 'A/C Vertical velocity m/s' 'add_xy_component p3 "x-field wgs" "A/C_Vertical_velocity" c_xy_air'
	entry 'Track deg' 'add_xy_component p3 "x-field tk" "Track" c_xy_air'
	entry 'Heading (true) deg' 'add_xy_component p3 "x-field hd" "Heading_(true)" c_xy_air'
	entry 'Pitch deg' 'add_xy_component p3 "x-field pc" "Pitch" c_xy_air'
	entry 'Roll deg' 'add_xy_component p3 "x-field rl" "Roll" c_xy_air'
	entry 'Attack Angle deg' 'add_xy_component p3 "x-field aa" "Attack_Angle" c_xy_air'
	entry 'Slip Angle deg' 'add_xy_component p3 "x-field sa" "Slip_Angle" c_xy_air'
	entry 'Liquid Water Content g/m3' 'add_xy_component p3 "x-field lw" "Liquid_Water_Content" c_xy_air'
	entry 'Dynamic Pressure mb' 'add_xy_component p3 "x-field pq" "Dynamic_Pressure" c_xy_air'
	entry 'Dewpoint Temperature C' 'add_xy_component p3 "x-field td" "Dewpoint_Temperature" c_xy_air'
	entry 'Radiometer Up C' 'add_xy_component p3 "x-field ru" "Radiometer_Up" c_xy_air'
	entry 'E/W Velocity of Tail m/s' 'add_xy_component p3 "x-field utail" "E/W_Velocity_of_Tail" c_xy_air'
	entry 'N/S Velocity of Tail m/s' 'add_xy_component p3 "x-field vtail" "N/S_Velocity_of_Tail" c_xy_air'
	entry 'Vertical Velocity of Tail m/s' 'add_xy_component p3 "x-field wtail" "Vertical_Velocity_of_Tail" c_xy_air'
	entry 'Geopotential Altitude m' 'add_xy_component p3 "x-field ga" "Geopotential_Altitude" c_xy_air'
	entry 'Pressure Altitude m' 'add_xy_component p3 "x-field pa" "Pressure_Altitude" c_xy_air'
	entry 'D Value m' 'add_xy_component p3 "x-field dv" "D_Value" c_xy_air'
	entry 'Height Standard Pres Surface m' 'add_xy_component p3 "x-field ht" "Height_Standard_Pres_Surface" c_xy_air'
	entry 'Surface Pressure mb' 'add_xy_component p3 "x-field sp" "Surface_Pressure" c_xy_air'
	entry 'Relative Humidity %' 'add_xy_component p3 "x-field rh" "Relative_Humidity" c_xy_air'
	entry 'Virtual Temperature K' 'add_xy_component p3 "x-field tv" "Virtual_Temperature" c_xy_air'
	entry 'Vertical Airspeed m/s' 'add_xy_component p3 "x-field was" "Vertical_Airspeed" c_xy_air'
endmenu

define widget p3-air-parts-2 intmenu 'P3 Air Fields'
	title 'Select Field'
	line
	entry 'Ratio Specific Heats ' 'add_xy_component p3 "x-field gm" "Ratio_Specific_Heats" c_xy_air'
	entry 'Mach Number dim' 'add_xy_component p3 "x-field ama" "Mach_Number" c_xy_air'
	entry 'Drift Angle deg' 'add_xy_component p3 "x-field da" "Drift_Angle" c_xy_air'
	entry 'E/W Ground Speed m/s' 'add_xy_component p3 "x-field gsx" "E/W_Ground_Speed" c_xy_air'
	entry 'N/S Ground Speed m/s' 'add_xy_component p3 "x-field gsy" "N/S_Ground_Speed" c_xy_air'
	entry 'E/W True Airspeed m/s' 'add_xy_component p3 "x-field tx" "E/W_True_Airspeed" c_xy_air'
	entry 'N/S True Airspeed m/s' 'add_xy_component p3 "x-field ty" "N/S_True_Airspeed" c_xy_air'
	entry 'E/W Wind Speed m/s' 'add_xy_component p3 "x-field wx" "E/W_Wind_Speed" c_xy_air'
	entry 'N/S Wind Speed m/s' 'add_xy_component p3 "x-field wy" "N/S_Wind_Speed" c_xy_air'
	entry 'Vertical Wind Speed m/s' 'add_xy_component p3 "x-field wz" "Vertical_Wind_Speed" c_xy_air'
	entry 'Wind Speed m/s' 'add_xy_component p3 "x-field ws" "Wind_Speed" c_xy_air'
	entry 'Wind Direction deg' 'add_xy_component p3 "x-field wd" "Wind_Direction" c_xy_air'
	entry 'Vapor Pressure mb' 'add_xy_component p3 "x-field ee" "Vapor_Pressure" c_xy_air'
	entry 'Mixing Ratio g/kg' 'add_xy_component p3 "x-field mr" "Mixing_Ratio" c_xy_air'
	entry 'Potential Temperature K' 'add_xy_component p3 "x-field pt" "Potential_Temperature" c_xy_air'
	entry 'Equivalent Potential Temperature K' 'add_xy_component p3 "x-field et" "Equivalent_Potential_Temperature" c_xy_air'
	entry 'E/W Average Wind m/s' 'add_xy_component p3 "x-field wxb" "E/W_Average_Wind" c_xy_air'
	entry 'N/S Average Wind m/s' 'add_xy_component p3 "x-field wyb" "N/S_Average_Wind" c_xy_air'
	entry 'Average Wind Speed m/s' 'add_xy_component p3 "x-field wsb" "Average_Wind_Speed" c_xy_air'
	entry 'Average Wind Direction deg' 'add_xy_component p3 "x-field wdb" "Average_Wind_Direction" c_xy_air'
	entry 'Vertical Accelerometer #1 unknown' 'add_xy_component p3 "x-field av1" "Vertical_Accelerometer_#1" c_xy_air'
	entry 'Vertical Accelerometer #2 unknown' 'add_xy_component p3 "x-field av2" "Vertical_Accelerometer_#2" c_xy_air'
	entry 'Seconds Wind Averaged Over secs' 'add_xy_component p3 "x-field wac" "Seconds_Wind_Averaged_Over" c_xy_air'
	entry 'AXBT1 unknown' 'add_xy_component p3 "x-field bt1" "AXBT1" c_xy_air'
	entry 'AXBT2 unknown' 'add_xy_component p3 "x-field bt2" "AXBT2" c_xy_air'
	entry 'AXBT3 unknown' 'add_xy_component p3 "x-field bt3" "AXBT3" c_xy_air'
endmenu

define widget time-p3-air-parts-1 intmenu 'P3 Air Fields'
	title 'Select Field'
	line
	entry 'Radar Altitude km' 'add_xy_component p3 "y-field alt" "Radar_Altitude" c_xytime_air'
	entry 'Pressure mb' 'add_xy_component p3 "y-field ps" "Pressure" c_xytime_air'
	entry 'Ambient Temperature C' 'add_xy_component p3 "y-field ta" "Ambient_Temperature" c_xytime_air'
	entry 'Dewpoint Sensor C' 'add_xy_component p3 "y-field tw1" "Dewpoint_Sensor" c_xytime_air'
	entry 'Radiometer (Down) C' 'add_xy_component p3 "y-field rd" "Radiometer_(Down)" c_xytime_air'
	entry 'Radiometer (Side) C' 'add_xy_component p3 "y-field rs" "Radiometer_(Side)" c_xytime_air'
	entry 'Ground Speed m/s' 'add_xy_component p3 "y-field gs" "Ground_Speed" c_xytime_air'
	entry 'True Airspeed m/s' 'add_xy_component p3 "y-field ts" "True_Airspeed" c_xytime_air'
	entry 'A/C Vertical velocity m/s' 'add_xy_component p3 "y-field wgs" "A/C_Vertical_velocity" c_xytime_air'
	entry 'Track deg' 'add_xy_component p3 "y-field tk" "Track" c_xytime_air'
	entry 'Heading (true) deg' 'add_xy_component p3 "y-field hd" "Heading_(true)" c_xytime_air'
	entry 'Pitch deg' 'add_xy_component p3 "y-field pc" "Pitch" c_xytime_air'
	entry 'Roll deg' 'add_xy_component p3 "y-field rl" "Roll" c_xytime_air'
	entry 'Attack Angle deg' 'add_xy_component p3 "y-field aa" "Attack_Angle" c_xytime_air'
	entry 'Slip Angle deg' 'add_xy_component p3 "y-field sa" "Slip_Angle" c_xytime_air'
	entry 'Liquid Water Content g/m3' 'add_xy_component p3 "y-field lw" "Liquid_Water_Content" c_xytime_air'
	entry 'Dynamic Pressure mb' 'add_xy_component p3 "y-field pq" "Dynamic_Pressure" c_xytime_air'
	entry 'Dewpoint Temperature C' 'add_xy_component p3 "y-field td" "Dewpoint_Temperature" c_xytime_air'
	entry 'Radiometer Up C' 'add_xy_component p3 "y-field ru" "Radiometer_Up" c_xytime_air'
	entry 'E/W Velocity of Tail m/s' 'add_xy_component p3 "y-field utail" "E/W_Velocity_of_Tail" c_xytime_air'
	entry 'N/S Velocity of Tail m/s' 'add_xy_component p3 "y-field vtail" "N/S_Velocity_of_Tail" c_xytime_air'
	entry 'Vertical Velocity of Tail m/s' 'add_xy_component p3 "y-field wtail" "Vertical_Velocity_of_Tail" c_xytime_air'
	entry 'Geopotential Altitude m' 'add_xy_component p3 "y-field ga" "Geopotential_Altitude" c_xytime_air'
	entry 'Pressure Altitude m' 'add_xy_component p3 "y-field pa" "Pressure_Altitude" c_xytime_air'
	entry 'D Value m' 'add_xy_component p3 "y-field dv" "D_Value" c_xytime_air'
	entry 'Height Standard Pres Surface m' 'add_xy_component p3 "y-field ht" "Height_Standard_Pres_Surface" c_xytime_air'
	entry 'Surface Pressure mb' 'add_xy_component p3 "y-field sp" "Surface_Pressure" c_xytime_air'
	entry 'Relative Humidity %' 'add_xy_component p3 "y-field rh" "Relative_Humidity" c_xytime_air'
	entry 'Virtual Temperature K' 'add_xy_component p3 "y-field tv" "Virtual_Temperature" c_xytime_air'
	entry 'Vertical Airspeed m/s' 'add_xy_component p3 "y-field was" "Vertical_Airspeed" c_xytime_air'
endmenu

define widget time-p3-air-parts-2 intmenu 'P3 Air Fields'
	title 'Select Field'
	line
	entry 'Ratio Specific Heats ' 'add_xy_component p3 "y-field gm" "Ratio_Specific_Heats" c_xytime_air'
	entry 'Mach Number dim' 'add_xy_component p3 "y-field ama" "Mach_Number" c_xytime_air'
	entry 'Drift Angle deg' 'add_xy_component p3 "y-field da" "Drift_Angle" c_xytime_air'
	entry 'E/W Ground Speed m/s' 'add_xy_component p3 "y-field gsx" "E/W_Ground_Speed" c_xytime_air'
	entry 'N/S Ground Speed m/s' 'add_xy_component p3 "y-field gsy" "N/S_Ground_Speed" c_xytime_air'
	entry 'E/W True Airspeed m/s' 'add_xy_component p3 "y-field tx" "E/W_True_Airspeed" c_xytime_air'
	entry 'N/S True Airspeed m/s' 'add_xy_component p3 "y-field ty" "N/S_True_Airspeed" c_xytime_air'
	entry 'E/W Wind Speed m/s' 'add_xy_component p3 "y-field wx" "E/W_Wind_Speed" c_xytime_air'
	entry 'N/S Wind Speed m/s' 'add_xy_component p3 "y-field wy" "N/S_Wind_Speed" c_xytime_air'
	entry 'Vertical Wind Speed m/s' 'add_xy_component p3 "y-field wz" "Vertical_Wind_Speed" c_xytime_air'
	entry 'Wind Speed m/s' 'add_xy_component p3 "y-field ws" "Wind_Speed" c_xytime_air'
	entry 'Wind Direction deg' 'add_xy_component p3 "y-field wd" "Wind_Direction" c_xytime_air'
	entry 'Vapor Pressure mb' 'add_xy_component p3 "y-field ee" "Vapor_Pressure" c_xytime_air'
	entry 'Mixing Ratio g/kg' 'add_xy_component p3 "y-field mr" "Mixing_Ratio" c_xytime_air'
	entry 'Potential Temperature K' 'add_xy_component p3 "y-field pt" "Potential_Temperature" c_xytime_air'
	entry 'Equivalent Potential Temperature K' 'add_xy_component p3 "y-field et" "Equivalent_Potential_Temperature" c_xytime_air'
	entry 'E/W Average Wind m/s' 'add_xy_component p3 "y-field wxb" "E/W_Average_Wind" c_xytime_air'
	entry 'N/S Average Wind m/s' 'add_xy_component p3 "y-field wyb" "N/S_Average_Wind" c_xytime_air'
	entry 'Average Wind Speed m/s' 'add_xy_component p3 "y-field wsb" "Average_Wind_Speed" c_xytime_air'
	entry 'Average Wind Direction deg' 'add_xy_component p3 "y-field wdb" "Average_Wind_Direction" c_xytime_air'
	entry 'Vertical Accelerometer #1 unknown' 'add_xy_component p3 "y-field av1" "Vertical_Accelerometer_#1" c_xytime_air'
	entry 'Vertical Accelerometer #2 unknown' 'add_xy_component p3 "y-field av2" "Vertical_Accelerometer_#2" c_xytime_air'
	entry 'Seconds Wind Averaged Over secs' 'add_xy_component p3 "y-field wac" "Seconds_Wind_Averaged_Over" c_xytime_air'
	entry 'AXBT1 unknown' 'add_xy_component p3 "y-field bt1" "AXBT1" c_xytime_air'
	entry 'AXBT2 unknown' 'add_xy_component p3 "y-field bt2" "AXBT2" c_xytime_air'
	entry 'AXBT3 unknown' 'add_xy_component p3 "y-field bt3" "AXBT3" c_xytime_air'
endmenu

define widget wka-air-parts intmenu 'Wyoming King Air Fields'
	title 'Select Field'
	line
	entry 'Pressure Altitude KM' 'add_xy_component storm1 "x-field alt" "Pressure_Alt_KM" c_xy_air'
	entry 'Pressure (altitude 1) mb' 'add_xy_component storm1 "x-field pmb" "Pressure_(altitude_1)" c_xy_air'
	entry 'Pressure (Rosemount 1501) mb' 'add_xy_component storm1 "x-field p1501" "Pressure_(Rosemount_1501)" c_xy_air'
	entry 'Temperature (reverse flow) C' 'add_xy_component storm1 "x-field trf" "Temperature_(reverse_flow)_C" c_xy_air'
	entry 'Temperature (Rosemount) C' 'add_xy_component storm1 "x-field trose" "Temperature_(Rosemount)_C" c_xy_air' 
	entry 'Dew Point (Cambridge) C' 'add_xy_component storm1 "x-field tdp" "Dew_Point_(Cambridge)_C" c_xy_air'
	entry 'Potential Temperature K' 'add_xy_component storm1 "x-field theta" "Potential_Temperature_K" c_xy_air'
	entry 'Equivalent Potential Temperature K' 'add_xy_component storm1 "x-field thetae" "Equivalent_Potential_Temperature_K" c_xy_air'
	entry 'Specific Humidity g/kg'  'add_xy_component storm1 "x-field q" "Specific_Humidity_g/kg" c_xy_air'
	entry 'Mixing Ratio g/kg' 'add_xy_component storm1 "x-field w_gkg" "Mixing_Ratio_g/kg" c_xy_air'
	entry 'Absolute Humidity g/m3'   'add_xy_component storm1 "x-field rhov" "Absolute_Humidity_g/m3" c_xy_air'
	entry 'Relative Humidity'   'add_xy_component storm1 "x-field rh" "Relative_Humidity" c_xy_air'
	entry 'Virtual Temperature K'   'add_xy_component storm1 "x-field tv" "Virtual_Temperature_K" c_xy_air'
	entry 'True Airspeed m/s'  'add_xy_component storm1 "x-field tas" "True_Airspeed_m/s" c_xy_air'
	entry 'Radar Altimeter 1'  'add_xy_component storm1 "x-field ralt1" "Radar_Altimeter_1" c_xy_air'
	entry 'Radar Altimeter 2'   'add_xy_component storm1 "x-field ralt2" "Radar_Altimeter_2" c_xy_air'
	entry '1D-C Concentration N/Liter'  'add_xy_component storm1 "x-field onedc" "1D-C_Concentration_N/Liter" c_xy_air'
	entry 'FSSP Concentration N/cm3'  'add_xy_component storm1 "x-field fssp" "FSSP_Concentration_N/cm3" c_xy_air'
	entry 'FSSP Average Diameter um'   'add_xy_component storm1 "x-field fdbar" "FSSP_Average_Diameter_um" c_xy_air'
	entry 'Liquid Water (FSSP) g/m3'   'add_xy_component storm1 "x-field flwc" "Liquid_Water_(FSSP)_g/m3" c_xy_air'
	entry 'Liquid Water (CSIRO) g/m3'  'add_xy_component storm1 "x-field clwc" "Liquid_Water_(CSIRO)_g/m3" c_xy_air'
	entry 'Liquid Water (jw) g/m3'  'add_xy_component storm1 "x-field jwwc" "Liquid_Water_(jw)_g/m3" c_xy_air'
	entry 'Liquid Water (Rosemont) g/m3'  'add_xy_component storm1 "x-field rlwc" "Liquid_Water_(Rosemont)_g/m3" c_xy_air'
	entry 'FSSP Range Select'  'add_xy_component storm1 "x-field range" "FSSP_Range_Select" c_xy_air'
	entry '2D-C Concentration - ice N/Liter'  'add_xy_component storm1 "x-field concic" "2D-C_Concentration N/Liter" c_xy_air'
	entry '2D-P Concentration - ice N/Liter'  'add_xy_component storm1 "x-field concip" "2D-P_Concentration_N/Liter" c_xy_air'
	entry 'True Heading deg'  'add_xy_component storm1 "x-field hthead" "True_Heading_deg" c_xy_air'
	entry 'Ground Speed m/s' 'add_xy_component storm1 "x-field hgs" "Ground_Speed_m/s" c_xy_air'
	entry 'True Track Angle deg'  'add_xy_component storm1 "x-field htkt" "True_Track_Angle_deg" c_xy_air'
	entry 'IRS Calculated U wind m/s'  'add_xy_component storm1 "x-field hu" "U_wind_m/s" c_xy_air'
	entry 'IRS Calculated V wind m/s' 'add_xy_component storm1 "x-field hv" "V_wind_m/s" c_xy_air'
	entry 'Vertical Wind Speed m/s' 'add_xy_component storm1 "x-field hw" "Vertical_Wind_Speed_m/s" c_xy_air'
	entry 'Pitch deg' 'add_xy_component storm1 "x-field hpitch" "Pitch_deg" c_xy_air'
	entry 'Roll' 'add_xy_component storm1 "x-field hroll" "Roll_deg" c_xy_air'
endmenu

define widget time-wka-air-parts intmenu 'Wyoming King Air Fields'
	title 'Select Field'
	line
	entry 'Pressure Altitude KM' 'add_xy_component storm1 "y-field alt" "Pressure_Alt_KM" c_xytime_air'
	entry 'Pressure (altitude mb)' 'add_xy_component storm1 "y-field pmb" "Pressure_(altitude_mb)" c_xytime_air'
	entry 'Pressure (Rosemount 1501)' 'add_xy_component storm1 "y-field p1501" "Pressure_(Rosemount_1501)" c_xytime_air'
	entry 'Temperature (reverse flow) C' 'add_xy_component storm1 "y-field trf" "Temperature_(reverse_flow)_C" c_xytime_air'
	entry 'Temperature (Rosemount) C' 'add_xy_component storm1 "y-field trose" "Temperature_(Rosemount)_C" c_xytime_air' 
	entry 'Dew Point (Cambridge) C' 'add_xy_component storm1 "y-field tdp" "Dew_Point_(Cambridge)_C" c_xytime_air'
	entry 'Potential Temperature K' 'add_xy_component storm1 "y-field theta" "Potential_Temperature_K" c_xytime_air'
	entry 'Equivalent Potential Temperature K' 'add_xy_component storm1 "y-field thetae" "Equivalent_Potential_Temperature_K" c_xytime_air'
	entry 'Specific Humidity g/kg'  'add_xy_component storm1 "y-field q" "Specific_Humidity_g/kg" c_xytime_air'
	entry 'Mixing Ratio g/kg' 'add_xy_component storm1 "y-field w_gkg" "Mixing_Ratio_g/kg" c_xytime_air'
	entry 'Absolute Humidity g/m3'   'add_xy_component storm1 "y-field rhov" "Absolute_Humidity_g/m3" c_xytime_air'
	entry 'Relative Humidity %'   'add_xy_component storm1 "y-field rh" "Relative_Humidity" c_xytime_air'
	entry 'Virtual Temperature K'   'add_xy_component storm1 "y-field tv" "Virtual_Temperature_K" c_xytime_air'
	entry 'True Airspeed m/s'  'add_xy_component storm1 "y-field tas" "True_Airspeed_m/s" c_xytime_air'
	entry 'Radar Altimeter 1'  'add_xy_component storm1 "y-field ralt1" "Radar_Altimeter_1" c_xytime_air'
	entry 'Radar Altimeter 2'   'add_xy_component storm1 "y-field ralt2" "Radar_Altimeter_2" c_xytime_air'
	entry '1D-C Concentration N/Liter'  'add_xy_component storm1 "y-field onedc" "1D-C_Concentration_N/Liter" c_xytime_air'
	entry 'FSSP Concentration N/cm3'  'add_xy_component storm1 "y-field fssp" "FSSP_Concentration_N/cm3" c_xytime_air'
	entry 'FSSP Average Diameter um'   'add_xy_component storm1 "y-field fdbar" "FSSP_Average_Diameter_um" c_xytime_air'
	entry 'Liquid Water (FSSP) g/m3'   'add_xy_component storm1 "y-field flwc" "Liquid_Water_(FSSP)_g/m3" c_xytime_air'
	entry 'Liquid Water (CSIRO) g/m3'  'add_xy_component storm1 "y-field clwc" "Liquid_Water_(CSIRO)_g/m3" c_xytime_air'
	entry 'Liquid Water (jw) g/m3'  'add_xy_component storm1 "y-field jwwc" "Liquid_Water_(jw)_g/m3" c_xytime_air'
	entry 'Liquid Water (Rosemont) g/m3'  'add_xy_component storm1 "y-field rlwc" "Liquid_Water_(Rosemont)_g/m3" c_xytime_air'
	entry 'FSSP Range Select'  'add_xy_component storm1 "y-field range" "FSSP_Range_Select" c_xytime_air'
	entry '2D-C Concentration - ice N/Liter'  'add_xy_component storm1 "y-field concic" "2D-C_Concentration N/Liter" c_xytime_air'
	entry '2D-P Concentration - ice N/Liter'  'add_xy_component storm1 "y-field concip" "2D-P_Concentration_N/Liter" c_xytime_air'
	entry 'True Heading deg'  'add_xy_component storm1 "y-field hthead" "True_Heading_deg" c_xytime_air'
	entry 'Ground Speed m/s' 'add_xy_component storm1 "y-field hgs" "Ground_Speed_m/s" c_xytime_air'
	entry 'True Track Angle deg'  'add_xy_component storm1 "y-field htkt" "True_Track_Angle_deg" c_xytime_air'
	entry 'IRS Calculated U wind m/s'  'add_xy_component storm1 "y-field hu" "U_wind_m/s" c_xytime_air'
	entry 'IRS Calculated V wind m/s' 'add_xy_component storm1 "y-field hv" "V_wind_m/s" c_xytime_air'
	entry 'Vertical Wind Speed m/s' 'add_xy_component storm1 "y-field hw" "Vertical_Wind_Speed_m/s" c_xytime_air'
	entry 'Pitch deg' 'add_xy_component storm1 "y-field hpitch" "Pitch_deg" c_xytime_air'
	entry 'Roll' 'add_xy_component storm1 "y-field hroll" "Roll_deg" c_xytime_air'
endmenu

define widget nca-air-parts-1 intmenu 'NCAR King Air Fields'
	title 'Select Field'
	line
	entry 'Potential Temperature' 'add_xy_component storm2 "x-field THETA" "PotentialTemperature" c_xy_air'
	entry 'Corrected static pressure (fuselage DI) mb' 'add_xy_component storm2 "x-field PSFDC" "Corrected_static_pressure_(fuselage_DI)_mb" c_xy_air'
	entry 'Geometric (radio) altitude M' 'add_xy_component storm2 "x-field HGM" "Geometric_(radio)_altitude_M" c_xy_air'
	entry 'NACA Pressure Altitude M' 'add_xy_component storm2 "x-field alt" "NACA_Pressure_Altitude_M" c_xy_air'
	entry 'Ambient Temperature (Boom) C' 'add_xy_component storm2 "x-field ATB" "Ambient_Temperature_(Boom)_C" c_xy_air'
	entry 'Ambient Temperature (Reverse Flow) C' 'add_xy_component storm2 "x-field ATRF" "Ambient_Temperature_(Reverse_Flow)_C" c_xy_air'
	entry 'Wind East Component m/s' 'add_xy_component storm2 "x-field UI" "Wind_East_Component_m/s" c_xy_air'
	entry 'Wind North Component m/s' 'add_xy_component storm2 "x-field VI" "Wind_West_Component_m/s" c_xy_air'
	entry 'Wind Vertical Component m/s' 'add_xy_component storm2 "x-field WI" "Wind_Vertical_Component_m/s" c_xy_air'
	entry 'Equivalent Potential Temperature K' 'add_xy_component storm2 "x-field THETAE" "Equivalent_Potential_Temperature_K" c_xy_air'
	entry 'IRS Aircraft True Heading deg' 'add_xy_component storm2 "x-field THI" "IRS_Aircraft_True_Heading_deg" c_xy_air'
	entry 'IRS Aircraft Roll Attitude Angle deg' 'add_xy_component storm2 "x-field ROLL" "IRS_Aircraft_Roll_Attitude_Angle_deg" c_xy_air'
	entry 'IRS Aircraft Pitch Attitude Angle deg' 'add_xy_component storm2 "x-field PITCH" "IRS_Aircraft_Pitch_Attitude_Angle_deg" c_xy_air'
	entry 'IRS Ground Speed East Component m/s' 'add_xy_component storm2 "x-field VEW" "IRS_Ground_Speed_East_Component_m/s" c_xy_air'
	entry 'IRS Ground Speed North Component m/s' 'add_xy_component storm2 "x-field VNS" "IRS_Ground_Speed_North_Component_m/s" c_xy_air'
	entry 'Aircraft True Airspeed (Radome) m/s' 'add_xy_component storm2 "x-field TASR" "Aircraft_True_Airspeed_(Radome)_m/s" c_xy_air'
	entry 'Dewpoint temperature (thermoelec) (top) C' 'add_xy_component storm2 "x-field DPTC" "Dewpoint_temperature_(thermoelec)_(top)_C" c_xy_air'
	entry 'Dewpoint temperature (thermoelec) (bot) C' 'add_xy_component storm2  "x-field DPBC" "Dewpoint_temperature_(thermoelec)_(bot)_C" c_xy_air'
	entry 'Absolute humidity (thermoelec) (top) G/M3' 'add_xy_component storm2 "x-field RHODT" "Absolute_humidity_(thermoelec)_(top)_G/M3"  c_xy_air'
	entry 'Absolute humidity (thermoelec) (bot) G/M3' 'add_xy_component storm2 "x-field RHODB" "Absolute_humidity_(thermoelec)_(bot)_G/M3" c_xy_air'
	entry 'Mixing Ratio G/KG' 'add_xy_component storm2 "x-field MR" "Mixing_Ratio_G/KG" c_xy_air'
	entry 'Specific Humidity G/KG' 'add_xy_component storm2 "x-field SPHUM" "Specific_Humidity_G/KG" c_xy_air'
	entry 'Corrected PMS-KING Liquid Water Content G/M3' 'add_xy_component storm2 "x-field PLWCCZ" "Corrected_PMS-KING_Liquid_Water_Content_G/M3" c_xy_air'
	entry 'Corrected C-T Liquid Water Content G/M3' 'add_xy_component storm2 "x-field LWCCZ" "Corrected_C-T_Liquid_Water_Content_G/M3" c_xy_air'
	entry 'PMS 2DC Particle Concentrations N/L' 'add_xy_component storm2 "x-field CON2C1" "PMS_2DC_Particle_Concentrations_N/L" c_xy_air'
	entry 'PMS 2DP Particle Concentrations N/L' 'add_xy_component storm2 "x-field CON2P1" "PMS_2DP_Particle_Concentration_N/L" c_xy_air'
	entry 'Raw Icing Rate Indicator	VDC' 'add_xy_component storm2 "x-field RICE" "Raw_Icing_Rate_Indicator_VDC" c_xy_air'
endmenu

define widget nca-air-parts-2 intmenu 'NCAR King Air Fields'
	title 'Select Field'
	line
	entry 'Top Shortwave Irradiance W/M2' 'add_xy_component storm2 "x-field SWT" "Top_Shortwave_Irradiance_W/M2" c_xy_air'
	entry 'Bottom Shortwave Irradiance W/M2' 'add_xy_component storm2 "x-field SWB" "Bottom_Shortwave_Irradiance_W/M2" c_xy_air'
	entry 'Top Infrafed Corrected Irradiance W/M2' 'add_xy_component storm2 "x-field IRTC" "Top_Infrafed_Corrected_Irradiance_W/M2" c_xy_air'
	entry 'Bottom Infrared Corrected Irradiance W/M2' 'add_xy_component storm2 "x-field IRBC" "Bottom_Infrared_Corrected_Irradiance_W/M2" c_xy_air'
	entry 'Radiometric Surface Temperature C' 'add_xy_component storm2 "x-field RSTB" "Radiometric_Surface_Temperature_C" c_xy_air'
	entry 'Radiometric Cloud-Base Temperature C' 'add_xy_component storm2 "x-field RSTT" "Radiometric_Cloud-Base_Temperature_C" c_xy_air'
	entry 'FSSP Liquid Water Content G/M3' 'add_xy_component storm2 "x-field PLWCF" "FSSP_Liquid_Water_Content_G/M3" c_xy_air'
	entry 'PMS FSSP Probe (Total Counts) CNTS' 'add_xy_component storm2 "x-field SUM15F" "PMS_FSSP_Probe_(Total_Counts)_CNTS" c_xy_air'
	entry 'FSSP Range' 'add_xy_component storm2 "x-field FRANGE" "FSSP_Range" c_xy_air'
	entry 'PMS 260X Probe (Total Counts) CNTS' 'add_xy_component storm2 "x-field XSUMX6" "PMS_260X_Probe_(Total_Counts)_CNTS" c_xy_air'
	entry '260X Total Concentration N/LTR' 'add_xy_component storm2 "x-field XCONC6" "260X_Total_Concentration_N/LTR" c_xy_air'
	entry 'Corrected Ozone Concentration PPB' 'add_xy_component storm2 "x-field TEO3C" "Corrected_Ozone_Concentration_PPB" c_xy_air'
	entry 'Chemiluminescence Ozone Temperature C' 'add_xy_component storm2 "x-field O3CT" "Chemiluminescence_Ozone_Temperature_C" c_xy_air'
	entry 'Chemiluminescence Ozone Pressure mb' 'add_xy_component storm2 "x-field O3CP" "Chemiluminescence_Ozone_Pressure_mb" c_xy_air'
	entry 'Chemiluminescence Ozone Flow Rate slpm' 'add_xy_component storm2 "x-field O3CF" "Chemiluminescence_Ozone_Flow_Rate_slpm" c_xy_air'
	entry 'Chemiluminescence Ozone Voltage vdc' 'add_xy_component storm2 "x-field O3CS" "Chemiluminescence_Ozone_Voltage_vdc" c_xy_air'
	entry 'Raw Lyman-Alpha Voltage vdc' 'add_xy_component storm2 "x-field VLA" "Raw_Lyman-Alpha_Voltage_vdc" c_xy_air'
endmenu 


define widget time-nca-air-parts-1 intmenu 'NCAR King Air Fields'
	title 'Select Field'
	line
	entry 'Potential Temperature' 'add_xy_component storm2 "y-field THETA" "PotentialTemperature" c_xytime_air'
!
	entry 'Corrected static pressure (fuselage DI) mb' 'add_xy_component storm2 "y-field PSFDC" "Corrected_static_pressure_(fuselage_DI)_mb" c_xytime_air'
!
	entry 'Geometric (radio) altitude M' 'add_xy_component storm2 "y-field HGM" "Geometric_(radio)_altitude_M" c_xytime_air'
!
	entry 'NACA Pressure Altitude M' 'add_xy_component storm2 "y-field alt" "NACA_Pressure_Altitude_M" c_xytime_air'
!	
	entry 'Ambient Temperature (Boom) C' 'add_xy_component storm2 "y-field ATB" "Ambient_Temperature_(Boom)_C" c_xytime_air'
!
	entry 'Ambient Temperature (Reverse Flow) C' 'add_xy_component storm2 "y-field ATRF" "Ambient_Temperature_(Reverse_Flow)_C" c_xytime_air'
!
	entry 'Wind East Component m/s' 'add_xy_component storm2 "y-field UI" "Wind_East_Component_m/s" c_xytime_air'
!
	entry 'Wind West Component m/s' 'add_xy_component storm2 "y-field VI" "Wind_West_Component_m/s" c_xytime_air'
!
	entry 'Wind Vertical Component m/s' 'add_xy_component storm2 "y-field WI" "Wind_Vertical_Component_m/s" c_xytime_air'
!
	entry 'Potential Temperature K' 'add_xy_component storm2 "y-field THETA" "Potential_Temperature_K" c_xytime_air'
!
	entry 'Equivalent Potential Temperature K' 'add_xy_component storm2 "y-field THETAE" "Equivalent_Potential_Temperature_K" c_xytime_air'
!
	entry 'IRS Aircraft True Heading deg' 'add_xy_component storm2 "y-field THI" "IRS_Aircraft_True_Heading_deg" c_xytime_air'
!
	entry 'IRS Aircraft Roll Attitude Angle deg' 'add_xy_component storm2 "y-field ROLL" "IRS_Aircraft_Roll_Attitude_Angle_deg" c_xytime_air'
!
	entry 'IRS Aircraft Pitch Attitude Angle deg' 'add_xy_component storm2 "y-field PITCH" "IRS_Aircraft_Pitch_Attitude_Angle_deg" c_xytime_air'
!
	entry 'IRS Ground Speed East Component m/s' 'add_xy_component storm2 "y-field VEW" "IRS_Ground_Speed_East_Component_m/s" c_xytime_air'
!
	entry 'IRS Ground Speed North Component m/s' 'add_xy_component storm2 "y-field VNS" "IRS_Ground_Speed_North_Component_m/s" c_xytime_air'
!
	entry 'Aircraft True Airspeed (Radome) m/s' 'add_xy_component storm2 "y-field TASR" "Aircraft_True_Airspeed_(Radome)_m/s" c_xytime_air'
!
	entry 'Dewpoint temperature (thermoelec) (top) C' 'add_xy_component storm2 "y-field DPTC" "Dewpoint_temperature_(thermoelec)_(top)_C" c_xytime_air'
!
	entry 'Dewpoint temperature (thermoelec) (bot) C' 'add_xy_component storm2  "y-field DPBC" "Dewpoint_temperature_(thermoelec)_(bot)_C" c_xytime_air'
!
	entry 'Absolute humidity (thermoelec) (top) G/M3' 'add_xy_component storm2 "y-field RHODT" "Absolute_humidity_(thermoelec)_(top)_G/M3"  c_xytime_air'
!
	entry 'Absolute humidity (thermoelec) (bot) G/M3' 'add_xy_component storm2 "y-field RHODB" "Absolute_humidity_(thermoelec)_(bot)_G/M3" c_xytime_air'
!
	entry 'Mixing Ratio G/KG' 'add_xy_component storm2 "y-field MR" "Mixing_Ratio_G/KG" c_xytime_air'
!
	entry 'Specific Humidity G/KG' 'add_xy_component storm2 "y-field SPHUM" "Specific_Humidity_G/KG" c_xytime_air'
!
	entry 'Corrected PMS-KING Liquid Water Content G/M3' 'add_xy_component storm2 "y-field PLWCCZ" "Corrected_PMS-KING_Liquid_Water_Content_G/M3" c_xytime_air'
!
	entry 'Corrected C-T Liquid Water Content G/M3' 'add_xy_component storm2 "y-field LWCCZ" "Corrected_C-T_Liquid_Water_Content_G/M3" c_xytime_air'
!
	entry 'PMS 2DC Particle Concentrations N/L' 'add_xy_component storm2 "y-field CON2C1" "PMS_2DC_Particle_Concentrations_N/L" c_xytime_air'
!
	entry 'PMS 2DP Particle Concentrations N/L' 'add_xy_component storm2 "y-field CON2P1" "PMS_2DP_Particle_Concentration_N/L" c_xytime_air'
!
	entry 'Raw Icing Rate Indicator	VDC' 'add_xy_component storm2 "y-field RICE" "Raw_Icing_Rate_Indicator_VDC" c_xytime_air'
!
	entry 'Top Shortwave Irradiance W/M2' 'add_xy_component storm2 "y-field SWT" "Top_Shortwave_Irradiance_W/M2" c_xytime_air'
!
	entry 'Bottom Shortwave Irradiance W/M2' 'add_xy_component storm2 "y-field SWB" "Bottom_Shortwave_Irradiance_W/M2" c_xytime_air'
!
endmenu

define widget time-nca-air-parts-2 intmenu 'NCAR King Air Fields'
	title 'Select Field'
	line
	entry 'Top Infrafed Corrected Irradiance W/M2' 'add_xy_component storm2 "y-field IRTC" "Top_Infrafed_Corrected_Irradiance_W/M2" c_xytime_air'
!
	entry 'Bottom Infrared Corrected Irradiance W/M2' 'add_xy_component storm2 "y-field IRBC" "Bottom_Infrared_Corrected_Irradiance_W/M2" c_xytime_air'
!
	entry 'Radiometric Surface Temperature C' 'add_xy_component storm2 "y-field RSTB" "Radiometric_Surface_Temperature_C" c_xytime_air'
!
	entry 'Radiometric Cloud-Base Temperature C' 'add_xy_component storm2 "y-field RSTT" "Radiometric_Cloud-Base_Temperature_C" c_xytime_air'
!
	entry 'FSSP Liquid Water Content G/M3' 'add_xy_component storm2 "y-field PLWCF" "FSSP_Liquid_Water_Content_G/M3" c_xytime_air'
!
	entry 'PMS FSSP Probe (Total Counts) CNTS' 'add_xy_component storm2 "y-field SUM15F" "PMS_FSSP_Probe_(Total_Counts)_CNTS" c_xytime_air'
!
	entry 'FSSP Range' 'add_xy_component storm2 "y-field FRANGE" "FSSP_Range" c_xytime_air'
!
	entry 'PMS 260X Probe (Total Counts) CNTS' 'add_xy_component storm2 "y-field XSUMX6" "PMS_260X_Probe_(Total_Counts)_CNTS" c_xytime_air'
!
	entry '260X Total Concentration N/LTR' 'add_xy_component storm2 "y-field XCONC6" "260X_Total_Concentration_N/LTR" c_xytime_air'
!
	entry 'Corrected Ozone Concentration PPB' 'add_xy_component storm2 "y-field TEO3C" "Corrected_Ozone_Concentration_PPB" c_xytime_air'
!
	entry 'Chemiluminescence Ozone Temperature C' 'add_xy_component storm2 "y-field O3CT" "Chemiluminescence_Ozone_Temperature_C" c_xytime_air'
!
	entry 'Chemiluminescence Ozone Pressure mb' 'add_xy_component storm2 "y-field O3CP" "Chemiluminescence_Ozone_Pressure_mb" c_xytime_air'
!
	entry 'Chemiluminescence Ozone Flow Rate slpm' 'add_xy_component storm2 "y-field O3CF" "Chemiluminescence_Ozone_Flow_Rate_slpm" c_xytime_air'
!
	entry 'Chemiluminescence Ozone Voltage vdc' 'add_xy_component storm2 "y-field O3CS" "Chemiluminescence_Ozone_Voltage_vdc" c_xytime_air'
!
	entry 'Raw Lyman-Alpha Voltage vdc' 'add_xy_component storm2 "y-field VLA" "Raw_Lyman-Alpha_Voltage_vdc" c_xytime_air'
!
endmenu 


define widget xy-meso-platforms intmenu 'Select mesonet for xy graph'
	title 'Select Mesonet Platform'
	line
	entry 'mesonet/1' \
		'parameter #icon_component platform mesonet/1'
	entry 'mesonet/2' \
		'parameter #icon_component platform mesonet/2'
	entry 'mesonet/3' \
		'parameter #icon_component platform mesonet/3'
	entry 'mesonet/4' \
		'parameter #icon_component platform mesonet/4'
	entry 'mesonet/5' \
		'parameter #icon_component platform mesonet/5'
	entry 'mesonet/6' \
		'parameter #icon_component platform mesonet/6'
	entry 'mesonet/7' \
		'parameter #icon_component platform mesonet/7'
	entry 'mesonet/8' \
		'parameter #icon_component platform mesonet/8'
	entry 'mesonet/9' \
		'parameter #icon_component platform mesonet/9'
	entry 'mesonet/10' \
		'parameter #icon_component platform mesonet/10'
	entry 'mesonet/11' \
		'parameter #icon_component platform mesonet/11'
	entry 'mesonet/12' \
		'parameter #icon_component platform mesonet/12'
endmenu

define widget sound-platforms intmenu 'Sounding platforms'
	title 'Select Sounding Platform'
	line
	submenu 'NWS StormFEST Network' 'nws_locations'
	submenu 'Picket Fence Network' 'pick_locations'
	submenu 'Canadian Atmos. Environment Service' 'caes_locations'
	submenu 'CLASS soundings' 'class_locations'
	submenu 'Dropwinde Sondes' 'drop_locations'
endmenu

define widget pick_locations intmenu 'Picket Fence Network'
	title 'Select Sounding Platform'
	line
	entry 'Medford (mfr)' \
		'parameter #icon_component platform smfr'
	entry 'San Diego (myf)' \
		'parameter #icon_component platform smyf'
	entry 'Oakland (oak)' \
		'parameter #icon_component platform soak'
	entry 'Salem (sle)' \
		'parameter #icon_component platform ssle'
	entry 'Quillayute (uil)' \
		'parameter #icon_component platform suil'
	entry 'Vandenberg AFB (vbg)' \
		'parameter #icon_component platform svbg'
	entry 'Annette (ann)' \
		'parameter #icon_component platform sann'
	entry 'Olympia (olm)' \
		'parameter #icon_component platform solm'
	entry 'Cottage Grove (cgo)' \
		'parameter #icon_component platform scgo'
	entry 'Redding (rrd)' \
		'parameter #icon_component platform srrd'
	entry 'Williams CA (ila)' \
		'parameter #icon_component platform sila'
	entry 'Monterey (snps)' \
		'parameter #icon_component platform snps'
	entry 'Pasarobles CA (prb)' \
		'parameter #icon_component platform sprb'
	entry 'Point Mugu (ntd)' \
		'parameter #icon_component platform sntd'
endmenu

define widget caes_locations intmenu 'Canadian Atmos. Environment Service'
	title 'Select Sounding Platform'
	line
	entry 'Whitehorse (yxy)' \
		'parameter #icon_component platform syxy'
	entry 'Fort Nelson (yye)' \
		'parameter #icon_component platform syye'
	entry 'Port Hardy (yzt)' \
		'parameter #icon_component platform syzt'
	entry 'Fort Smith (ysm)' \
		'parameter #icon_component platform sysm'
	entry 'Norman Wills (yvq)'\
		'parameter #icon_component platform syvq'
	entry 'Prince George (yxs)' \
		'parameter #icon_component platform syxs'
	entry 'Edmonton-Stony Plain (wse)' \
		'parameter #icon_component platform swse'
	entry 'Vernon (wvk)' \
		'parameter #icon_component platform swvk'
	entry 'Inuvik (yev)' \
		'parameter #icon_component platform syev'
endmenu

define widget class_locations intmenu 'CLASS soundings'
	title 'Select Sounding Platform'
	line
	entry 'Burlington (3v1)' \
		'parameter #icon_component platform s3v1'
	entry 'Senena (62k)' \
		'parameter #icon_component platform s62k'
	entry 'Arkansas City (akz)' \
		'parameter #icon_component platform sakz'
	entry 'Columbia (cou)' \
		'parameter #icon_component platform scou'
	entry 'Kearney (ear)' \
		'parameter #icon_component platform sear'
	entry 'Guymon (guy)' \
		'parameter #icon_component platform sguy'
	entry 'Henderson (hen)' \
		'parameter #icon_component platform shen'
	entry 'Hays (hys)' \
		'parameter #icon_component platform shys'
	entry 'Iowa City (iow)' \
		'parameter #icon_component platform siow'
	entry 'Kirksville (irk)' \
		'parameter #icon_component platform sirk'
	entry 'Storm Lake (slb)' \
		'parameter #icon_component platform sslb'
	entry 'St. Cloud (stc)' \
		'parameter #icon_component platform sstc'
endmenu

define widget drop_locations intmenu 'Dropwinde Sondes' 
	title 'Select Sounding Platform'
	line
	entry 'Air Wx Dropsondes (aws A)' \
		'parameter #icon_component platform saws_a'
	entry 'Air Wx Dropsondes (aws B)' \
		'parameter #icon_component platform saws_b'
	entry 'NCAR L2D2 from P3a' \
		'parameter #icon_component platform sl2d2_p3_a'
	entry 'NCAR L2D2 from P3b' \
		'parameter #icon_component platform sl2d2_p3_b'
	entry 'NCAR L2D2 from Storm2' \
		'parameter #icon_component platform sl2d2_s2'
endmenu

define widget nws_locations intmenu 'NWS sounding sites'
	title 'Select Sounding Platform'
	line
	entry 'Albuquerque (abq)' \
		'parameter #icon_component platform sabq'
	entry 'Burlington (3v1)' \
		'parameter #icon_component platform s3v1'
	entry 'Senena (62k)' \
		'parameter #icon_component platform s62k'
	entry 'Kodiak (adq)' \
		'parameter #icon_component platform sadq'
	entry 'Amarillo (ama)' \
		'parameter #icon_component platform sama'
	entry 'Bismarck (bis)' \
		'parameter #icon_component platform sbis'
	entry 'Boise (boi)' \
		'parameter #icon_component platform sboi'
	entry 'Dodge City (ddc)' \
		'parameter #icon_component platform sddc'
	entry 'Denver (den)' \
		'parameter #icon_component platform sden'
	entry 'Desert Rock (dra)' \
		'parameter #icon_component platform sdra'
	entry 'El Paso (elp)' \
		'parameter #icon_component platform selp'
	entry 'Ely (ely)' \
		'parameter #icon_component platform sely'
	entry 'Fort Sill (fsi)' \
		'parameter #icon_component platform sfsi'
	entry 'Spokane (sgeg)' \
		'parameter #icon_component platform sgeg'
	entry 'Longview  (ggg)' \
		'parameter #icon_component platform sggg'
	entry 'Bismarck (bis)' \
		'parameter #icon_component platform sbis'
	entry 'Glasgow (ggw)' \
		'parameter #icon_component platform sggw'
	entry 'Grand Junction (gjt)' \
		'parameter #icon_component platform sgjt'
	entry 'Green Bay (grb)' \
		'parameter #icon_component platform sgrb'
	entry 'Great Falls (gtf)' \
		'parameter #icon_component platform sgtf'
	entry 'Bismarck (bis)' \
		'parameter #icon_component platform sbis'
	entry 'Huron (hon)' \
		'parameter #icon_component platform shon'
	entry 'Winslow (inw)' \
		'parameter #icon_component platform sinw'
	entry 'North Platte (lbf)' \
		'parameter #icon_component platform slbf'
	entry 'Little Rock (lit)' \
		'parameter #icon_component platform slit'
	entry 'Lander (lnd)' \
		'parameter #icon_component platform slnd'
	entry 'Midland (maf)' \
		'parameter #icon_component platform smaf'
	entry 'Omaha (oma)' \
		'parameter #icon_component platform soma'
	entry 'Norman (oun)' \
		'parameter #icon_component platform soun'
	entry 'Paducah (pah)' \
		'parameter #icon_component platform spah'
	entry 'Peoria (pia)' \
		'parameter #icon_component platform spia'
	entry 'Rapid City (rap)' \
		'parameter #icon_component platform srap'
	entry 'Redding (rrd)' \
		'parameter #icon_component platform srrd'
	entry 'Stephenville (sep)' \
		'parameter #icon_component platform ssep'
	entry 'Salt Lake City (slc)' \
		'parameter #icon_component platform sslc'
	entry 'Columbia (stl)' \
		'parameter #icon_component platform sstl'
	entry 'Topeka (top)' \
		'parameter #icon_component platform stop'
	entry 'Tucson (tus)' \
		'parameter #icon_component platform stus'
	entry 'Monett (umn)' \
		'parameter #icon_component platform sumn'
	entry 'Flatlands (wil)' \
		'parameter #icon_component platform swil'
	entry 'Winnemucca (wmc)' \
		'parameter #icon_component platform swmc'
	entry 'Yakutat (yak)' \
		'parameter #icon_component platform syak'
endmenu

define widget hour-prof-plat intmenu 'Hourly Profiler Data'
	title 'Select Hourly Profiler Data'
	line
	entry 'AZCN5 Aztec' \
		'parameter #icon_component platform prof_azcn5_l,prof_azcn5_h'
	entry 'BLMM7 Bloomfield' \
		'parameter #icon_component platform prof_blmm7_l,prof_blmm7_h'
	entry 'BLRW3 Blue River' \
		'parameter #icon_component platform prof_blrw3_l,prof_blrw3_h'
	entry 'CNWM7 Conway' \
		'parameter #icon_component platform prof_cnwm7_l,prof_cnwm7_h'
	entry 'DQUA4 DeQueen' \
		'parameter #icon_component platform prof_dqua4_l,prof_dqua4_h'
	entry 'FBYN1 Fairbury' \
		'parameter #icon_component platform prof_fbyn1_l,prof_fbyn1_h'
	entry 'GDAC2 Granada' \
		'parameter #icon_component platform prof_gdac2_l,prof_gdac2_h'
	entry 'HKLO2 Haskell' \
		'parameter #icon_component platform prof_hklo2_l,prof_hklo2_h'
	entry 'HVLK1 Haviland' \
		'parameter #icon_component platform prof_hvlk1_l,prof_hvlk1_h'
	entry 'HBRK1 Hillsboro' \
		'parameter #icon_component platform prof_hbrk1_l,prof_hbrk1_h'
	entry 'JTNT2 Jayton' \
		'parameter #icon_component platform prof_jtnt2_l,prof_jtnt2_h'
	entry 'NRCM5 Kansas City' \
		'parameter #icon_component platform prof_nrcm5_l,prof_nrcm5_h'
	entry 'LMNO2 Lamont' \
		'parameter #icon_component platform prof_lmno2_l,prof_lmno2_h'
	entry 'LTHM7 Lathrop' \
		'parameter #icon_component platform prof_lthm7_l,prof_lthm7_h'
	entry 'RWDN1 McCook' \
		'parameter #icon_component platform prof_rwdn1_l,prof_rwdn1_h'
	entry 'MBWW4 Medicine Bow' \
		'parameter #icon_component platform prof_mbww4_l,prof_mbww4_h'
	entry 'MRRN1 Merriman' \
		'parameter #icon_component platform prof_mrrn1_l,prof_mrrn1_h'
	entry 'NLGN1 Neligh' \
		'parameter #icon_component platform prof_nlgn1_l,prof_nlgn1_h'
	entry 'NDSK1 Neodesha' \
		'parameter #icon_component platform prof_ndsk1_l,prof_ndsk1_h'
	entry 'OKOM6 Okolona' \
		'parameter #icon_component platform prof_okom6_l,prof_okom6_h'
	entry 'PATT2 Palestine' \
		'parameter #icon_component platform prof_patt2_l,prof_patt2_h'
	entry 'PLTC2 Platteville' \
		'parameter #icon_component platform prof_pltc2_l,prof_pltc2_h'
	entry 'PRCO2 Purcell' \
		'parameter #icon_component platform prof_prco2_l,prof_prco2_h'
	entry 'SLAI4 Slater' \
		'parameter #icon_component platform prof_slai4_l,prof_slai4_h'
	entry 'TCUN5 Tucumcari' \
		'parameter #icon_component platform prof_tcun5_l,prof_tcun5_h'
	entry 'VCIO2 Vici' \
		'parameter #icon_component platform prof_vcio2_l,prof_vcio2_h'
	entry 'WSMN5 White Sands' \
		'parameter #icon_component platform prof_wsmn5_l,prof_wsmn5_h'
	entry 'WNCI2 Winchester' \
		'parameter #icon_component platform prof_wnci2_l,prof_wnci2_h'
	entry 'WDLM5 Wood Lake' \
		'parameter #icon_component platform prof_wdlm5_l,prof_wdlm5_h'
endmenu

procedure adjust_height_scale how string proc1 string proc2 string
        local alt pd_paramsearch(icon_component, "prof-site-alt", "", "float")
        if (how = "set")
            parameter global height-scale-y-min #proc1
            parameter global height-scale-y-max #proc2
        else
            local min pd_param("global", "height-scale-y-min", "string")
            local max pd_param("global", "height-scale-y-max", "string")
            activate doublefloat "global" "height-scale-y-min" "Y Min: " #min \
                "height-scale-y-max" "Y Max: " #max
        endif
        local min pd_param("global", "height-scale-y-min", "float")
        local max pd_param("global", "height-scale-y-max", "float")
        local minO string((alt/1000) + (min / 1000))
        local maxO string((alt/1000) + (max / 1000))
        parameter global alt-scale-y-min #minO
        parameter global alt-scale-y-max #maxO
endprocedure


!
! The surface station selector.
!
define widget PlatformSel form 'Platform Selector'
	noheader
	popup ps_popup
	label title 'Platform Selection' width 200
	label comp 'stuff' color gray95 width 1
	newline
	label l1 'Platform name: '
	blank platform ' ' width 150 command ps_select
	newline
	button help1 'Help' command 'help plat_selector'
	button select 'Select' command ps_select
	button help2 'List Stations' command 'dm "help intro fest_stations.hlp"'
	button cancel 'Cancel' color red command 'popdown #ui$form'
	newline
	label gripe 'gripe' color red width 200
enddef



!
! Popup initialization.
!
procedure ps_popup
	local current quote(basename(pd_param(icon_component,'platform','string')))
	formtext #ui$form 'comp' #icon_component
	formtext #ui$form 'platform' #current
	formtext #ui$form 'gripe' ' '
endprocedure

!
! They selected something.
!
procedure ps_select
	local plat getftext(ui$form,'platform')
	formtext #ui$form gripe ' '
!
! Various combinations, trying to find the best name that works.
!
	if (RealPlatform (concat ('surface_5min/', plat)))
		local plat concat('surface_5min/', plat)
	elseif (RealPlatform (concat ('surface_hourly/', plat)))
		local plat concat('surface_hourly/', plat)
	elseif (not RealPlatform (plat))
		local complaint quote(concat('Unknown platform: ',plat))
		formtext #ui$form gripe #complaint
		return
	endif
!
! We have a real name, so go with it.
!
	local cmp getftext(ui$form,'comp')
	local plat quote(plat)	! some have spaces!!
	parameter #cmp 'platform' #plat
!	popdown #ui$form
endprocedure


define widget xy-meso-psel intmenu 'platform sel'
	title 'Mesonet Time-series Data'
	line
	entry 'Select Mesonet Platform' 'popup PlatformSel'
	line
	entry 'List All Surface Stations' 'dm "help intro fest_stations.hlp"'
	entry 'List Only Midwest Stations' 'dm "help centralstates fest_stations.hlp"'
	line
	entry 'List Weather Codes' 'dm "help weather_codes fest_codes.hlp"'
	entry 'List Sounding QC Flags' 'dm "help qcf_soundings fest_codes.hlp"'
	entry 'List Surface QC Flags' 'dm "help qcf_surface fest_codes.hlp"'
endmenu

